<?xml version="1.0" encoding="UTF-8"?>
<?xfa generator="AdobeLiveCycleDesignerES_V10.0.2.20120224.1.869952" APIVersion="3.5.12002.0"?>
<xdp:xdp xmlns:xdp="http://ns.adobe.com/xdp/" timeStamp="2016-02-19T21:13:53Z" uuid="1d326285-7a13-4346-a4cb-02d273286c52">
<template xmlns="http://www.xfa.org/schema/xfa-template/3.0/">
   <?formServer defaultPDFRenderFormat acrobat9.1dynamic?>
   <?formServer allowRenderCaching 0?>
   <?formServer formModel client?>
   <subform name="CTSI" layout="tb" locale="en_CA" restoreState="auto">
      <pageSet>
         <pageArea name="Page1" id="Page1">
            <contentArea w="203.2mm" h="249.476mm" x="6.351mm" y="16.198mm" name="contentArea"/>
            <medium stock="default" short="612pt" long="792pt"/>
            <subform x="6.35mm" y="6.35mm" w="47.625mm" name="sfLogo_en" layout="tb">
               <bind match="none"/>
               <draw h="6.35mm" name="imgHCLogo" w="47.625mm">
                  <ui>
                     <imageEdit/>
                  </ui>
                  <value>
                     <image contentType="image/jpeg" href="..\..\FIP logos\HC-SC.jpg"/>
                  </value>
                  <?templateDesigner expand 1?>
                  <assist>
                     <speak priority="toolTip"/>
                  </assist>
               </draw>
               <event activity="initialize" name="event__initialize">
                  <script contentType="application/x-javascript">

var cFormHandler=script.HCeForm.control.FormHandler;
var cConfigManager=script.core.util.ConfigurationManager;

var FRENCH=			cConfigManager.get("FRENCH");

if(cFormHandler.getCurrentLanguage()===FRENCH){
	this.presence="hidden";
}else{
	this.presence="visible";
}
</script>
               </event>
               <?templateDesigner expand 1?></subform>
            <subform x="6.35mm" y="6.35mm" w="47.625mm" name="sfLogo_fr" layout="tb">
               <bind match="none"/>
               <draw name="imgHCLogo_fr" w="47.625mm" h="6.35mm">
                  <value>
                     <image href="..\..\FIP logos\SC-HC.jpg" contentType="image/jpeg"/>
                  </value>
                  <ui>
                     <imageEdit/>
                  </ui>
                  <assist>
                     <speak priority="toolTip"/>
                  </assist>
               </draw>
               <event activity="initialize" name="event__initialize">
                  <script contentType="application/x-javascript">

var cFormHandler=script.HCeForm.control.FormHandler;
var cConfigManager=script.core.util.ConfigurationManager;

var FRENCH=			cConfigManager.get("FRENCH");

if(cFormHandler.getCurrentLanguage()===FRENCH){
	this.presence="visible";
}else{
	this.presence="hidden";
}

</script>
               </event>
               <?templateDesigner expand 1?></subform>
            <draw h="6.352mm" name="imgCanada" w="20.744mm" y="268.392mm" x="6.136mm">
               <ui>
                  <imageEdit/>
               </ui>
               <value>
                  <image contentType="image/gif" href="..\..\Images\wordmark.gif"/>
               </value>
               <assist>
                  <speak disable="1"/>
               </assist>
            </draw>
            <field name="eventHandler" y="269.349mm" x="61.309mm" w="10.54mm" h="6.35mm" access="protected" presence="invisible">
               <ui>
                  <textEdit>
                     <border presence="hidden">
                        <?templateDesigner StyleID aped0?></border>
                     <margin/>
                  </textEdit>
               </ui>
               <font typeface="Myriad Pro" size="8pt"/>
               <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
               <para vAlign="middle"/>
               <bind match="none"/>
               <assist>
                  <speak disable="1"/>
               </assist>
               <event activity="initialize" name="event__initialize">
                  <script contentType="application/x-javascript">
/*******************************************************************************
 * This updates the FormPage's language when a new instance is created. This is
 * here because there is nowhere to put it on the master page itself.
 */

//imports
var cActionEvent = script.core.event.ActionEvent;
var cMasterPageHandler = script.HCeForm.control.MasterPageHandler;
var cSystem = script.core.System;

try
{
	// set up event object
	var actionName = cMasterPageHandler.INITIALIZE_MASTER_PAGE;
	var anActionEvent = cActionEvent.createInstance(actionName,this, this.parent);

	// deploy event to controller
	cMasterPageHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cSystem.processUnhandledException(exception);
}


</script>
               </event>
            </field>
            <field access="protected" name="Pages" x="93.955mm" y="267.931mm" minW="27.99mm" minH="5.588mm">
               <font typeface="Myriad Pro" size="8pt"/>
               <margin bottomInset="1mm" leftInset="0mm" rightInset="0mm" topInset="1mm"/>
               <para vAlign="middle"/>
               <ui>
                  <textEdit>
                     <border presence="hidden">
                        <?templateDesigner StyleID aped0?></border>
                     <margin/>
                  </textEdit>
               </ui>
               <bind match="none"/>
               <format>
                  <picture>9999999</picture>
               </format>
               <event activity="ready" ref="$layout" name="event__layout_ready">
                  <script contentType="application/x-javascript">
var cResourceManager = 		script.core.lang.ResourceManager;

var textVal="";
textVal="Page "+xfa.layout.page(this)+" "+cResourceManager.get("lbOfLCText")+" " + xfa.layout.pageCount();
this.rawValue=textVal;
</script>
               </event>
               <assist>
                  <speak disable="1"/>
               </assist>
            </field>
            <field name="txtFormVersion" y="267.931mm" x="28.722mm" w="28.707mm" h="5.588mm" access="protected">
               <ui>
                  <textEdit>
                     <border presence="hidden"/>
                     <margin/>
                  </textEdit>
               </ui>
               <font typeface="Myriad Pro" size="8pt"/>
               <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
               <para vAlign="middle"/>
               <caption reserve="15.9508mm">
                  <font size="8pt" typeface="Myriad Pro" baselineShift="0pt"/>
                  <para vAlign="middle" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt"/>
                  <value>
                     <text>Revision No:</text>
                  </value>
               </caption>
            </field>
            <draw name="lblMasterTitle" y="267.931mm" x="123.143mm" w="85.581mm" h="5.588mm" hAlign="right">
               <ui>
                  <textEdit/>
               </ui>
               <value>
                  <text>Title</text>
               </value>
               <font size="8pt" typeface="Myriad Pro"/>
               <margin topInset="0.5mm" bottomInset="0.5mm" leftInset="0.5mm" rightInset="0.5mm"/>
               <para vAlign="middle" hAlign="right"/>
               <?renderCache.bounds 239758 13006 0 0 1417 1417 0 0?>
               <?renderCache.textRun 5 Title 0 226783 9920 0 0 0 "Myriad Pro" 0 0 8000 ISO-8859-1?></draw>
            <field name="btnAddSite" y="4.901mm" x="180.624mm" w="28.153mm" h="5.08mm" relevant="-print">
               <ui>
                  <button highlight="inverted"/>
               </ui>
               <font typeface="Myriad Pro"/>
               <caption>
                  <value>
                     <text>Add Clinical Trial Site</text>
                  </value>
                  <para vAlign="middle" hAlign="center"/>
                  <font typeface="Myriad Pro" size="8pt"/>
               </caption>
               <border hand="right">
                  <edge stroke="raised"/>
                  <fill>
                     <color value="212,208,200"/>
                  </fill>
               </border>
               <bind match="none"/>
               <event activity="click" name="event__click">
                  <script contentType="application/x-javascript">
var cHandler=	script.HCeForm.control.TrialsHandler
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
try
{
		// set up event object
		var actionName = cHandler.ADD_SITE_ACTION;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
	
}
catch(exception)
{
	cLog.warn("Problem with show instructions ::click", exception);
}
</script>
               </event>
            </field>
            <?templateDesigner expand 0?></pageArea>
         <?templateDesigner expand 0?></pageSet>
      <subform w="576pt" name="sfPage1" layout="lr-tb">
         <subform w="203.2mm" name="sfMainHeader" layout="lr-tb">
            <draw name="lblFormTitle" w="202.184mm" h="9.42mm">
               <ui>
                  <textEdit/>
               </ui>
               <value>
                  <text>CLINICAL TRIAL SITE INFORMATION FORM</text>
               </value>
               <font size="16pt" typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
               <margin topInset="0.5mm" bottomInset="0.5mm" leftInset="0.5mm" rightInset="0.5mm"/>
               <para hAlign="center" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
               <assist role="H1"/>
               <?renderCache.bounds 570286 23868 0 0 1417 1417 0 0?>
               <?renderCache.textRun 36 CLINICAL TRIAL SITE INFORMATION FORM 0 137179 17351 0 0 0 "Myriad Pro" 1 0 16000 ISO-8859-1?></draw>
            <exclGroup name="pageLanguage" layout="lr-tb">
               <field h="6mm" name="chkEnglish" w="23.28mm" locale="en_CA" relevant="-print">
                  <caption placement="right" reserve="16.812mm">
                     <font size="8pt" typeface="Myriad Pro"/>
                     <para vAlign="middle"/>
                     <value>
                        <text>English</text>
                     </value>
                  </caption>
                  <font typeface="Myriad Pro"/>
                  <items>
                     <text>en</text>
                  </items>
                  <margin leftInset="1mm" rightInset="1mm"/>
                  <para vAlign="middle"/>
                  <ui>
                     <checkButton shape="round" size="3.5278mm">
                        <border>
                           <fill>
                              <color value="255, 255, 255"/>
                           </fill>
                        </border>
                     </checkButton>
                  </ui>
                  <bind match="none"/>
                  <value>
                     <text xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">en</text>
                  </value>
               </field>
               <field h="6mm" name="chkFrancais" w="26.316mm" locale="fr_CA" relevant="-print">
                  <caption placement="right" reserve="19.81mm">
                     <font size="8pt" typeface="Myriad Pro"/>
                     <para vAlign="middle"/>
                     <value>
                        <text>Français</text>
                     </value>
                  </caption>
                  <font typeface="Myriad Pro"/>
                  <items>
                     <text>fr</text>
                  </items>
                  <margin leftInset="1mm" rightInset="1mm"/>
                  <para vAlign="middle"/>
                  <ui>
                     <checkButton shape="round" size="3.5278mm">
                        <border>
                           <fill>
                              <color value="255, 255, 255"/>
                           </fill>
                        </border>
                        <margin/>
                     </checkButton>
                  </ui>
                  <bind match="none"/>
               </field>
               <?templateDesigner itemValuesSpecified 1?>
               <event activity="change" name="event__change">
                  <script contentType="application/x-javascript">
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cMainHandler = script.HCeForm.control.FormHandler;

try
{
	// set up event object
	var actionName = cMainHandler.LANGUAGE_CHANGE;
	var anActionEvent = cActionEvent.createInstance(actionName, this, this.rawValue);
	
	// deploy event to controller
	cMainHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cLog.warn("Problem with pageLanguage::change", exception);
}
</script>
               </event>
               <validate scriptTest="warning"/>
               <margin leftInset="50.8mm"/>
               <?templateDesigner expand 0?></exclGroup>
            <bind match="none"/>
            <?templateDesigner expand 0?></subform>
         <subform y="15.42mm" w="202.184mm" layout="lr-tb" name="sfPreInstruct">
            <subform w="203.2mm" layout="lr-tb" name="sfPreInstruct1">
               <draw name="lblMandatory" w="202.184mm" h="6.35mm" colSpan="2">
                  <ui>
                     <textEdit/>
                  </ui>
                  <value>
                     <text>Asterisk (*) denotes a mandatory field.</text>
                  </value>
                  <font typeface="Myriad Pro" size="8pt"/>
                  <margin bottomInset="0.5mm" leftInset="0.5mm" rightInset="0.5mm" topInset="0.5mm"/>
                  <para vAlign="middle"/>
                  <assist>
                     <speak disable="1"/>
                  </assist>
                  <?renderCache.bounds 570286 15166 0 0 1417 1417 0 0?>
                  <?renderCache.textRun 39 Asterisk (*) denotes a mandatory field. 0 1417 11000 0 0 0 "Myriad Pro" 0 0 8000 ISO-8859-1?></draw>
               <assist role="LI"/>
               <bind match="none"/>
               <?templateDesigner expand 0?></subform>
            <subform y="6.35mm" w="202.184mm" layout="lr-tb" name="sfPreInstruct2">
               <draw name="lblValidation" w="202.184mm" h="6.35mm">
                  <ui>
                     <textEdit/>
                  </ui>
                  <value>
                     <text>Plus (+) denotes a validation error or missing data.</text>
                  </value>
                  <font size="8pt" typeface="Myriad Pro"/>
                  <margin topInset="0.5mm" bottomInset="0.5mm" leftInset="0.5mm" rightInset="0.5mm"/>
                  <para vAlign="middle"/>
                  <?renderCache.bounds 570286 15166 0 0 1417 1417 0 0?>
                  <?renderCache.textRun 52 Plus (+) denotes a validation error or missing data. 0 1417 11000 0 0 0 "Myriad Pro" 0 0 8000 ISO-8859-1?></draw>
               <assist role="LI"/>
               <bind match="none"/>
               <?templateDesigner expand 1?></subform>
            <assist role="UL"/>
            <margin bottomInset="2.54mm"/>
            <bind match="none"/>
            <field name="Button2" w="28.575mm" h="6mm">
               <ui>
                  <button highlight="inverted"/>
               </ui>
               <font typeface="Myriad Pro"/>
               <caption>
                  <value>
                     <text>validate</text>
                  </value>
                  <para vAlign="middle" hAlign="center"/>
               </caption>
               <border hand="right">
                  <edge stroke="raised"/>
                  <fill>
                     <color value="212,208,200"/>
                  </fill>
               </border>
               <bind match="none"/>
               <event activity="click" name="event__click">
                  <script contentType="application/x-javascript">
var cLog = 					script.core.util.Log;
var cFormNodeManager = 		script.core.model.FormNodeManager;
var cFailureReporter=		script.core.validation.FailureReporter;
var cResourceManager = 		script.core.lang.ResourceManager;
//var validationFailures=baseNode.validateNode(null,true);

//var tt=cFormNodeManager.getFormNodeForKey("sfPart3");
//var instances=tt.getNodeInstances();
//var validationFailures=tt.validateNode(instances[0],true);
//cLog.trace(cFailureReporter.getFailureDetails(validationFailures));
//var validationFailures=tt.validateNode(instances[1],true);
//(aNodeInstance, updateDisplay, aValidationFailure
//cLog.trace(cFailureReporter.getFailureDetails(validationFailures));
cLog.trace(cResourceManager.get("error_sponsorSiteAddress"));
</script>
               </event>
            </field>
            <field name="Button1" w="28.575mm" h="6mm">
               <ui>
                  <button highlight="inverted"/>
               </ui>
               <font typeface="Myriad Pro"/>
               <caption>
                  <value>
                     <text>create error</text>
                  </value>
                  <para vAlign="middle" hAlign="center"/>
               </caption>
               <border hand="right">
                  <edge stroke="raised"/>
                  <fill>
                     <color value="212,208,200"/>
                  </fill>
               </border>
               <bind match="none"/>
               <event activity="click" name="event__click">
                  <script contentType="application/x-javascript">

asdasds.asdasda=asd...asdas
</script>
               </event>
            </field>
            <?templateDesigner expand 0?></subform>
         <subform w="202.184mm" name="sfInstructions" layout="lr-tb">
            <field name="btnViewInstructions" w="31.75mm" h="6.35mm" relevant="-print">
               <ui>
                  <button highlight="inverted"/>
               </ui>
               <font typeface="Myriad Pro"/>
               <caption>
                  <value>
                     <text>Show Instructions</text>
                  </value>
                  <para vAlign="middle" hAlign="center" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt"/>
                  <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
               </caption>
               <border hand="right">
                  <?templateDesigner StyleID apbx2?>
                  <edge stroke="raised"/>
                  <fill>
                     <color value="212,208,200"/>
                  </fill>
               </border>
               <bind match="none"/>
               <event activity="click" name="event__click">
                  <script contentType="application/x-javascript">
var cFormHandler=	script.HCeForm.control.FormHandler;
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
try
{
		// set up event object
		var actionName = cFormHandler.SHOW_INSTRUCTIONS;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cFormHandler.actionPerformed(anActionEvent);
	
}
catch(exception)
{
	cLog.warn("Problem with show instructions ::click", exception);
}
</script>
               </event>
            </field>
            <draw name="Text6" w="4.576mm" h="6.35mm">
               <ui>
                  <textEdit/>
               </ui>
               <font typeface="Myriad Pro"/>
               <margin topInset="0.5mm" bottomInset="0.5mm" leftInset="0.5mm" rightInset="0.5mm"/>
               <?renderCache.bounds 10137 15166 0 0 1417 1417 0 0?></draw>
            <field name="btnHideInstructions" w="31.75mm" h="6.35mm" relevant="-print">
               <ui>
                  <button highlight="inverted"/>
               </ui>
               <font typeface="Myriad Pro"/>
               <caption>
                  <value>
                     <text>Hide Instructions</text>
                  </value>
                  <para vAlign="middle" hAlign="center" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt"/>
                  <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
               </caption>
               <border hand="right">
                  <?templateDesigner StyleID apbx2?>
                  <edge stroke="raised"/>
                  <fill>
                     <color value="212,208,200"/>
                  </fill>
               </border>
               <bind match="none"/>
               <event activity="click" name="event__click">
                  <script contentType="application/x-javascript">var cFormHandler=	script.HCeForm.control.FormHandler;
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
try
{
		// set up event object
		var actionName =  cFormHandler.HIDE_INSTRUCTIONS;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cFormHandler.actionPerformed(anActionEvent);
	
}
catch(exception)
{
	cLog.warn("Problem with hide instructions ::click", exception);
}

</script>
               </event>
            </field>
            <border>
               <edge presence="hidden"/>
               <corner presence="hidden" thickness="0.175mm"/>
            </border>
            <margin bottomInset="5.08mm"/>
            <bind match="none"/>
            <?templateDesigner expand 0?></subform>
         <subform w="202.184mm" layout="lr-tb" name="sfInstructionsContent">
            <draw name="lblInstructionsHead" w="202.184mm" h="6.249mm">
               <ui>
                  <textEdit/>
               </ui>
               <value>
                  <text>INSTRUCTIONS</text>
               </value>
               <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
               <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
               <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
               <border>
                  <edge/>
                  <corner thickness="0.175mm"/>
                  <fill>
                     <linear>
                        <color value="255,255,255"/>
                     </linear>
                     <color value="255,255,153"/>
                  </fill>
                  <edge presence="hidden"/>
                  <edge/>
                  <edge presence="hidden"/>
                  <corner thickness="0.175mm" presence="hidden"/>
                  <corner thickness="0.175mm"/>
                  <corner thickness="0.175mm" presence="hidden"/>
               </border>
               <assist role="H2"/>
               <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
               <?renderCache.textRun 12 INSTRUCTIONS 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
            <subform y="6.249mm" w="203.199mm" minH="59.561mm" layout="lr-tb" name="sfInstructList">
               <subform w="203.199mm" name="sfInstruct1" layout="tb">
                  <draw name="lblInstruct1" w="7.999958in" minH="5.116mm">
                     <ui>
                        <textEdit/>
                     </ui>
                     <value>
                        <text>This form contains mandatory fields. In order to ensure you have completed all appropriate fields, please press the \"Finalize\" button at the bottom of the form before printing and signing. </text>
                     </value>
                     <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                     <margin topInset="0.5002mm" bottomInset="0.5002mm" leftInset="0.5mm" rightInset="0.5mm"/>
                     <para spaceAbove="0.5pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                     <border>
                        <edge presence="hidden"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                     </border>
                  </draw>
                  <margin bottomInset="2.54mm" topInset="2.54mm"/>
                  <assist role="LI"/>
                  <bind match="none"/>
                  <?templateDesigner expand 1?></subform>
               <subform w="203.199mm" name="sfInstruct2" layout="tb">
                  <draw name="lblInstruct2" w="7.999958in" minH="8.931mm">
                     <ui>
                        <textEdit/>
                     </ui>
                     <value>
                        <text>Once finalized, the fields in the form becomes "locked" (i.e. Fields cannot be modified). In order to modify fields after finalizing, you must press the "Modify" button at the bottom of the form. Following modifications to the desired fields and before printing and signing, please press the "Finalize" button again to re-validate entries.   Alternatively:</text>
                     </value>
                     <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                     <margin topInset="0.5002mm" bottomInset="0.5002mm" leftInset="0.5mm" rightInset="0.5mm"/>
                     <para spaceAbove="0.5pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                     <border>
                        <edge presence="hidden"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                     </border>
                  </draw>
                  <margin topInset="0mm" bottomInset="2.54mm"/>
                  <assist role="LI"/>
                  <bind match="none"/>
                  <?templateDesigner expand 1?></subform>
               <subform w="203.199mm" name="sfInstruct3" layout="tb">
                  <draw name="lblInstruct3" w="202.184mm" h="4.366mm">
                     <ui>
                        <textEdit/>
                     </ui>
                     <value>
                        <text>-Save, print, sign and date the completed form;</text>
                     </value>
                     <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                     <margin topInset="0.5002mm" bottomInset="0.5002mm" leftInset="0.5mm" rightInset="0.5mm"/>
                     <para spaceAbove="0.5pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                     <border>
                        <edge presence="hidden"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                     </border>
                     <?renderCache.bounds 570286 9540 0 0 1417 1418 0 0?>
                     <?renderCache.textRun 47 -Save, print, sign and date the completed form; 0 1417 8438 0 0 0 "Myriad Pro" 0 0 8000 ISO-8859-1?></draw>
                  <margin topInset="0mm" bottomInset="0mm"/>
                  <assist role="LI"/>
                  <bind match="none"/>
                  <?templateDesigner expand 1?></subform>
               <subform w="203.199mm" name="sfInstruct4" layout="tb">
                  <draw name="lblInstruct4" w="202.184mm" h="4.367mm">
                     <ui>
                        <textEdit/>
                     </ui>
                     <value>
                        <text>-Scan the signed form, and</text>
                     </value>
                     <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                     <margin topInset="0.5002mm" bottomInset="0.5002mm" leftInset="0.5mm" rightInset="0.5mm"/>
                     <para spaceAbove="0.5pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                     <border>
                        <edge presence="hidden"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                     </border>
                     <?renderCache.bounds 570286 9543 0 0 1417 1418 0 0?>
                     <?renderCache.textRun 26 -Scan the signed form, and 0 1417 8439 0 0 0 "Myriad Pro" 0 0 8000 ISO-8859-1?></draw>
                  <margin topInset="0mm" bottomInset="0mm"/>
                  <assist role="LI"/>
                  <bind match="none"/>
                  <?templateDesigner expand 1?></subform>
               <subform w="203.199mm" name="sfInstruct5" layout="tb">
                  <draw name="lblInstruct5" w="202.184mm" h="4.366mm">
                     <ui>
                        <textEdit/>
                     </ui>
                     <value>
                        <text>-Send to Health Canada in electronic format.</text>
                     </value>
                     <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                     <margin topInset="0.5002mm" bottomInset="0.5002mm" leftInset="0.5mm" rightInset="0.5mm"/>
                     <para spaceAbove="0.5pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                     <border>
                        <edge presence="hidden"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                     </border>
                     <?renderCache.bounds 570286 9540 0 0 1417 1418 0 0?>
                     <?renderCache.textRun 44 -Send to Health Canada in electronic format. 0 1417 8438 0 0 0 "Myriad Pro" 0 0 8000 ISO-8859-1?></draw>
                  <margin topInset="0mm" bottomInset="0mm"/>
                  <assist role="LI"/>
                  <bind match="none"/>
                  <?templateDesigner expand 1?></subform>
               <assist role="UL"/>
               <bind match="none"/>
               <?templateDesigner expand 0?></subform>
            <border>
               <edge presence="hidden"/>
               <corner thickness="0.175mm" presence="hidden"/>
            </border>
            <margin topInset="0mm" bottomInset="2.54mm"/>
            <bind match="none"/>
            <?templateDesigner expand 0?></subform>
         <subform w="202.184mm" name="sfCTSIContent" layout="tb">
            <subform w="202.184mm" name="sfPart1" layout="lr-tb">
               <subform w="202.184mm" name="sfPart1Heading" layout="tb">
                  <draw name="lblPart1" w="202.184mm" h="6.249mm">
                     <ui>
                        <textEdit/>
                     </ui>
                     <value>
                        <text>PART 1 -CLINICAL TRIAL PROTOCOL INFORMATION</text>
                     </value>
                     <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                     <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                     <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                     <border>
                        <edge/>
                        <corner thickness="0.175mm"/>
                        <edge presence="hidden"/>
                        <edge/>
                        <edge presence="hidden"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                        <corner thickness="0.175mm"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                     </border>
                     <assist role="H2"/>
                     <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                     <?renderCache.textRun 43 PART 1 -CLINICAL TRIAL PROTOCOL INFORMATION 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                  <?templateDesigner expand 0?>
                  <margin topInset="0.762mm" bottomInset="0.762mm"/>
               </subform>
               <subform y="6.249mm" w="202.184mm" minH="6.249mm" layout="lr-tb" name="sfSubAction">
                  <exclGroup name="rdoTrialType" layout="lr-tb" w="201.676mm">
                     <?templateDesigner itemValuesSpecified 1?>
                     <field w="190.959mm" h="6mm" name="rdoNew">
                        <ui>
                           <checkButton shape="round">
                              <border>
                                 <edge stroke="lowered"/>
                                 <fill/>
                              </border>
                           </checkButton>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption placement="right" reserve="184.96mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>This is the first time these clinical trial sites are being submitted to Health Canada for this clinical trial protocol.</text>
                           </value>
                           <font typeface="Myriad Pro" size="8pt"/>
                        </caption>
                        <value>
                           <text>NEW</text>
                        </value>
                        <items>
                           <text>NEW</text>
                        </items>
                     </field>
                     <validate nullTest="error"/>
                     <field w="196.533mm" h="6mm" name="rdoAmend">
                        <ui>
                           <checkButton shape="round">
                              <border>
                                 <edge stroke="lowered"/>
                                 <fill/>
                              </border>
                           </checkButton>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption placement="right" reserve="190.533mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>The clinical trial sites are being amended for this clinical trial protocol.  A CTSI form has been previously submitted to Health Canada for this clinical trial protocol.</text>
                           </value>
                           <font typeface="Myriad Pro" size="8pt"/>
                        </caption>
                        <items>
                           <text>AMEND</text>
                        </items>
                     </field>
                     <event activity="change" name="event__change">
                        <script contentType="application/x-javascript">

var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.TrialsHandler;
var cSystem = script.core.System;
try
{
		// set up event object
		var actionName =  cHandler.SUBTYPE_CHANGE;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cLog.warn("Problem with sub type ::exit", exception);
}
</script>
                     </event>
                     <?templateDesigner expand 1?></exclGroup>
                  <subform w="201.676mm" name="sfActionHeading" layout="lr-tb">
                     <draw name="lblAction" w="200.66mm" h="6.249mm">
                        <ui>
                           <textEdit/>
                        </ui>
                        <value>
                           <text>CLINICAL TRIAL SUBMISSION ACTION REQUIREMENTS</text>
                        </value>
                        <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                        <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                        <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                        <border>
                           <edge presence="hidden"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <fill>
                              <linear>
                                 <color value="255,255,255"/>
                              </linear>
                              <color value="255,255,153"/>
                           </fill>
                        </border>
                        <assist role="H2"/>
                        <?renderCache.bounds 565966 16274 0 0 1417 720 0 0?>
                        <?renderCache.textRun 45 CLINICAL TRIAL SUBMISSION ACTION REQUIREMENTS 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                     <margin topInset="0.762mm" bottomInset="0.762mm"/>
                     <border>
                        <edge/>
                        <corner thickness="0.175mm"/>
                        <edge presence="hidden"/>
                        <edge/>
                        <edge presence="hidden"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                        <corner thickness="0.175mm"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                     </border>
                     <?templateDesigner expand 1?></subform>
                  <field name="ddlSubType" w="80.44mm" h="12.7mm">
                     <ui>
                        <choiceList>
                           <border>
                              <edge stroke="lowered"/>
                           </border>
                           <margin/>
                        </choiceList>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <caption reserve="3.81mm" placement="top">
                        <font size="8pt" typeface="Myriad Pro"/>
                        <para vAlign="middle"/>
                        <value>
                           <text>Type of  Submission for this Protocol or Trial:</text>
                        </value>
                     </caption>
                     <validate nullTest="error"/>
                  </field>
                  <border>
                     <edge presence="hidden"/>
                     <corner thickness="0.175mm" presence="hidden"/>
                  </border>
                  <margin leftInset="0.762mm" rightInset="0.762mm"/>
                  <?templateDesigner expand 1?></subform>
               <subform w="202.184mm" name="sfClinTrial" layout="lr-tb">
                  <subform name="sfTrialIdHeading" layout="lr-tb" w="202.184mm">
                     <draw name="lblTrialId" w="202.184mm" h="6.249mm">
                        <ui>
                           <textEdit/>
                        </ui>
                        <value>
                           <text>CLINICAL TRIAL IDENTIFICATION INFORMATION</text>
                        </value>
                        <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                        <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                        <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                        <border>
                           <edge/>
                           <corner thickness="0.175mm"/>
                           <fill>
                              <linear>
                                 <color value="255,255,255"/>
                              </linear>
                              <color value="255,255,153"/>
                           </fill>
                           <edge presence="hidden"/>
                           <edge/>
                           <edge presence="hidden"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <corner thickness="0.175mm"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                        </border>
                        <assist role="H2"/>
                        <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                        <?renderCache.textRun 41 CLINICAL TRIAL IDENTIFICATION INFORMATION 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                     <keep intact="contentArea"/>
                     <margin topInset="1.27mm" bottomInset="1.27mm" leftInset="0mm" rightInset="0mm"/>
                     <?templateDesigner expand 0?></subform>
                  <field name="txtProtocolTitle" w="202.463mm" minH="16.991mm">
                     <ui>
                        <textEdit multiLine="1">
                           <border>
                              <edge stroke="lowered"/>
                           </border>
                           <margin/>
                        </textEdit>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <caption reserve="3.81mm" placement="top">
                        <font size="8pt" typeface="Myriad Pro"/>
                        <para vAlign="middle"/>
                        <value>
                           <text>1. Clinical Trial Protocol Title</text>
                        </value>
                     </caption>
                     <validate nullTest="error"/>
                  </field>
                  <field name="txtProtocolNumber" w="54.436mm" h="15.24mm">
                     <ui>
                        <textEdit hScrollPolicy="off">
                           <border>
                              <edge stroke="lowered"/>
                           </border>
                           <margin/>
                        </textEdit>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <caption reserve="6.985mm" placement="top">
                        <font size="8pt" typeface="Myriad Pro"/>
                        <value>
                           <text>2. Clinical Trial Protocol Number</text>
                        </value>
                        <para vAlign="middle"/>
                     </caption>
                     <validate nullTest="error"/>
                  </field>
                  <field name="txtControlNumber" w="42.633mm" h="15.24mm">
                     <ui>
                        <textEdit>
                           <border>
                              <edge stroke="lowered"/>
                           </border>
                           <margin/>
                        </textEdit>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <caption reserve="6.984mm" placement="top">
                        <font size="8pt" typeface="Myriad Pro"/>
                        <para vAlign="middle"/>
                        <value>
                           <text>3.0 Clinical Trial Control Number, if assigned (6 digits)</text>
                        </value>
                     </caption>
                     <value>
                        <text maxChars="6"/>
                     </value>
                     <event activity="change" name="event__change">
                        <script contentType="application/x-javascript">
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler = script.HCeForm.control.FormHandler;
var cSystem = script.core.System;
try
{
		// set up event object
		var actionName =  cHandler.DIGIT_TEST;
		var anActionEvent = cActionEvent.createInstance(actionName, this,xfa.event);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cLog.warn("Control Number ::change", exception);
}
</script>
                     </event>
                  </field>
                  <subform x="97.069mm" y="25.78mm" w="29.591mm" name="sfAddControlNum" h="15.24mm">
                     <keep intact="none"/>
                     <field name="btnAddControlNum" w="28.575mm" h="8.23mm" relevant="-print" y="3.64mm">
                        <ui>
                           <button highlight="inverted"/>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <caption>
                           <value>
                              <text>Add Control Number</text>
                           </value>
                           <para vAlign="middle" hAlign="center"/>
                           <font typeface="Myriad Pro" size="8pt"/>
                        </caption>
                        <border hand="right">
                           <edge stroke="raised"/>
                           <fill>
                              <color value="212,208,200"/>
                           </fill>
                        </border>
                        <bind match="none"/>
                        <event activity="click" name="event__click">
                           <script contentType="application/x-javascript">

var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler = script.HCeForm.control.FormHandler;
var cSystem = script.core.System;
try
{
		// set up event object
		var actionName =  cHandler.ADD_CONTROLNUM;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cLog.warn("Control Number ADD ::click", exception);
}
</script>
                        </event>
                     </field>
                     <?templateDesigner expand 1?>
                     <margin leftInset="0.508mm" rightInset="0.508mm"/>
                  </subform>
                  <subform name="sfCTNList" w="202.618mm" layout="lr-tb">
                     <subform layout="lr-tb" name="sfControlNumber" w="62.989mm">
                        <field name="txtControlNumber" w="42.461mm" h="15.24mm">
                           <ui>
                              <textEdit>
                                 <border>
                                    <edge stroke="lowered"/>
                                 </border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <font typeface="Myriad Pro"/>
                           <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="0.7468mm"/>
                           <para vAlign="middle"/>
                           <caption reserve="6.985mm" placement="top">
                              <font size="8pt" typeface="Myriad Pro"/>
                              <para vAlign="middle"/>
                              <value>
                                 <text>3. 1 Clinical Trial Control Number (6 digits)</text>
                              </value>
                           </caption>
                           <validate nullTest="error"/>
                           <value>
                              <text maxChars="6"/>
                           </value>
                           <event activity="change" name="event__change">
                              <script contentType="application/x-javascript">
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler = script.HCeForm.control.FormHandler;
var cSystem = script.core.System;
try
{
		// set up event object
		var actionName =  cHandler.DIGIT_TEST;
		var anActionEvent = cActionEvent.createInstance(actionName, this,xfa.event);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cLog.warn("Control Number ::change", exception);
}
</script>
                           </event>
                        </field>
                        <occur min="0" max="-1"/>
                        <subform w="19.05mm" name="sfDeleteCT" h="15.032mm">
                           <field name="btnDeleteCT" h="10.8mm" relevant="-print" y="2.318mm" x="0.9mm" w="18.201mm">
                              <ui>
                                 <button highlight="inverted"/>
                              </ui>
                              <font typeface="Myriad Pro"/>
                              <caption>
                                 <value>
                                    <text>Delete Control Number</text>
                                 </value>
                                 <para vAlign="middle" hAlign="center"/>
                                 <font typeface="Myriad Pro" size="8pt"/>
                              </caption>
                              <border hand="right">
                                 <edge stroke="raised"/>
                                 <fill>
                                    <color value="212,208,200"/>
                                 </fill>
                              </border>
                              <bind match="none"/>
                           </field>
                           <?templateDesigner expand 1?></subform>
                        <keep intact="contentArea"/>
                        <border>
                           <edge stroke="dashed"/>
                           <corner stroke="dashed" thickness="0.175mm"/>
                        </border>
                        <?templateDesigner expand 1?></subform>
                     <?templateDesigner expand 1?></subform>
                  <occur min="0" initial="1"/>
                  <?templateDesigner expand 0?>
                  <field name="txtRegistryNumber" w="81.051mm" h="12.7mm">
                     <ui>
                        <textEdit hScrollPolicy="off">
                           <border>
                              <edge stroke="lowered"/>
                           </border>
                           <margin/>
                        </textEdit>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <caption reserve="3.384mm" placement="top">
                        <font size="8pt" typeface="Myriad Pro"/>
                        <para vAlign="middle"/>
                        <value>
                           <text>4. Health Canada's Central Registry (CR) File Number, if assigned</text>
                        </value>
                     </caption>
                     <validate nullTest="error"/>
                  </field>
                  <margin topInset="0.762mm" bottomInset="0.762mm"/>
               </subform>
               <?templateDesigner expand 0?></subform>
            <subform w="202.184mm" name="sfPart2" layout="tb">
               <subform name="sfPart2AHeading" layout="lr-tb" w="201.676mm">
                  <draw name="lblDrugSponsor" w="201.676mm" h="6.249mm">
                     <ui>
                        <textEdit/>
                     </ui>
                     <value>
                        <text>PART 2 - DRUG PRODUCT AND SPONSOR INFORMATION</text>
                     </value>
                     <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                     <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                     <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                     <border>
                        <edge/>
                        <corner thickness="0.175mm"/>
                        <edge presence="hidden"/>
                        <edge/>
                        <edge presence="hidden"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                        <corner thickness="0.175mm"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                     </border>
                     <assist role="H2"/>
                     <?renderCache.bounds 568846 16274 0 0 1417 720 0 0?>
                     <?renderCache.textRun 45 PART 2 - DRUG PRODUCT AND SPONSOR INFORMATION 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                  <keep intact="contentArea"/>
                  <margin topInset="0.762mm" bottomInset="0.762mm"/>
                  <?templateDesigner expand 1?></subform>
               <subform w="202.184mm" name="sfDrugProdHeading" layout="lr-tb">
                  <draw name="lblDrugProd" w="200.66mm" h="6.249mm">
                     <ui>
                        <textEdit/>
                     </ui>
                     <value>
                        <text>A) DRUG PRODUCT INFORMATION</text>
                     </value>
                     <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                     <margin topInset="0.5002mm" bottomInset="0.5002mm" leftInset="0.5mm" rightInset="0.5mm"/>
                     <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                     <border>
                        <edge/>
                        <corner thickness="0.175mm"/>
                        <fill>
                           <linear>
                              <color value="255,255,255"/>
                           </linear>
                           <color value="255,255,153"/>
                        </fill>
                        <edge presence="hidden"/>
                        <edge/>
                        <edge presence="hidden"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                        <corner thickness="0.175mm"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                     </border>
                     <assist role="H2"/>
                     <?renderCache.bounds 565966 14878 0 0 1417 1418 0 0?>
                     <?renderCache.textRun 27 A) DRUG PRODUCT INFORMATION 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                  <keep intact="contentArea"/>
                  <margin topInset="0.762mm" bottomInset="0.762mm" leftInset="0.762mm" rightInset="0.762mm"/>
                  <?templateDesigner expand 0?></subform>
               <field name="txtDrugBrandName" w="201.676mm" h="12.7mm">
                  <ui>
                     <textEdit hScrollPolicy="off">
                        <border>
                           <edge stroke="lowered"/>
                        </border>
                        <margin/>
                     </textEdit>
                  </ui>
                  <font typeface="Myriad Pro"/>
                  <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                  <para vAlign="middle"/>
                  <caption reserve="3.81mm" placement="top">
                     <font size="8pt" typeface="Myriad Pro"/>
                     <para vAlign="middle"/>
                     <value>
                        <text>Brand Name</text>
                     </value>
                  </caption>
                  <validate nullTest="error"/>
               </field>
               <field name="txtDrugCommonName" w="201.676mm" h="12.7mm">
                  <ui>
                     <textEdit hScrollPolicy="off">
                        <border>
                           <edge stroke="lowered"/>
                        </border>
                        <margin/>
                     </textEdit>
                  </ui>
                  <font typeface="Myriad Pro"/>
                  <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                  <para vAlign="middle"/>
                  <caption reserve="3.4624mm" placement="top">
                     <font size="8pt" typeface="Myriad Pro"/>
                     <para vAlign="middle"/>
                     <value>
                        <text>6. Proper, Common, or Non-Proprietary Name</text>
                     </value>
                  </caption>
                  <validate nullTest="error"/>
               </field>
               <border>
                  <edge presence="hidden"/>
                  <corner thickness="0.175mm" presence="hidden"/>
               </border>
               <subform y="42.978mm" w="203.199mm" minH="6.249mm" layout="lr-tb" name="sfSponsorInfo">
                  <subform w="202.184mm" name="sfSponsorInfoHeading" layout="lr-tb">
                     <draw name="lblSponsorInfo" w="201.676mm" h="6.249mm">
                        <ui>
                           <textEdit/>
                        </ui>
                        <value>
                           <text>B) SPONSOR INFORMATION</text>
                        </value>
                        <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                        <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                        <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                        <border>
                           <edge/>
                           <corner thickness="0.175mm"/>
                           <fill>
                              <linear>
                                 <color value="255,255,255"/>
                              </linear>
                              <color value="255,255,153"/>
                           </fill>
                           <edge presence="hidden"/>
                           <edge/>
                           <edge presence="hidden"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <corner thickness="0.175mm"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                        </border>
                        <assist role="H2"/>
                        <?renderCache.bounds 568846 16274 0 0 1417 720 0 0?>
                        <?renderCache.textRun 22 B) SPONSOR INFORMATION 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                     <margin leftInset="0mm" rightInset="0mm" topInset="0.762mm" bottomInset="0.762mm"/>
                     <?templateDesigner expand 1?></subform>
                  <subform y="6.249mm" w="202.184mm" minH="49.53mm" layout="lr-tb" name="sfSponsorAddress">
                     <field name="txtSponsorName" w="201.676mm" h="11.43mm">
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.4624mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>7. Name of Sponsor</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                     </field>
                     <field name="txtSponsorStreetAddress" w="201.676mm" h="11.43mm">
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.4624mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>8. Street, Suite and PO Box</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                     </field>
                     <field name="txtSponsorCity" w="58.739mm" h="11.43mm">
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.4624mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>9. City or Town</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="ddlCountry" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Country*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <items/>
                        <items presence="hidden" save="1"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                        <event activity="exit" name="event__exit">
                           <script contentType="application/x-javascript">var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cAddressHandler = script.HCeForm.control.Part2Handler;
var cSystem = script.core.System;
try
{
	if(cSystem.hasCurrentFieldValueChanged(this)){
		// set up event object
		var actionName =  cAddressHandler.SPONSOR_COUNTRY_CHANGED;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cAddressHandler.actionPerformed(anActionEvent);
	}
}
catch(exception)
{
	cLog.warn("Problem with sponsor country ::exit", exception);
}
</script>
                        </event>
                        <event activity="enter" name="event__enter">
                           <script contentType="application/x-javascript">
var cSystem = script.core.System;

cSystem.setCurrentField(this);
</script>
                        </event>
                     </field>
                     <field h="11.43mm" name="ddlProvince" w="46.49mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Province  or State*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtProvince" w="46.829mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.3431mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>Province or State</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro" size="8pt"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtPostalCode" w="37.68mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Postal/ZIP Code*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <margin bottomInset="0.762mm"/>
                     <?templateDesigner expand 1?></subform>
                  <subform y="54.255mm" w="202.184mm" layout="lr-tb" name="sfSponsorContact">
                     <subform w="202.184mm" name="sfSponsorContactHeading" layout="lr-tb">
                        <draw name="lblSponsor" w="200.66mm" h="6.249mm">
                           <ui>
                              <textEdit/>
                           </ui>
                           <value>
                              <text>CONTACT PERSON FOR SPONSOR</text>
                           </value>
                           <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                           <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                           <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                           <border>
                              <edge/>
                              <corner thickness="0.175mm"/>
                              <fill>
                                 <linear>
                                    <color value="255,255,255"/>
                                 </linear>
                                 <color value="255,255,153"/>
                              </fill>
                              <edge presence="hidden"/>
                              <edge/>
                              <edge presence="hidden"/>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <corner thickness="0.175mm"/>
                              <corner thickness="0.175mm" presence="hidden"/>
                           </border>
                           <assist role="H2"/>
                           <?renderCache.bounds 565966 16274 0 0 1417 720 0 0?>
                           <?renderCache.textRun 26 CONTACT PERSON FOR SPONSOR 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                        <margin leftInset="0mm" rightInset="0mm" topInset="0.762mm" bottomInset="0.762mm"/>
                        <keep intact="contentArea"/>
                        <?templateDesigner expand 1?></subform>
                     <subform layout="lr-tb" name="sfSponsorContactDetails" w="202.184mm">
                        <keep intact="contentArea"/>
                        <field h="11.43mm" name="ddlSponsorSalutation" w="25.4mm">
                           <border>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" size="8pt"/>
                              <para vAlign="middle"/>
                              <value>
                                 <text>Salutation*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <choiceList>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </choiceList>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtSponsorGivenName" w="35.385mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Given Name*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtSponsorInitials" w="13.97mm">
                           <border>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" size="8pt"/>
                              <para vAlign="middle"/>
                              <value>
                                 <text>Initials</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <field h="11.43mm" name="txtSponsorSurname" w="54.092mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.44mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Surname*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtSponsorTelephone" w="38.1mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>14. Telephone No.*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtSponsorExtension" w="25.932mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Ext.</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <field h="11.43mm" name="txtSponsorFax" w="38.1mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>15. Fax No.</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <field h="11.43mm" name="ddlSponsorLangPref" w="35.56mm">
                           <border>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" size="8pt"/>
                              <para vAlign="middle"/>
                              <value>
                                 <text>16. Language*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <items save="1"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <choiceList>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </choiceList>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtSponsorTitle" w="55.189mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Position Title*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtSponsorEmail" w="72.773mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>18. Email</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <margin bottomInset="0.762mm"/>
                        <?templateDesigner expand 1?></subform>
                     <keep intact="contentArea"/>
                     <?templateDesigner expand 0?></subform>
                  <subform w="203.199mm" name="sfContactHeading" layout="lr-tb">
                     <draw name="lblContactHeading" w="202.184mm" h="6.249mm">
                        <ui>
                           <textEdit/>
                        </ui>
                        <value>
                           <text>C) CONTACT INFORMATION</text>
                        </value>
                        <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                        <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                        <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                        <border>
                           <edge/>
                           <corner thickness="0.175mm"/>
                           <fill>
                              <linear>
                                 <color value="255,255,255"/>
                              </linear>
                              <color value="255,255,153"/>
                           </fill>
                           <edge presence="hidden"/>
                           <edge/>
                           <edge presence="hidden"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <corner thickness="0.175mm"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                        </border>
                        <assist role="H2"/>
                        <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                        <?renderCache.textRun 22 C) CONTACT INFORMATION 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                     <margin topInset="0.762mm" bottomInset="0.762mm"/>
                     <?templateDesigner expand 1?></subform>
                  <field name="chkSponsorAddrSame" w="197.109mm" h="8.815mm">
                     <ui>
                        <checkButton>
                           <border>
                              <edge stroke="lowered"/>
                              <fill/>
                           </border>
                        </checkButton>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <value>
                        <integer>0</integer>
                     </value>
                     <caption placement="right" reserve="190.109mm">
                        <para vAlign="middle"/>
                        <font size="8pt" typeface="Myriad Pro"/>
                        <value>
                           <text>The contact for the clinical trial is the same as the Sponsor.</text>
                        </value>
                     </caption>
                     <items>
                        <integer>1</integer>
                        <integer>0</integer>
                        <integer>2</integer>
                     </items>
                     <event activity="change" name="event__change">
                        <script contentType="application/x-javascript">
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.Part2Handler;
var cSystem = script.core.System;
try
{
	
		// set up event object
		var actionName =  cHandler.CONTACTSAMEAS_CHANGE;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);

}
catch(exception)
{
	cLog.warn("Problem with contact clin trial Same As address ::change", exception);
}
</script>
                     </event>
                  </field>
                  <?templateDesigner expand 1?></subform>
               <subform w="203.119mm" name="sfTrialContact" layout="lr-tb">
                  <occur min="0"/>
                  <subform w="203.037mm" minH="49.53mm" layout="lr-tb" name="sfTrialContactAddress">
                     <field name="txtCompany" w="201.676mm" h="11.43mm">
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.175mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>21. Company or Organization Name</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                     </field>
                     <field name="txtStreetAddress" w="201.676mm" h="11.43mm">
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.18mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>22. Street, Suite and PO Box</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                     </field>
                     <field name="txtCity" w="50.8mm" h="11.43mm">
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.175mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>23. City or Town</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="ddlCountry" w="45.72mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>24. Country*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <items/>
                        <items presence="hidden" save="1"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                        <event activity="exit" name="event__exit">
                           <script contentType="application/x-javascript">var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cAddressHandler = script.HCeForm.control.Part2Handler;
var cSystem = script.core.System;
try
{
	if(cSystem.hasCurrentFieldValueChanged(this)){
		// set up event object
		var actionName =  cAddressHandler.CONTACT_COUNTRY_CHANGED;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cAddressHandler.actionPerformed(anActionEvent);
	}
}
catch(exception)
{
	cLog.warn("Problem with contact country ::exit", exception);
}
</script>
                        </event>
                        <event activity="enter" name="event__enter">
                           <script contentType="application/x-javascript">
var cSystem = script.core.System;

cSystem.setCurrentField(this);
</script>
                        </event>
                     </field>
                     <field h="11.43mm" name="ddlProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>25. Province - State*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>25. Province/State</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro" size="8pt"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtPostalCode" w="37.725mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>26. Postal/ZIP Code*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <?templateDesigner expand 1?></subform>
                  <subform layout="lr-tb" name="sfTrialContactDetails" w="202.184mm">
                     <keep intact="contentArea"/>
                     <field h="11.43mm" name="ddlTrialContactSalutation" w="25.4mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" size="8pt"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>27. Salutation*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtTrialContactGivenName" w="35.385mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Given Name*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtTrialContactInitials" w="13.97mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" size="8pt"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>Initials</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtTrialContactSurname" w="54.092mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Surname*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtTrialContactTitle" w="73.292mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>17.  Position Title*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="ddlTrialContactLangPref" w="35.56mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" size="8pt"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>16. Language*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <items save="1"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtTrialContactTelephone" w="38.1mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>14. Telephone No.*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtTrialContactExtension" w="25.932mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Ext.</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtTrialContactFax" w="38.1mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>15. Fax No.</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtTrialContactEmail" w="64.347mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>18. Email</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <?templateDesigner expand 0?>
                     <margin bottomInset="0.762mm"/>
                  </subform>
                  <margin bottomInset="0.762mm"/>
                  <?templateDesigner expand 1?></subform>
               <?templateDesigner expand 1?></subform>
            <subform w="202.184mm" name="sfPart3" layout="lr-tb">
               <subform w="200.659mm" name="sfSiteInfo">
                  <keep intact="none"/>
                  <field name="txtChangeNum" w="40.643mm" h="6.35mm">
                     <ui>
                        <textEdit>
                           <border>
                              <edge presence="hidden"/>
                              <edge presence="hidden"/>
                              <edge/>
                              <edge presence="hidden"/>
                           </border>
                           <margin/>
                        </textEdit>
                     </ui>
                     <font size="8pt" typeface="Myriad Pro" weight="bold">
                        <fill>
                           <color value="255,255,255"/>
                        </fill>
                     </font>
                     <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1.0008mm"/>
                     <para vAlign="middle" marginLeft="3.6pt"/>
                     <caption reserve="26.672mm">
                        <para vAlign="middle"/>
                        <value>
                           <text>CLINCAL TRIAL SITE </text>
                        </value>
                     </caption>
                     <border>
                        <edge presence="hidden"/>
                     </border>
                  </field>
                  <field name="btnDeleteSite" w="41.904mm" h="5.08mm" relevant="-print" x="157.716mm" y="0.78mm">
                     <ui>
                        <button highlight="inverted"/>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <caption>
                        <value>
                           <text>Delete Clinical Trial Site </text>
                        </value>
                        <para vAlign="middle" hAlign="center"/>
                        <font size="8pt" typeface="Myriad Pro"/>
                     </caption>
                     <border hand="right">
                        <edge stroke="raised"/>
                        <fill>
                           <color value="212,208,200"/>
                        </fill>
                     </border>
                     <bind match="none"/>
                     <event activity="click" name="event__click">
                        <script contentType="application/x-javascript">

var cHandler=	script.HCeForm.control.TrialsHandler
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
try
{
		// set up event object
		var actionName = cHandler.DELETE_SITE_ACTION;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
	
}
catch(exception)
{
	cLog.warn("Problem with Delete site::click", exception);
}
</script>
                     </event>
                  </field>
                  <border>
                     <edge presence="hidden"/>
                     <fill>
                        <color value="0,0,0"/>
                     </fill>
                  </border>
                  <?templateDesigner expand 0?></subform>
               <subform w="200.66mm" name="sfClinTrialHeading" layout="lr-tb">
                  <draw name="lblClinTrialHeading" w="201.676mm" h="6.249mm">
                     <ui>
                        <textEdit/>
                     </ui>
                     <value>
                        <text>PART 3 - CLINICAL TRIAL SITE INFORMATION</text>
                     </value>
                     <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                     <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                     <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                     <border>
                        <edge/>
                        <corner thickness="0.175mm"/>
                        <edge presence="hidden"/>
                        <edge/>
                        <edge presence="hidden"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                        <corner thickness="0.175mm"/>
                        <corner thickness="0.175mm" presence="hidden"/>
                     </border>
                     <assist role="H2"/>
                     <?renderCache.bounds 568846 16274 0 0 1417 720 0 0?>
                     <?renderCache.textRun 40 PART 3 - CLINICAL TRIAL SITE INFORMATION 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                  <keep intact="contentArea"/>
                  <margin topInset="1.27mm" bottomInset="1.27mm"/>
                  <?templateDesigner expand 0?></subform>
               <field name="ddlChangeType" w="66.192mm" h="11.43mm">
                  <ui>
                     <choiceList>
                        <border>
                           <edge stroke="lowered"/>
                        </border>
                        <margin/>
                     </choiceList>
                  </ui>
                  <font typeface="Myriad Pro"/>
                  <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                  <para vAlign="middle"/>
                  <caption reserve="3.175mm" placement="top">
                     <font size="8pt" typeface="Myriad Pro"/>
                     <para vAlign="middle"/>
                     <value>
                        <text>Type of  Amendment</text>
                     </value>
                  </caption>
                  <validate nullTest="error"/>
                  <event activity="exit" name="event__exit">
                     <script contentType="application/x-javascript">
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.Part3.SubTypeHandler;
var cSystem = script.core.System;
try
{
		// set up event object
		var actionName =  cHandler.AMEND_TYPE_CHANGE;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cLog.warn("Problem with amend type ::exit", exception);
}
</script>
                  </event>
               </field>
               <subform w="200.451mm" name="sfChangeReason" layout="lr-tb">
                  <draw name="lblChangeReason" w="200.659mm" h="6.35mm">
                     <ui>
                        <textEdit/>
                     </ui>
                     <value>
                        <text>Reasons for the change. Please select one or more of the following reasons as appropriate</text>
                     </value>
                     <font typeface="Myriad Pro" size="8pt"/>
                     <margin topInset="0.5mm" bottomInset="0.5mm" leftInset="0.5mm" rightInset="0.5mm"/>
                     <para vAlign="middle"/>
                     <?renderCache.bounds 565963 15166 0 0 1417 1417 0 0?>
                     <?renderCache.textRun 89 Reasons for the change. Please select one or more of the following reasons as appropriate 0 1417 11000 0 0 0 "Myriad Pro" 0 0 8000 ISO-8859-1?></draw>
                  <field name="chkDateChange" w="128.834mm" h="6mm">
                     <ui>
                        <checkButton>
                           <border>
                              <edge stroke="lowered"/>
                              <fill/>
                           </border>
                        </checkButton>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <value>
                        <text>0</text>
                     </value>
                     <caption placement="right" reserve="121.834mm">
                        <para vAlign="middle"/>
                        <font size="8pt" typeface="Myriad Pro"/>
                        <value>
                           <text>Dates: Change in Commencement Date and  Research Ethics Board (REB) Date of Approval</text>
                        </value>
                     </caption>
                     <items>
                        <text>1</text>
                        <text>0</text>
                     </items>
                     <event activity="change" name="event__change">
                        <script contentType="application/x-javascript">

var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.Part3.SubTypeHandler;
var cSystem = script.core.System;
try
{
		// set up event object
		var actionName =  cHandler.DATE_CHANGE;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cLog.warn("Problem with change date ::change", exception);
}
</script>
                     </event>
                  </field>
                  <field name="chkSiteNameChange" w="92.159mm" h="6mm">
                     <ui>
                        <checkButton>
                           <border>
                              <edge stroke="lowered"/>
                              <fill/>
                           </border>
                        </checkButton>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <value>
                        <integer>0</integer>
                     </value>
                     <caption placement="right" reserve="85.159mm">
                        <para vAlign="middle"/>
                        <font size="8pt" typeface="Myriad Pro"/>
                        <value>
                           <text>Part 3A: Change in Clinical Trial Site Name</text>
                        </value>
                     </caption>
                     <items>
                        <integer>1</integer>
                        <integer>0</integer>
                        <integer>2</integer>
                     </items>
                     <event activity="change" name="event__change">
                        <script contentType="application/x-javascript">
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.Part3.SubTypeHandler;
var cSystem = script.core.System;
try
{
		// set up event object
		var actionName =  cHandler.SITE_NAME_CHANGE;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cLog.warn("Problem with change site name ::change", exception);
}
</script>
                     </event>
                  </field>
                  <field name="chkSiteAddressChange" w="92.807mm" h="6mm">
                     <ui>
                        <checkButton>
                           <border>
                              <edge stroke="lowered"/>
                              <fill/>
                           </border>
                        </checkButton>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <value>
                        <text>0</text>
                     </value>
                     <caption placement="right" reserve="85.806mm">
                        <para vAlign="middle"/>
                        <font size="8pt" typeface="Myriad Pro"/>
                        <value>
                           <text>Part 3A: Change in Clinical Trial Site Address</text>
                        </value>
                     </caption>
                     <items>
                        <text>1</text>
                        <text>0</text>
                     </items>
                     <event activity="change" name="event__change">
                        <script contentType="application/x-javascript">
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.Part3.SubTypeHandler;
var cSystem = script.core.System;
try
{
	
		// set up event object
		var actionName =  cHandler.SITE_ADDRESS_CHANGE;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);

}
catch(exception)
{
	cLog.warn("Problem with change site address ::change", exception);
}
</script>
                     </event>
                  </field>
                  <field name="chkQINameChange" w="92.381mm" h="6mm">
                     <ui>
                        <checkButton>
                           <border>
                              <edge stroke="lowered"/>
                              <fill/>
                           </border>
                        </checkButton>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <value>
                        <integer>0</integer>
                     </value>
                     <caption placement="right" reserve="85.38mm">
                        <para vAlign="middle"/>
                        <font size="8pt" typeface="Myriad Pro"/>
                        <value>
                           <text>Part 3B: Change in Qualified Investigator (QI) Name</text>
                        </value>
                     </caption>
                     <items>
                        <integer>1</integer>
                        <integer>0</integer>
                        <integer>2</integer>
                     </items>
                     <event activity="change" name="event__change">
                        <script contentType="application/x-javascript">
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.Part3.SubTypeHandler;
var cSystem = script.core.System;
try
{
	
		// set up event object
		var actionName =  cHandler.QI_NAME_CHANGE;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);

}
catch(exception)
{
	cLog.warn("Problem with change QI Name ::change", exception);
}
</script>
                     </event>
                  </field>
                  <field name="chkQIAddressChange" w="78.275mm" h="6mm">
                     <ui>
                        <checkButton>
                           <border>
                              <edge stroke="lowered"/>
                              <fill/>
                           </border>
                        </checkButton>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <value>
                        <integer>0</integer>
                     </value>
                     <caption placement="right" reserve="71.274mm">
                        <para vAlign="middle"/>
                        <font size="8pt" typeface="Myriad Pro"/>
                        <value>
                           <text>Part 3B: Change in Qualified Investigator (QI) Address</text>
                        </value>
                     </caption>
                     <items>
                        <integer>1</integer>
                        <integer>0</integer>
                        <integer>2</integer>
                     </items>
                     <event activity="change" name="event__change">
                        <script contentType="application/x-javascript">
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.Part3.SubTypeHandler;
var cSystem = script.core.System;
try
{
	
		// set up event object
		var actionName =  cHandler.QI_ADDRESS_CHANGE;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);

}
catch(exception)
{
	cLog.warn("Problem with change QI address ::change", exception);
}
</script>
                     </event>
                  </field>
                  <field name="chkREBPersonChange" w="92.38mm" h="6mm">
                     <ui>
                        <checkButton>
                           <border>
                              <edge stroke="lowered"/>
                              <fill/>
                           </border>
                        </checkButton>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <value>
                        <integer>0</integer>
                     </value>
                     <caption placement="right" reserve="85.379mm">
                        <para vAlign="middle"/>
                        <font size="8pt" typeface="Myriad Pro"/>
                        <value>
                           <text>Part 3C: Change in Research Ethics Board (REB) Contact Person</text>
                        </value>
                     </caption>
                     <items>
                        <integer>1</integer>
                        <integer>0</integer>
                        <integer>2</integer>
                     </items>
                     <event activity="change" name="event__change">
                        <script contentType="application/x-javascript">
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.Part3.SubTypeHandler;
var cSystem = script.core.System;
try
{
	
		// set up event object
		var actionName =  cHandler.REBA_NAME_CHANGE;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);

}
catch(exception)
{
	cLog.warn("Problem with change QI address ::change", exception);
}
</script>
                     </event>
                  </field>
                  <field name="chkREBAddressChange" w="93.029mm" h="6mm">
                     <ui>
                        <checkButton>
                           <border>
                              <edge stroke="lowered"/>
                              <fill/>
                           </border>
                        </checkButton>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <value>
                        <integer>0</integer>
                     </value>
                     <caption placement="right" reserve="86.028mm">
                        <para vAlign="middle"/>
                        <font size="8pt" typeface="Myriad Pro"/>
                        <value>
                           <text>Part 3C: Change in Research Ethics Board (REB) Address</text>
                        </value>
                     </caption>
                     <items>
                        <integer>1</integer>
                        <integer>0</integer>
                        <integer>2</integer>
                     </items>
                     <event activity="change" name="event__change">
                        <script contentType="application/x-javascript">

var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.Part3.SubTypeHandler;
var cSystem = script.core.System;
try
{
	
		// set up event object
		var actionName =  cHandler.REBA_ADDRESS_CHANGE;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);

}
catch(exception)
{
	cLog.warn("Problem with change QI address ::change", exception);
}
</script>
                     </event>
                  </field>
                  <border>
                     <edge presence="hidden"/>
                     <corner thickness="0.175mm" presence="hidden"/>
                  </border>
                  <?templateDesigner expand 0?></subform>
               <subform w="200.66mm" name="sfClinicalTrialSite" layout="tb">
                  <subform w="200.66mm" name="sfCurrSiteHeading" layout="lr-tb">
                     <keep intact="contentArea"/>
                     <margin topInset="1.27mm" bottomInset="1.27mm"/>
                     <draw name="lblCurrSiteAddrHeading" w="201.647mm" h="6.249mm">
                        <ui>
                           <textEdit/>
                        </ui>
                        <value>
                           <text>CLINICAL SITE NAME</text>
                        </value>
                        <font typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
                        <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                        <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                        <border>
                           <edge/>
                           <corner thickness="0.175mm"/>
                           <fill>
                              <linear>
                                 <color value="255,255,255"/>
                              </linear>
                              <color value="255,255,153"/>
                           </fill>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                           <edge/>
                           <edge presence="hidden"/>
                        </border>
                        <assist role="H2"/>
                        <?renderCache.bounds 568764 16274 0 0 1417 720 0 0?>
                        <?renderCache.textRun 18 CLINICAL SITE NAME 0 1417 11357 0 0 0 "Myriad Pro" 1 0 10000 ISO-8859-1?></draw>
                     <?templateDesigner expand 1?></subform>
                  <field h="11.43mm" name="txtCurrSiteName" w="200.66mm">
                     <border>
                        <corner thickness="0.175mm" presence="hidden"/>
                        <edge presence="hidden"/>
                     </border>
                     <caption placement="top" reserve="3.175mm">
                        <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                        <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                        <value>
                           <text>Current Name of the Site</text>
                        </value>
                     </caption>
                     <font typeface="Myriad Pro"/>
                     <margin bottomInset="1mm" leftInset="1.0008mm" rightInset="1mm" topInset="1mm"/>
                     <para vAlign="middle"/>
                     <ui>
                        <textEdit hScrollPolicy="off">
                           <border>
                              <edge stroke="lowered"/>
                              <?templateDesigner StyleID aped3?></border>
                           <margin/>
                        </textEdit>
                     </ui>
                     <validate nullTest="error"/>
                  </field>
                  <subform w="202.184mm" layout="lr-tb" name="sfOldSiteName">
                     <subform w="202.184mm" name="sfOldSiteHeading" layout="lr-tb">
                        <keep intact="contentArea"/>
                        <margin topInset="1.27mm" bottomInset="1.27mm"/>
                        <draw name="lblOldSiteAddrHeading" w="202.184mm" h="6.249mm">
                           <ui>
                              <textEdit/>
                           </ui>
                           <value>
                              <text>PREVIOUS CLINICAL SITE NAME</text>
                           </value>
                           <font typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
                           <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                           <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                           <border>
                              <edge/>
                              <corner thickness="0.175mm"/>
                              <fill>
                                 <linear>
                                    <color value="255,255,255"/>
                                 </linear>
                                 <color value="255,255,153"/>
                              </fill>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                              <edge/>
                              <edge presence="hidden"/>
                           </border>
                           <assist role="H2"/>
                           <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                           <?renderCache.textRun 27 PREVIOUS CLINICAL SITE NAME 0 1417 11357 0 0 0 "Myriad Pro" 1 0 10000 ISO-8859-1?></draw>
                        <?templateDesigner expand 1?></subform>
                     <field h="11.43mm" name="txtOldSiteName" w="201.676mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Previous Name of  the Site</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1.0008mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <occur min="0"/>
                     <keep intact="contentArea"/>
                     <?templateDesigner expand 1?></subform>
                  <subform w="202.184mm" name="sfCurrSiteHeading" layout="lr-tb">
                     <keep intact="contentArea"/>
                     <margin topInset="1.27mm" bottomInset="1.27mm"/>
                     <draw name="lblCurrSiteAddrHeading" w="202.184mm" h="6.249mm">
                        <ui>
                           <textEdit/>
                        </ui>
                        <value>
                           <text>A)  CURRENT CLINICAL TRIAL SITE ADDRESS</text>
                        </value>
                        <font typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
                        <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                        <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                        <border>
                           <edge/>
                           <corner thickness="0.175mm"/>
                           <fill>
                              <linear>
                                 <color value="255,255,255"/>
                              </linear>
                              <color value="255,255,153"/>
                           </fill>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                           <edge/>
                           <edge presence="hidden"/>
                        </border>
                        <assist role="H2"/>
                        <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                        <?renderCache.textRun 39 A)  CURRENT CLINICAL TRIAL SITE ADDRESS 0 1417 11357 0 0 0 "Myriad Pro" 1 0 10000 ISO-8859-1?></draw>
                     <?templateDesigner expand 1?></subform>
                  <subform w="202.184mm" layout="lr-tb" name="sfCurrSiteAddressDetails">
                     <keep intact="contentArea"/>
                     <field h="11.43mm" name="txtCurrSiteAddress" w="201.196mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Street/Suite/PO Box*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtCurrSiteCity" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.176mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>City - Town*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="ddlCountry" w="45.72mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Country*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <items/>
                        <items presence="hidden" save="1"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                        <event activity="exit" name="event__exit">
                           <script contentType="application/x-javascript">/*var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cAddressHandler = script.HCeForm.control.CommonAddressHandler;
var cSystem = script.core.System;
try
{
	if(cSystem.hasCurrentFieldValueChanged(this)){
		// set up event object
		var actionName =  cAddressHandler.CLINICAL_COUNTRY_CHANGED_ACTION;
		var anActionEvent = cActionEvent.createInstance(actionName, this,this.rawValue);
		// deploy event to controller
		cAddressHandler.actionPerformed(anActionEvent);
	}
}
catch(exception)
{
	cLog.warn("Problem with contact country ::exit", exception);
}*/
</script>
                        </event>
                        <event activity="enter" name="event__enter">
                           <script contentType="application/x-javascript">
//var cSystem = script.core.System;

//cSystem.setCurrentField(this);
</script>
                        </event>
                     </field>
                     <field h="11.43mm" name="ddlProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Province - State*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>Province/State</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro" size="8pt"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtCurrSitePostalCode" w="43.18mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Postal/ZIP Code*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <margin bottomInset="1.27mm"/>
                     <?templateDesigner expand 1?></subform>
                  <subform w="202.184mm" layout="lr-tb" name="sfOldSiteAddressDetails">
                     <keep intact="contentArea"/>
                     <subform w="200.688mm" name="sfOldSiteAddrHeading" layout="lr-tb">
                        <keep intact="contentArea"/>
                        <margin topInset="1.27mm" bottomInset="1.27mm"/>
                        <draw name="lblOldSiteAddrHeading" w="200.085mm" h="6.249mm">
                           <ui>
                              <textEdit/>
                           </ui>
                           <value>
                              <text>PREVIOUS ADDRESS FOR CLINICAL TRIAL SITE</text>
                           </value>
                           <font typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
                           <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                           <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                           <border>
                              <edge/>
                              <corner thickness="0.175mm"/>
                              <fill>
                                 <linear>
                                    <color value="255,255,255"/>
                                 </linear>
                                 <color value="255,255,153"/>
                              </fill>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                              <edge/>
                              <edge presence="hidden"/>
                           </border>
                           <assist role="H2"/>
                           <?renderCache.bounds 564336 16274 0 0 1417 720 0 0?>
                           <?renderCache.textRun 40 PREVIOUS ADDRESS FOR CLINICAL TRIAL SITE 0 1417 11357 0 0 0 "Myriad Pro" 1 0 10000 ISO-8859-1?></draw>
                        <?templateDesigner expand 0?></subform>
                     <field h="11.43mm" name="txtOldSiteAddress" w="200.262mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Street/Suite/PO Box*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtOldSiteCity" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="2.96mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>City - Town*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="ddlCountry" w="45.72mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Country*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                        <event activity="exit" name="event__exit">
                           <script contentType="application/x-javascript">var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cAddressHandler = script.HCeForm.control.CommonAddressHandler;
var cSystem = script.core.System;
try
{
	if(cSystem.hasCurrentFieldValueChanged(this)){
		// set up event object
		var actionName =  cAddressHandler.CLINICAL_COUNTRY_CHANGED_ACTION;
		var anActionEvent = cActionEvent.createInstance(actionName, this,this.rawValue);
		// deploy event to controller
		cAddressHandler.actionPerformed(anActionEvent);
	}
}
catch(exception)
{
	cLog.warn("Problem with contact country ::exit", exception);
}
</script>
                        </event>
                        <event activity="enter" name="event__enter">
                           <script contentType="application/x-javascript">
var cSystem = script.core.System;

cSystem.setCurrentField(this);
</script>
                        </event>
                        <value>
                           <text>CA</text>
                        </value>
                        <items>
                           <text>CA</text>
                        </items>
                        <items save="1" presence="hidden">
                           <text>CA</text>
                        </items>
                     </field>
                     <field h="11.43mm" name="ddlProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="2.8968mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Province - State*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>Province/State</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro" size="8pt"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtOldSitePostalCode" w="43.18mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Postal/ZIP Code*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <margin bottomInset="0.762mm" topInset="0.762mm" leftInset="0.762mm" rightInset="0.762mm"/>
                     <occur min="0"/>
                     <?templateDesigner expand 0?></subform>
                  <?templateDesigner expand 0?></subform>
               <border>
                  <edge/>
                  <corner thickness="0.175mm"/>
                  <edge presence="hidden"/>
                  <edge presence="hidden"/>
                  <edge presence="hidden"/>
                  <corner thickness="0.175mm" presence="hidden"/>
                  <corner thickness="0.175mm" presence="hidden"/>
                  <corner thickness="0.175mm" presence="hidden"/>
               </border>
               <field name="dteComenceDate" w="133.879mm" h="8.89mm">
                  <ui>
                     <dateTimeEdit hScrollPolicy="off">
                        <border hand="right">
                           <edge/>
                        </border>
                        <margin/>
                        <comb numberOfCells="10"/>
                     </dateTimeEdit>
                     <picture>date{YYYY-MM-DD}</picture>
                  </ui>
                  <font typeface="Myriad Pro"/>
                  <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                  <para vAlign="middle"/>
                  <value>
                     <date/>
                  </value>
                  <caption reserve="59.27mm">
                     <para vAlign="middle"/>
                     <value>
                        <text>35. Clinical Trial Commencement Date</text>
                     </value>
                     <font typeface="Myriad Pro" size="8pt"/>
                  </caption>
                  <bind>
                     <picture>date{YYYY-MM-DD}</picture>
                  </bind>
                  <format>
                     <picture>date{YYYY-MM-DD}</picture>
                  </format>
               </field>
               <subform w="133.879mm" layout="lr-tb" name="sfPrevCommDate">
                  <field name="dtePrevComenceDate" w="133.879mm" h="8.89mm" access="readOnly">
                     <ui>
                        <dateTimeEdit hScrollPolicy="off">
                           <border hand="right">
                              <edge/>
                           </border>
                           <margin/>
                           <comb numberOfCells="10"/>
                        </dateTimeEdit>
                        <picture>date{YYYY-MM-DD}</picture>
                     </ui>
                     <font typeface="Myriad Pro"/>
                     <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                     <para vAlign="middle"/>
                     <value>
                        <date/>
                     </value>
                     <caption reserve="59.27mm">
                        <para vAlign="middle"/>
                        <value>
                           <text>Previous Clinical Trial Commencement Date</text>
                        </value>
                        <font typeface="Myriad Pro" size="8pt"/>
                     </caption>
                     <bind>
                        <picture>date{YYYY-MM-DD}</picture>
                     </bind>
                     <format>
                        <picture>date{YYYY-MM-DD}</picture>
                     </format>
                  </field>
                  <keep intact="contentArea"/>
                  <occur min="0"/>
                  <?templateDesigner expand 0?></subform>
               <subform w="202.184mm" name="sfQualifiedInvest" layout="lr-tb">
                  <subform w="202.184mm" name="sfQIHeading" layout="lr-tb">
                     <keep intact="contentArea"/>
                     <margin topInset="0.762mm" bottomInset="0.508mm"/>
                     <draw name="lblQIHeading" w="202.184mm" h="6.249mm">
                        <ui>
                           <textEdit/>
                        </ui>
                        <value>
                           <text>B) QUALIFIED INVESTIGATOR (QI)</text>
                        </value>
                        <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                        <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                        <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                        <border>
                           <edge/>
                           <corner thickness="0.175mm"/>
                           <fill>
                              <linear>
                                 <color value="255,255,255"/>
                              </linear>
                              <color value="255,255,153"/>
                           </fill>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                           <edge/>
                           <edge presence="hidden"/>
                        </border>
                        <assist role="H2"/>
                        <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                        <?renderCache.textRun 30 B) QUALIFIED INVESTIGATOR (QI) 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                     <draw name="lblQIInstruct" w="202.184mm" h="10.67mm">
                        <ui>
                           <textEdit/>
                        </ui>
                        <font size="8pt" typeface="Myriad Pro" baselineShift="0pt"/>
                        <margin topInset="0.5mm" bottomInset="0.5mm" leftInset="0.5mm" rightInset="0.5mm"/>
                        <para vAlign="middle" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt"/>
                        <value>
                           <text>A Qualified Investigator Undertaking (QIU) form must be completed by the Qualified Investigator responsible for the conduct of the clinical trial at the site specified above. The completed undertaking must be retained for a period of 25 years.</text>
                        </value>
                        <?renderCache.bounds 570286 27412 0 0 1417 1417 0 0?>
                        <?renderCache.textRun 175 A Qualified Investigator Undertaking (QIU) form must be completed by the Qualified Investigator responsible for the conduct of the clinical trial at the site specified above.  0 1417 12323 0 0 0 "Myriad Pro" 0 0 8000 ISO-8859-1?>
                        <?renderCache.textRun 68 The completed undertaking must be retained for a period of 25 years. 0 1417 21923 0 0 0 "Myriad Pro" 0 0 8000 ISO-8859-1?></draw>
                     <?templateDesigner expand 1?></subform>
                  <subform layout="lr-tb" name="sfQIContactDetails" w="202.184mm">
                     <subform w="202.184mm" layout="lr-tb" name="sfCurrQIName">
                        <subform w="202.184mm" name="sfCurrQIHeading" layout="lr-tb">
                           <keep intact="contentArea"/>
                           <margin topInset="1.27mm" bottomInset="1.27mm"/>
                           <draw name="lblCurrQIName" w="202.184mm" h="6.249mm">
                              <ui>
                                 <textEdit/>
                              </ui>
                              <value>
                                 <text>CURRENT QUALIFIED INVESTIGATOR NAME</text>
                              </value>
                              <font typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
                              <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                              <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                              <border>
                                 <edge/>
                                 <corner thickness="0.175mm"/>
                                 <fill>
                                    <linear>
                                       <color value="255,255,255"/>
                                    </linear>
                                    <color value="255,255,153"/>
                                 </fill>
                                 <corner thickness="0.175mm" presence="hidden"/>
                                 <corner thickness="0.175mm" presence="hidden"/>
                                 <edge presence="hidden"/>
                                 <edge/>
                                 <edge presence="hidden"/>
                              </border>
                              <assist role="H2"/>
                              <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                              <?renderCache.textRun 35 CURRENT QUALIFIED INVESTIGATOR NAME 0 1417 11357 0 0 0 "Myriad Pro" 1 0 10000 ISO-8859-1?></draw>
                           <?templateDesigner expand 1?></subform>
                        <field h="11.43mm" name="txtCurrQIGivenName" w="35.385mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Given Name*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtCurrQIInitials" w="13.97mm">
                           <border>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" size="8pt"/>
                              <para vAlign="middle"/>
                              <value>
                                 <text>Initials</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <field h="11.43mm" name="txtCurrQISurname" w="49.124mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Surname*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtCurrQIDesignation" w="45.51mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Medical Designation</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtCurrQITitle" w="52.65mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>17.  Position Title*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="ddlCurrQILangPref" w="35.56mm">
                           <border>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" size="8pt"/>
                              <para vAlign="middle"/>
                              <value>
                                 <text>16. Language*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <items save="1"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <choiceList>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </choiceList>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtCurrQITelephone" w="38.1mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>14. Telephone No.*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtCurrQIExtension" w="25.932mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Ext.</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <field h="11.43mm" name="txtCurrQIFax" w="38.1mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>15. Fax No.</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <field h="11.43mm" name="txtCurrQIEmail" w="63.296mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>18. Email</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit hScrollPolicy="off">
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <margin leftInset="0mm" topInset="0mm" rightInset="0mm"/>
                        <?templateDesigner expand 1?></subform>
                     <subform w="202.184mm" name="sfOldQIName" layout="lr-tb">
                        <occur min="0"/>
                        <subform w="201.676mm" name="sfOldQIHeading" layout="lr-tb">
                           <keep intact="contentArea"/>
                           <margin topInset="1.27mm" bottomInset="1.27mm"/>
                           <draw name="lblOldQIName" w="201.676mm" h="6.249mm">
                              <ui>
                                 <textEdit/>
                              </ui>
                              <value>
                                 <text>PREVIOUS QUALIFIED INVESTIGATOR  NAME</text>
                              </value>
                              <font typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
                              <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                              <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                              <border>
                                 <edge/>
                                 <corner thickness="0.175mm"/>
                                 <fill>
                                    <linear>
                                       <color value="255,255,255"/>
                                    </linear>
                                    <color value="255,255,153"/>
                                 </fill>
                                 <corner thickness="0.175mm" presence="hidden"/>
                                 <corner thickness="0.175mm" presence="hidden"/>
                                 <edge presence="hidden"/>
                                 <edge/>
                                 <edge presence="hidden"/>
                              </border>
                              <assist role="H2"/>
                              <?renderCache.bounds 568846 16274 0 0 1417 720 0 0?>
                              <?renderCache.textRun 37 PREVIOUS QUALIFIED INVESTIGATOR  NAME 0 1417 11357 0 0 0 "Myriad Pro" 1 0 10000 ISO-8859-1?></draw>
                           <?templateDesigner expand 1?></subform>
                        <field h="11.43mm" name="txtOldQIGivenName" w="35.385mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Previous Given Name*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtOldQIInitials" w="25.612mm">
                           <border>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" size="8pt"/>
                              <para vAlign="middle"/>
                              <value>
                                 <text>Previous Initials</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <field h="11.43mm" name="txtOldQISurname" w="51.502mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Previous Surname*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtOldQIDesignation" w="49.396mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.384mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Previous Medical Designation</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <field h="11.43mm" name="txtOldQITitle" w="38.134mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.176mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text> Previous Position Title*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                           <validate nullTest="error"/>
                        </field>
                        <keep intact="contentArea"/>
                        <subform w="201.676mm" name="sfOldQINameHide" layout="lr-tb">
                           <keep intact="contentArea"/>
                           <field h="11.43mm" name="ddlPrevQILangPref" w="35.56mm">
                              <border>
                                 <corner thickness="0.175mm" presence="hidden"/>
                                 <edge presence="hidden"/>
                              </border>
                              <caption placement="top" reserve="3.175mm">
                                 <font typeface="Myriad Pro" size="8pt"/>
                                 <para vAlign="middle"/>
                                 <value>
                                    <text>16. Language*</text>
                                 </value>
                              </caption>
                              <font typeface="Myriad Pro"/>
                              <items save="1"/>
                              <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                              <para vAlign="middle"/>
                              <ui>
                                 <choiceList>
                                    <border>
                                       <edge stroke="lowered"/>
                                       <?templateDesigner StyleID aped3?></border>
                                    <margin/>
                                 </choiceList>
                              </ui>
                              <validate nullTest="error"/>
                           </field>
                           <field h="11.43mm" name="txtPrevQITelephone" w="38.1mm">
                              <border>
                                 <corner thickness="0.1753mm" presence="hidden"/>
                                 <edge presence="hidden"/>
                              </border>
                              <caption placement="top" reserve="3.175mm">
                                 <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                                 <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                                 <value>
                                    <text>14. Telephone No.*</text>
                                 </value>
                              </caption>
                              <font typeface="Myriad Pro"/>
                              <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                              <para vAlign="middle"/>
                              <ui>
                                 <textEdit>
                                    <border>
                                       <edge stroke="lowered"/>
                                       <?templateDesigner StyleID aped3?></border>
                                    <margin/>
                                 </textEdit>
                              </ui>
                              <validate nullTest="error"/>
                           </field>
                           <field h="11.43mm" name="txtPrevQIExtension" w="25.932mm">
                              <border>
                                 <corner thickness="0.1753mm" presence="hidden"/>
                                 <edge presence="hidden"/>
                              </border>
                              <caption placement="top" reserve="3.175mm">
                                 <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                                 <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                                 <value>
                                    <text>Ext.</text>
                                 </value>
                              </caption>
                              <font typeface="Myriad Pro"/>
                              <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                              <para vAlign="middle"/>
                              <ui>
                                 <textEdit>
                                    <border>
                                       <edge stroke="lowered"/>
                                       <?templateDesigner StyleID aped3?></border>
                                    <margin/>
                                 </textEdit>
                              </ui>
                           </field>
                           <field h="11.43mm" name="txtPrevQIFax" w="38.1mm">
                              <border>
                                 <corner thickness="0.1753mm" presence="hidden"/>
                                 <edge presence="hidden"/>
                              </border>
                              <caption placement="top" reserve="3.175mm">
                                 <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                                 <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                                 <value>
                                    <text>15. Fax No.</text>
                                 </value>
                              </caption>
                              <font typeface="Myriad Pro"/>
                              <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                              <para vAlign="middle"/>
                              <ui>
                                 <textEdit>
                                    <border>
                                       <edge stroke="lowered"/>
                                       <?templateDesigner StyleID aped3?></border>
                                    <margin/>
                                 </textEdit>
                              </ui>
                           </field>
                           <field h="11.43mm" name="txtPrevQIEmail" w="63.296mm">
                              <border>
                                 <corner thickness="0.1753mm" presence="hidden"/>
                                 <edge presence="hidden"/>
                              </border>
                              <caption placement="top" reserve="3.175mm">
                                 <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                                 <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                                 <value>
                                    <text>18. Email</text>
                                 </value>
                              </caption>
                              <font typeface="Myriad Pro"/>
                              <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                              <para vAlign="middle"/>
                              <ui>
                                 <textEdit>
                                    <border>
                                       <edge stroke="lowered"/>
                                       <?templateDesigner StyleID aped3?></border>
                                    <margin/>
                                 </textEdit>
                              </ui>
                              <validate nullTest="error"/>
                           </field>
                           <?templateDesigner expand 1?></subform>
                        <margin leftInset="0.508mm" topInset="0.508mm"/>
                        <?templateDesigner expand 1?></subform>
                     <subform w="202.184mm" name="sfCurrQIAddrHeading" layout="lr-tb">
                        <keep intact="contentArea"/>
                        <margin topInset="1.27mm" bottomInset="1.27mm"/>
                        <draw name="lblCurrQIAddr" w="202.184mm" h="6.249mm">
                           <ui>
                              <textEdit/>
                           </ui>
                           <value>
                              <text>CURRENT QUALIFIED INVESTIGATOR ADDRESS</text>
                           </value>
                           <font typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
                           <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                           <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                           <border>
                              <edge/>
                              <corner thickness="0.175mm"/>
                              <fill>
                                 <linear>
                                    <color value="255,255,255"/>
                                 </linear>
                                 <color value="255,255,153"/>
                              </fill>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                              <edge/>
                              <edge presence="hidden"/>
                           </border>
                           <assist role="H2"/>
                           <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                           <?renderCache.textRun 38 CURRENT QUALIFIED INVESTIGATOR ADDRESS 0 1417 11357 0 0 0 "Myriad Pro" 1 0 10000 ISO-8859-1?></draw>
                        <?templateDesigner expand 1?></subform>
                     <field name="chkCurrQIAddrSameAs" w="197.059mm" h="6.35mm">
                        <ui>
                           <checkButton>
                              <border>
                                 <edge stroke="lowered"/>
                                 <fill/>
                              </border>
                           </checkButton>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <value>
                           <integer>0</integer>
                        </value>
                        <caption placement="right" reserve="190.44mm">
                           <para vAlign="middle"/>
                           <font size="8pt" typeface="Myriad Pro"/>
                           <value>
                              <text>Qualified Investigator Address is the same as the Clinical Trial Site</text>
                           </value>
                        </caption>
                        <items>
                           <integer>1</integer>
                           <integer>0</integer>
                           <integer>2</integer>
                        </items>
                        <event activity="change" name="event__change">
                           <script contentType="application/x-javascript">
 
 


var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler =  script.HCeForm.control.Part3.QIHandler;
var cSystem = script.core.System;
try
{
	
		// set up event object
		var actionName =  cHandler.CURRADDR_SAMEAS_ACTION;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);

}
catch(exception)
{
	cLog.warn("Problem with curr QI Same As address ::change", exception);
}
</script>
                        </event>
                     </field>
                     <?templateDesigner expand 1?></subform>
                  <subform w="202.184mm" layout="lr-tb" name="sfCurrQIAddressDetails">
                     <keep intact="contentArea"/>
                     <field h="11.43mm" name="txtCurrQIAddress" w="200.659mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Street/Suite/PO Box*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtCurrQICity" w="53.34mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="2.8643mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>City - Town*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="ddlCountry" w="45.72mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Country*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <items/>
                        <items presence="hidden" save="1"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="ddlProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Province - State*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtProvince" w="43.18mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>Province/State</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro" size="8pt"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtPostalCode" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Postal/ZIP Code*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <margin bottomInset="0mm"/>
                     <occur min="0"/>
                     <?templateDesigner expand 1?></subform>
                  <subform w="202.184mm" layout="lr-tb" name="sfPrevQIAddressDetails">
                     <keep intact="contentArea"/>
                     <subform w="202.184mm" name="sfPrevQIAddrHeading" layout="lr-tb">
                        <keep intact="contentArea"/>
                        <margin topInset="1.27mm" bottomInset="1.27mm"/>
                        <draw name="lblPrevQIAddr" w="202.184mm" h="6.249mm">
                           <ui>
                              <textEdit/>
                           </ui>
                           <value>
                              <text>PREVIOUS QUALIFIED INVESTIGATOR ADDRESS</text>
                           </value>
                           <font typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
                           <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                           <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                           <border>
                              <edge/>
                              <corner thickness="0.175mm"/>
                              <fill>
                                 <linear>
                                    <color value="255,255,255"/>
                                 </linear>
                                 <color value="255,255,153"/>
                              </fill>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <corner thickness="0.175mm"/>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                              <edge/>
                              <edge presence="hidden"/>
                           </border>
                           <assist role="H2"/>
                           <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                           <?renderCache.textRun 39 PREVIOUS QUALIFIED INVESTIGATOR ADDRESS 0 1417 11357 0 0 0 "Myriad Pro" 1 0 10000 ISO-8859-1?></draw>
                        <border>
                           <edge presence="hidden"/>
                           <corner presence="hidden"/>
                           <corner/>
                           <corner presence="hidden"/>
                           <corner/>
                        </border>
                        <?templateDesigner expand 1?></subform>
                     <field h="11.43mm" name="txtPrevQIAddress" w="200.66mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Street/Suite/PO Box*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtPrevQICity" w="53.34mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.176mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>City - Town*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="ddlCountry" w="45.72mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Country*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <items/>
                        <items presence="hidden" save="1"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                        <event activity="exit" name="event__exit">
                           <script contentType="application/x-javascript">/*var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cAddressHandler = script.HCeForm.control.CommonAddressHandler;
var cSystem = script.core.System;
try
{
	if(cSystem.hasCurrentFieldValueChanged(this)){
		// set up event object
		var actionName =  cAddressHandler.CLINICAL_COUNTRY_CHANGED_ACTION;
		var anActionEvent = cActionEvent.createInstance(actionName, this,this.rawValue);
		// deploy event to controller
		cAddressHandler.actionPerformed(anActionEvent);
	}
}
catch(exception)
{
	cLog.warn("Problem with contact country ::exit", exception);
}
*/
</script>
                        </event>
                        <event activity="enter" name="event__enter">
                           <script contentType="application/x-javascript">
var cSystem = script.core.System;

cSystem.setCurrentField(this);
</script>
                        </event>
                     </field>
                     <field h="11.43mm" name="ddlProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Province - State*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>Province/State</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro" size="8pt"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtPostalCode" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Postal/ZIP Code*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <margin bottomInset="0mm"/>
                     <occur min="0"/>
                     <?templateDesigner expand 1?></subform>
                  <?templateDesigner expand 1?></subform>
               <subform w="202.184mm" name="sfResearchEthics" layout="lr-tb">
                  <subform w="202.184mm" name="sfREBHeading" layout="lr-tb">
                     <keep intact="contentArea"/>
                     <margin topInset="1.27mm" bottomInset="1.27mm"/>
                     <draw name="lblREBHeading" w="202.184mm" h="6.249mm">
                        <ui>
                           <textEdit/>
                        </ui>
                        <value>
                           <text>C) RESEARCH ETHICS BOARD APPROVAL</text>
                        </value>
                        <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                        <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                        <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                        <border>
                           <edge/>
                           <corner thickness="0.175mm"/>
                           <fill>
                              <linear>
                                 <color value="255,255,255"/>
                              </linear>
                              <color value="255,255,153"/>
                           </fill>
                           <edge presence="hidden"/>
                           <edge/>
                           <edge presence="hidden"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <corner thickness="0.175mm"/>
                           <corner thickness="0.175mm" presence="hidden"/>
                        </border>
                        <assist role="H2"/>
                        <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                        <?renderCache.textRun 33 C) RESEARCH ETHICS BOARD APPROVAL 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                     <draw name="lblREBEthics" w="202.184mm" h="11.865mm">
                        <ui>
                           <textEdit/>
                        </ui>
                        <value>
                           <exData contentType="text/html">
                              <body xmlns="http://www.w3.org/1999/xhtml" xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/"><p style="font-family:'Myriad Pro';text-decoration:none;letter-spacing:0in">A Research Ethics Board Attestation (REBA) form must be completed by the Research Ethics Board that reviewed and approved the protocol and informed consent form for the clinical trial at the site specified above. The completed attestation must be retained for a period of 25 years</p></body>
                           </exData>
                        </value>
                        <font size="8pt" typeface="MyriadPro-Regular" baselineShift="0pt"/>
                        <margin topInset="0.5mm" bottomInset="0.5mm" leftInset="0.5mm" rightInset="0.5mm"/>
                        <para vAlign="middle" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt"/>
                     </draw>
                     <?templateDesigner expand 1?></subform>
                  <subform w="202.184mm" minH="49.53mm" layout="lr-tb" name="sfREBAddress">
                     <field name="txtREBCompany" w="199.644mm" h="11.43mm">
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.175mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>Name of Research Ethics Board, including applicable affiliations</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                     </field>
                     <field name="dteApprovalDate" w="115.216mm" h="8.89mm">
                        <ui>
                           <dateTimeEdit hScrollPolicy="off">
                              <border hand="right">
                                 <edge/>
                              </border>
                              <margin/>
                              <comb numberOfCells="10"/>
                           </dateTimeEdit>
                           <picture>date{YYYY-MM-DD}</picture>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <value>
                           <date/>
                        </value>
                        <caption reserve="47.0416mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>Date of approval as YYYY-MM-DD</text>
                           </value>
                           <font typeface="Myriad Pro" size="8pt"/>
                        </caption>
                        <bind>
                           <picture>date{YYYY-MM-DD}</picture>
                        </bind>
                        <format>
                           <picture>date{YYYY-MM-DD}</picture>
                        </format>
                     </field>
                     <subform y="21.7mm" w="115.216mm" minH="9mm" layout="lr-tb" name="sfPrevApprovalDate">
                        <field name="dtePrevApprovalDate" w="115.216mm" h="8.89mm">
                           <ui>
                              <dateTimeEdit hScrollPolicy="off">
                                 <border hand="right">
                                    <edge/>
                                 </border>
                                 <margin/>
                                 <comb numberOfCells="10"/>
                              </dateTimeEdit>
                              <picture>date{YYYY-MM-DD}</picture>
                           </ui>
                           <font typeface="Myriad Pro"/>
                           <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                           <para vAlign="middle"/>
                           <value>
                              <date/>
                           </value>
                           <caption reserve="47.1612mm">
                              <para vAlign="middle"/>
                              <value>
                                 <text>Previous Date of approval</text>
                              </value>
                              <font typeface="Myriad Pro" size="8pt"/>
                           </caption>
                           <bind>
                              <picture>date{YYYY-MM-DD}</picture>
                           </bind>
                           <format>
                              <picture>date{YYYY-MM-DD}</picture>
                           </format>
                           <validate nullTest="error"/>
                        </field>
                        <occur min="0"/>
                        <?templateDesigner expand 1?></subform>
                     <subform w="202.184mm" name="sfREBCurrAddrHeading" layout="lr-tb">
                        <keep intact="contentArea"/>
                        <margin topInset="1.27mm" bottomInset="1.27mm"/>
                        <draw name="lbREBCurrAdrr" w="202.184mm" h="6.249mm">
                           <ui>
                              <textEdit/>
                           </ui>
                           <value>
                              <text>CURRENT  RESEARCH ETHICS BOARD ADDRESS</text>
                           </value>
                           <font typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
                           <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                           <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                           <border>
                              <edge/>
                              <corner thickness="0.175mm"/>
                              <fill>
                                 <linear>
                                    <color value="255,255,255"/>
                                 </linear>
                                 <color value="255,255,153"/>
                              </fill>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                              <edge/>
                              <edge presence="hidden"/>
                           </border>
                           <assist role="H2"/>
                           <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                           <?renderCache.textRun 38 CURRENT  RESEARCH ETHICS BOARD ADDRESS 0 1417 11357 0 0 0 "Myriad Pro" 1 0 10000 ISO-8859-1?></draw>
                        <?templateDesigner expand 1?></subform>
                     <field name="txtREBStreetAddress" w="200.66mm" h="11.43mm">
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.175mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>22. Street, Suite and PO Box</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                     </field>
                     <field name="txtREBCity" w="55.88mm" h="11.43mm">
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.175mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>23. City or Town</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="ddlCountry" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>24. Country*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <items/>
                        <items presence="hidden" save="1"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                        <event activity="exit" name="event__exit">
                           <script contentType="application/x-javascript">var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler = script.HCeForm.control.Part3.REBAHandler;
var cSystem = script.core.System;
try
{
	if(cSystem.hasCurrentFieldValueChanged(this)){
		// set up event object
		var actionName =  cHandler.REBA_COUNTRY_CHANGE_ACTION;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
	}
}
catch(exception)
{
	cLog.warn("Problem with reba country ::exit", exception);
}
</script>
                        </event>
                        <event activity="enter" name="event__enter">
                           <script contentType="application/x-javascript">
var cSystem = script.core.System;

cSystem.setCurrentField(this);
</script>
                        </event>
                     </field>
                     <field h="11.43mm" name="ddlProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Province  or State*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>25. Province or State</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro" size="8pt"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtREBPostalCode" w="37.725mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>26. Postal or ZIP Code*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <margin leftInset="0mm" rightInset="0mm"/>
                     <?templateDesigner expand 1?></subform>
                  <subform w="202.184mm" minH="49.53mm" layout="lr-tb" name="sfPrevREBAddress">
                     <subform w="202.184mm" name="sfREBPrevAddrHeading" layout="lr-tb">
                        <keep intact="contentArea"/>
                        <margin topInset="1.27mm" bottomInset="1.27mm"/>
                        <draw name="lblPrevREBAdrr" w="202.184mm" h="6.249mm">
                           <ui>
                              <textEdit/>
                           </ui>
                           <value>
                              <text>PREVIOUS  RESEARCH ETHICS BOARD ADDRESS</text>
                           </value>
                           <font typeface="Myriad Pro" baselineShift="0pt" weight="bold"/>
                           <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                           <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                           <border>
                              <edge/>
                              <corner thickness="0.175mm"/>
                              <fill>
                                 <linear>
                                    <color value="255,255,255"/>
                                 </linear>
                                 <color value="255,255,153"/>
                              </fill>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                              <edge/>
                              <edge presence="hidden"/>
                           </border>
                           <assist role="H2"/>
                           <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                           <?renderCache.textRun 39 PREVIOUS  RESEARCH ETHICS BOARD ADDRESS 0 1417 11357 0 0 0 "Myriad Pro" 1 0 10000 ISO-8859-1?></draw>
                        <?templateDesigner expand 1?></subform>
                     <field name="txtPrevREBStreetAddress" w="200.235mm" h="11.43mm">
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.175mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>22. Street, Suite and PO Box</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                        <keep intact="contentArea"/>
                     </field>
                     <field name="txtPrevREBCity" w="55.88mm" h="11.43mm">
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                              </border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <font typeface="Myriad Pro"/>
                        <margin topInset="1mm" bottomInset="1mm" leftInset="1mm" rightInset="1mm"/>
                        <para vAlign="middle"/>
                        <caption reserve="3.175mm" placement="top">
                           <font size="8pt" typeface="Myriad Pro"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>23. City or Town</text>
                           </value>
                        </caption>
                        <validate nullTest="error"/>
                        <keep intact="contentArea"/>
                     </field>
                     <field h="11.43mm" name="ddlCountry" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>24. Country*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <items/>
                        <items presence="hidden" save="1"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                        <event activity="exit" name="event__exit">
                           <script contentType="application/x-javascript">var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cAddressHandler = script.HCeForm.control.CommonAddressHandler;
var cSystem = script.core.System;
try
{
	if(cSystem.hasCurrentFieldValueChanged(this)){
		// set up event object
		var actionName =  cAddressHandler.CLINICAL_COUNTRY_CHANGED_ACTION;
		var anActionEvent = cActionEvent.createInstance(actionName, this,this.rawValue);
		// deploy event to controller
		cAddressHandler.actionPerformed(anActionEvent);
	}
}
catch(exception)
{
	cLog.warn("Problem with contact country ::exit", exception);
}
</script>
                        </event>
                        <event activity="enter" name="event__enter">
                           <script contentType="application/x-javascript">
var cSystem = script.core.System;

cSystem.setCurrentField(this);
</script>
                        </event>
                     </field>
                     <field h="11.43mm" name="ddlProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Province  or State*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtProvince" w="50.8mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <para vAlign="middle"/>
                           <value>
                              <text>25. Province or State</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro" size="8pt"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtPrevREBPostalCode" w="37.725mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>26. Postal or ZIP Code*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <occur min="0"/>
                     <margin leftInset="0mm" rightInset="0mm"/>
                     <?templateDesigner expand 1?></subform>
                  <subform w="202.184mm" layout="lr-tb" name="sfREBCurrName">
                     <subform w="202.184mm" name="sfREBCurrContactHeading" layout="lr-tb">
                        <keep intact="contentArea"/>
                        <margin topInset="1.27mm" bottomInset="1.27mm"/>
                        <draw name="lblCurrRebaPerson" w="202.184mm" h="6.249mm">
                           <ui>
                              <textEdit/>
                           </ui>
                           <value>
                              <text>CURRENT RESEARCH BOARD CONTACT PERSON</text>
                           </value>
                           <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                           <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                           <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                           <border>
                              <edge/>
                              <corner thickness="0.175mm"/>
                              <fill>
                                 <linear>
                                    <color value="255,255,255"/>
                                 </linear>
                                 <color value="255,255,153"/>
                              </fill>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                              <edge/>
                              <edge presence="hidden"/>
                           </border>
                           <assist role="H2"/>
                           <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                           <?renderCache.textRun 37 CURRENT RESEARCH BOARD CONTACT PERSON 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                        <?templateDesigner expand 1?></subform>
                     <field h="11.43mm" name="txtREBCurrGivenName" w="35.56mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Given Name*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtREBCurrInitials" w="13.97mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" size="8pt"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>Initials</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtREBCurrSurname" w="53.34mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.44mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Surname*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtREBCurrTitle" w="60.96mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>17.  Position Title*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="ddlREBCurrLangPref" w="35.56mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" size="8pt"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>16. Language*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <items save="1"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <choiceList>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </choiceList>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtREBCurrTelephone" w="38.1mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>14. Telephone No.*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtREBCurrExtension" w="31.31mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Extion</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtREBCurrFax" w="38.1mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>15. Fax No.</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtREBCurrEmail" w="64.977mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>18. Email</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit hScrollPolicy="off">
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <margin leftInset="0mm" rightInset="0mm"/>
                     <?templateDesigner expand 1?></subform>
                  <subform w="202.184mm" layout="lr-tb" name="sfREBPrevName">
                     <subform w="202.184mm" name="sfREBPrevContactHeading" layout="lr-tb">
                        <keep intact="contentArea"/>
                        <margin topInset="1.27mm" bottomInset="1.27mm"/>
                        <draw name="lblPrevRebaPerson" w="202.184mm" h="6.249mm">
                           <ui>
                              <textEdit/>
                           </ui>
                           <value>
                              <text>PREVIOUS RESEARCH BOARD CONTACT PERSON</text>
                           </value>
                           <font typeface="Myriad Pro" baselineShift="0pt" size="12pt" weight="bold"/>
                           <margin topInset="0.254mm" bottomInset="0.254mm" leftInset="0.5mm" rightInset="0.5mm"/>
                           <para spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt" vAlign="middle"/>
                           <border>
                              <edge/>
                              <corner thickness="0.175mm"/>
                              <fill>
                                 <linear>
                                    <color value="255,255,255"/>
                                 </linear>
                                 <color value="255,255,153"/>
                              </fill>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                              <edge/>
                              <edge presence="hidden"/>
                           </border>
                           <assist role="H2"/>
                           <?renderCache.bounds 570286 16274 0 0 1417 720 0 0?>
                           <?renderCache.textRun 38 PREVIOUS RESEARCH BOARD CONTACT PERSON 0 1417 11857 0 0 0 "Myriad Pro" 1 0 12000 ISO-8859-1?></draw>
                        <?templateDesigner expand 1?></subform>
                     <field h="11.43mm" name="txtREBPrevGivenName" w="35.56mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.0313mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Given Name*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtREBPrevInitials" w="13.97mm">
                        <border>
                           <corner thickness="0.175mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" size="8pt"/>
                           <para vAlign="middle"/>
                           <value>
                              <text>Initials</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                     </field>
                     <field h="11.43mm" name="txtREBPrevSurname" w="53.34mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>Surname*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <field h="11.43mm" name="txtREBPrevTitle" w="60.96mm">
                        <border>
                           <corner thickness="0.1753mm" presence="hidden"/>
                           <edge presence="hidden"/>
                        </border>
                        <caption placement="top" reserve="3.175mm">
                           <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                           <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                           <value>
                              <text>17.  Position Title*</text>
                           </value>
                        </caption>
                        <font typeface="Myriad Pro"/>
                        <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                        <para vAlign="middle"/>
                        <ui>
                           <textEdit>
                              <border>
                                 <edge stroke="lowered"/>
                                 <?templateDesigner StyleID aped3?></border>
                              <margin/>
                           </textEdit>
                        </ui>
                        <validate nullTest="error"/>
                     </field>
                     <subform y="8.789mm" w="202.184mm" minH="22.86mm" layout="lr-tb" name="sfPrevHiddenProp">
                        <field h="11.43mm" name="ddlREBPrevLangPref" w="35.56mm">
                           <border>
                              <corner thickness="0.175mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" size="8pt"/>
                              <para vAlign="middle"/>
                              <value>
                                 <text>Previos Language*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <items save="1"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <choiceList>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </choiceList>
                           </ui>
                        </field>
                        <field h="11.43mm" name="txtREBPrevTelephone" w="38.1mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>14. Telephone No.*</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <field h="11.43mm" name="txtREBPrevExtension" w="31.31mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>Extion</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <field h="11.43mm" name="txtREBPrevFax" w="38.1mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>15. Fax No.</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <field h="11.43mm" name="txtREBPrevEmail" w="64.977mm">
                           <border>
                              <corner thickness="0.1753mm" presence="hidden"/>
                              <edge presence="hidden"/>
                           </border>
                           <caption placement="top" reserve="3.175mm">
                              <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
                              <para marginLeft="0pt" marginRight="0pt" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" vAlign="middle"/>
                              <value>
                                 <text>18. Email</text>
                              </value>
                           </caption>
                           <font typeface="Myriad Pro"/>
                           <margin bottomInset="1mm" leftInset="1mm" rightInset="1mm" topInset="1mm"/>
                           <para vAlign="middle"/>
                           <ui>
                              <textEdit>
                                 <border>
                                    <edge stroke="lowered"/>
                                    <?templateDesigner StyleID aped3?></border>
                                 <margin/>
                              </textEdit>
                           </ui>
                        </field>
                        <?templateDesigner expand 0?></subform>
                     <occur min="0"/>
                     <margin leftInset="0mm" rightInset="0mm"/>
                     <?templateDesigner expand 1?></subform>
                  <?templateDesigner expand 1?></subform>
               <margin leftInset="0mm" rightInset="0mm" bottomInset="0.762mm" topInset="0.762mm"/>
               <occur max="-1"/>
               <breakBefore targetType="contentArea" startNew="1"/>
               <?templateDesigner expand 0?></subform>
            <border>
               <edge presence="hidden"/>
               <corner thickness="0.175mm" presence="hidden"/>
            </border>
            <?templateDesigner expand 1?></subform>
         <subform w="202.184mm" name="sfFinalizeButton">
            <margin topInset="5.08mm" bottomInset="2.54mm"/>
            <field name="btnFinalizeAndLock" w="28.575mm" h="6.35mm" relevant="-print" x="0.001mm" y="0mm">
               <ui>
                  <button highlight="inverted"/>
               </ui>
               <font typeface="Myriad Pro"/>
               <caption>
                  <value>
                     <text>Finalize</text>
                  </value>
                  <para vAlign="middle" hAlign="center" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt"/>
                  <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
               </caption>
               <border hand="right">
                  <?templateDesigner StyleID apbx2?>
                  <edge stroke="raised"/>
                  <fill>
                     <color value="212,208,200"/>
                  </fill>
               </border>
               <bind match="none"/>
               <event activity="click" name="event__click">
                  <script contentType="application/x-javascript">
var cFormHandler=	script.HCeForm.control.FormHandler;
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
try
{
		// set up event object
		var actionName = cFormHandler.LOCK_FORM;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cFormHandler.actionPerformed(anActionEvent);
	
}
catch(exception)
{
	cLog.warn("Problem with finalize ::click", exception);
}

</script>
               </event>
            </field>
            <field name="btnModify" w="28.575mm" h="6.35mm" relevant="-print" x="31.175mm" y="0mm">
               <ui>
                  <button highlight="inverted"/>
               </ui>
               <font typeface="Myriad Pro"/>
               <caption>
                  <value>
                     <text>Modify</text>
                  </value>
                  <para vAlign="middle" hAlign="center" spaceAbove="0pt" spaceBelow="0pt" textIndent="0pt" marginLeft="0pt" marginRight="0pt"/>
                  <font typeface="Myriad Pro" baselineShift="0pt" size="8pt"/>
               </caption>
               <border hand="right">
                  <?templateDesigner StyleID apbx2?>
                  <edge stroke="raised"/>
                  <fill>
                     <color value="212,208,200"/>
                  </fill>
               </border>
               <bind match="none"/>
               <event activity="click" name="event__click">
                  <script contentType="application/x-javascript">

var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cHandler=	script.HCeForm.control.FormHandler;
var cSystem = script.core.System;


try{
		// set up event object
		var actionName = cHandler.UNLOCK_FORM;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cLog.warn("Problem with  unlock button::click", exception);
}
</script>
               </event>
            </field>
            <bind match="none"/>
            <?templateDesigner expand 0?></subform>
         <margin topInset="0mm" bottomInset="0mm" leftInset="0.508mm" rightInset="0.508mm"/>
         <border>
            <edge/>
            <corner thickness="0.175mm"/>
         </border>
         <?templateDesigner expand 1?></subform>
      <subform w="100mm" name="script" layout="tb" presence="hidden">
         <bind match="none"/>
         <subform usehref="..\..\fragments\CoreJavaScript.xdp#som($template.script.core)">
            <bind/>
            <?templateDesigner expand 0?>
         </subform>
         <subform h="50mm" name="HCeForm" w="100mm">
            <subform layout="tb" name="config" w="100mm">
               <keep intact="contentArea"/>
               <variables>
                  <script contentType="application/x-javascript" name="general">
var cLog = script.core.util.Log;


var content = { 

formType: 					"CTSI",
errorInd:					"+",
formVersion: 				"2.00.10",
CANADA:						"CA",
USA:						"US",
DR_SALUT: 					"dr",
LabelStart: 				"labelStart",
LabelEnd:					"labelEnd",
DIGITAL_SIG:				"DIG_SIG",
IMAGE_SIG:					"IMG_SIG",
FRENCH:						"fr",
ENGLISH:					"en",
TRIALCHGE:					"CHNGE",
AMENDSAME:					"SAME",
NEWTRIAL:					"NEW",
CHK_ON:						1,		//the ON checkbox value
CHK_OFF:					0,		//the OFF checkbox value
//CTA:						"CTA",
//CTAA:						"CTAA",
NEW_TYPE:					"NEW",		
AMEND_TYPE:					"AMEND",				
//Overrides
//NodeValidator_formatValidator: "",
Log_logLevel: cLog.LEVEL_TRACE,
Log_showExceptionDetail: true,
Log_writeToFile: false,


}
</script>
                  <?templateDesigner expand 1?></variables>
               <bind match="none"/>
               <?templateDesigner expand 0?></subform>
            <subform layout="tb" name="control" w="100mm">
               <keep intact="contentArea"/>
               <variables>
                  <script contentType="application/x-javascript" name="FormHandler">/*
* Handles overall Form behaviour. Calls other controllers as appropriate
* Handles part 1 controller functionality as this is small
*/

/** Global Variables **/

var cFormNodeManager = 		script.core.model.FormNodeManager;
var cResourceManager = 		script.core.lang.ResourceManager;
var cConfigManager			=script.core.util.ConfigurationManager
var cControllerUtil = 		script.core.util.ControllerUtil;
var cException = 			script.core.util.Exception;
var cLog = 					script.core.util.Log;
var cUiUtil=				script.core.util.UiUtil;
var cFailureReporter=		script.core.validation.FailureReporter;

var foo;
//form specific
var cAccessibility=			script.HCeForm.util.Accessibility;
var cSiteAddressHandler=	script.HCeForm.control.Part3.SiteAddressHandler;
var cTrialsHandler=			script.HCeForm.control.TrialsHandler;
var cQIHandler=				script.HCeForm.control.Part3.QIHandler;
var cPart2Handler=			script.HCeForm.control.Part2Handler;
var cSubTypeHandler=		script.HCeForm.control.Part3.SubTypeHandler;
var cRebaHandler=			script.HCeForm.control.Part3.REBAHandler;
var cNumberFormat= 			script.HCeForm.util.NumberFormat;
var cGeneralUtil=			script.HCeForm.util.General;		

var FRENCH=						cConfigManager.get("FRENCH");
var ENGLISH=					cConfigManager.get("ENGLISH");	
	
//action Global
var LANGUAGE_CHANGE=			"language_change";
var INITIALIZE_FORM_ACTION=	"init_form";
var SET_INVESTIGATOR_NAME=		"set_name";
var HIDE_INSTRUCTIONS=			"hideInstructions";
var SHOW_INSTRUCTIONS=			"showInstructions";
var LOCK_FORM=					"lockForm";
var UNLOCK_FORM=				"unlockForm";
var DIGIT_TEST=					"digitTest";
var ADD_CONTROLNUM=				"controlNum";
// FORM Nodes

//instructions
var INSTRUCTIONS_SF_FN=		cFormNodeManager.getFormNodeForKey("sfInstructionsContent"); 

//buttons
var MODIFY_BTN_FN=			cFormNodeManager.getFormNodeForKey("btnModify");
var FINALIZE_BTN_FN=		cFormNodeManager.getFormNodeForKey("btnFinalizeAndLock");

//language Noe
var LANGUAGE_CHOICE=		cFormNodeManager.getFormNodeForKey("languageChoice");


var CONTROLNUM_ROOT_SF_FN=	cFormNodeManager.getFormNodeForKey("sfControlNumber");	
var CONTROL_NUMBER_TXT_FN=	cFormNodeManager.getFormNodeForKey("txtControlNumber");
var DELETE_CT_BTN_FN=		cFormNodeManager.getFormNodeForKey("btnDeleteCT");


//SCRIPT NAME
var SCRIPT_OBJECT_NAME="FormHandler";


/*
* actionPerformed- central event handler for the overall form functionality
*
*
*/
function actionPerformed(anEvent)
{
	switch(anEvent.getActionCommand())
	{

		case INITIALIZE_FORM_ACTION:
			 initializeForm();
			break;
		
		case LANGUAGE_CHANGE:
			_updateFormLanguage();
			initializeForm();
			break;
					
		case HIDE_INSTRUCTIONS:
		case SHOW_INSTRUCTIONS:	
				 toggleInstructionsVisiblity(anEvent.getActionCommand());
			break;	
			
		case LOCK_FORM:
			var errors=validateForm();
			if(!errors){
					xfa.host.messageBox(cResourceManager.get("validation_pass"),cResourceManager.get("validation_title"));
					  cTrialsHandler.toggleUIStateUnchangedSites("hidden");
					lockForm();
					//TODO: add form specific calls here. Example show signature block		
			}		
			 break;
			 
		case UNLOCK_FORM:
				cTrialsHandler.toggleUIStateUnchangedSites("visible")
				unlockForm();  
				//TODO: add form specific calls here. Example initialize functionality, for elements that should be readonly

			break;
			
		case DIGIT_TEST:
				 cNumberFormat.formatEventToNumber(anEvent.getValue());
			break;	
			
		case ADD_CONTROLNUM:
				_addControlNumber();
			break;			 
			
		default:
			throw cException.createInstance(SCRIPT_OBJECT_NAME
				  + ".actionPerformed() - initialize Form '" 
				  + anEvent.getActionCommand() + "'.", "UnsupportedAction");
	}
}


/*
* Initializes the form to it's default state
*
*
*
*/
function initializeForm(){
	
	
		_updateFormLanguage();	
		toggleInstructionsVisiblity(HIDE_INSTRUCTIONS);
		
		cPart2Handler.initialise(clinicalTrialInstance);
		//initialize each trial site	
		var trialsList=cTrialsHandler.getTrialsInstances();
		for (var i=0;i&lt;trialsList.length;i++){
			var clinicalTrialInstance=trialsList.item(i);
			cTrialsHandler.initialise(clinicalTrialInstance);
			//cSubTypeHandler.initialise(clinicalTrialInstance);			
			//cSiteAddressHandler.initialise(clinicalTrialInstance);
			//cQIHandler.initialise(clinicalTrialInstance);
			//cRebaHandler.initialise(clinicalTrialInstance);
		}
		
		
		//initialize other controllers
		//if not saving state, check if form is finalized
}




function unlockForm(form_node){
	if(!form_node){
		form_node=cFormNodeManager.getBaseNode();
	}
	form_node.unLock();	
	initializeForm();
}//end fn


function lockForm(){
		var baseNode=cFormNodeManager.getBaseNode();
			
		baseNode.lock();		
		MODIFY_BTN_FN.unLock(); //unlock modify button
	}//end fn


//bit of a hack,using the finalize button state
function isFinalized(){

	if(FINALIZE_BTN_FN.getNodeInstance().access!=="open"){
		return true;
	}
	return false;
}


/*
* Gets the language value for the user set language question
*@returns -a string, either en or fr
*
*/
function getCurrentLanguage(){ 

	var langNodeInstance=LANGUAGE_CHOICE.getNodeInstance();
	if(!langNodeInstance.rawValue){
		langNodeInstance.rawValue=ENGLISH;		
	}
	return(langNodeInstance.rawValue);
}//end fn


//bit of a hack,using the finalize button state. This only works if we automatically remember state, should be manual instaead
function isFinalized(){

	if(FINALIZE_BTN_FN.getNodeInstance().access!=="open"){
		return true;
	}
	return false;
}



/********* Private functions *****/

function _initializeFormNodes(){

	try{

		cControllerUtil.checkFormNode(INSTRUCTIONS_CONTENT_FN,SCRIPT_OBJECT_NAME,"INSTRUCTIONS_CONTENT_FN");	
		cControllerUtil.checkFormNode(MODIFY_BTN_FN,SCRIPT_OBJECT_NAME,"MODIFY_BTN_FN");
		cControllerUtil.checkFormNode(FINALIZE_BTN_FN,SCRIPT_OBJECT_NAME,"FINALIZE_BTN_FN");
		cControllerUtil.checkFormNode(LANGUAGE_CHOICE,SCRIPT_OBJECT_NAME,"LANGUAGE_CHOICE");
		cControllerUtil.checkFormNode(CONTROLNUM_ROOT_SF_FN,SCRIPT_OBJECT_NAME,"CONTROLNUM_ROOT_SF_FN");
		cControllerUtil.checkFormNode(DELETE_CT_BTN_FN,SCRIPT_OBJECT_NAME,"DELETE_CT_BTN_FN");				
	 }
	 catch (exception)
	{
		cLog.critical(cResourceManager.get("error_application", SCRIPT_OBJECT_NAME+".initializeFormNodes()"), exception);
	}

}//end fn





function _updateFormLanguage()
{
	
	cResourceManager.setCurrentLanguage(getCurrentLanguage());
	cFormNodeManager.getBaseNode().updateUI();
	var rootInstance=xfa.form.nodes.item(0);
	if(FRENCH===getCurrentLanguage()){		
		rootInstance.locale="fr_CA";			
	}else{
		rootInstance.locale="en_CA";
	}
}


/**
*	Toggles if the instructions are visible or hidden
*	@param command- indicates if hidden or visbible, using the class globals
*	@returns null
*	@throws Exception if the command is not an expected type
*/
function toggleInstructionsVisiblity(command){
	
	var instructionsContainerNode;
	instructionsContainerNode=INSTRUCTIONS_SF_FN.getNodeInstance();
	if(command===HIDE_INSTRUCTIONS){
		cUiUtil.hide(instructionsContainerNode);
	}else if(command===SHOW_INSTRUCTIONS){
		cUiUtil.show(instructionsContainerNode);
		
	}else{
		throw cException.createInstance("InstructionVisiblity function encountered an illegal command. "
				+"Value: "+command+ "is not a valid command"
		 );
	}

}//end toggleInstructionsVisiblity

function validateForm(baseNode, nodeInstance){

	if(!baseNode){
		 baseNode=cFormNodeManager.getBaseNode();
	}
	if(!nodeInstance){
		nodeInstance=xfa.form.nodes.item(0);
	}
	
	var validationFailures=baseNode.validateNode(null,true);
	cLog.trace(cFailureReporter.getFailureDetails(validationFailures));
	cAccessibility.updateColorErrorsForAccessibility(nodeInstance);
	if(validationFailures!==null){			
		xfa.host.messageBox(cFailureReporter.getFailureSummary(validationFailures),cResourceManager.get("validation_title")); 
	}
	return(validationFailures);
}//end fn

/*
* adds an instance of the control number
*
*/
function _addControlNumber(){

	 var instanceManager=CONTROLNUM_ROOT_SF_FN.getInstanceManager();
	 var newSfInstance=cGeneralUtil.addSubformInstance(instanceManager);
	if(newSfInstance){
		_initialiseControlNumber(newSfInstance);
	}
}//end function

/* Initialises the clinical control number text
*
*/
function _initialiseControlNumber(sfInstance){
	var controlNumInstance=CONTROL_NUMBER_TXT_FN.getNodeInstance(sfInstance);
	var deleteBtnInstance=DELETE_CT_BTN_FN.getNodeInstance(sfInstance);
	var labelText=CONTROL_NUMBER_TXT_FN.getLabel();
	var addText="3."+(sfInstance.index+1);
	labelText=addText+" "+labelText;
	cUiUtil.setCaption(controlNumInstance,labelText);
	labelText=DELETE_CT_BTN_FN.getLabel();
	labelText=labelText+" "+addText;
	cUiUtil.setCaption(deleteBtnInstance,labelText);
}
</script>
                  <script contentType="application/x-javascript" name="MasterPageHandler">

//Imports
var cLog                     = script.core.util.Log;
var cFormNodeManager         = script.core.model.FormNodeManager;
var cResourceManager         = script.core.lang.ResourceManager;
var cException               = script.core.util.Exception;
var cConfigManager=			script.core.util.ConfigurationManager;
var cControllerUtil = 		script.core.util.ControllerUtil;
var cSystem = 				script.core.System;
var cUiUtil=				script.core.util.UiUtil;
var cFailureReporter=		script.core.validation.FailureReporter;

var cGeneralUtil=			script.HCeForm.util.General;
var cFormHandler=			script.HCeForm.control.FormHandler;


var INITIALIZE_MASTER_PAGE=		"intialize_masterPage";


var FORM_VERSION_TXT_FN=		cFormNodeManager.getFormNodeForKey("mp1Version");	
var TITLE_LBL_FN=				cFormNodeManager.getFormNodeForKey("mp1Title");	

var FRENCH=			cConfigManager.get("FRENCH");
var VERSION=		cConfigManager.get("formVersion");
_initializeFormNodes();


/*
* actionPerformed- central event handler for the overall form functionality
*
*
*/
function actionPerformed(anEvent)
{
	switch(anEvent.getActionCommand())
	{


		case INITIALIZE_MASTER_PAGE:
			initialize(anEvent.getValue());
			break;
			
				
		default:
			throw cException.createInstance(SCRIPT_OBJECT_NAME
				  + ".actionPerformed() - unrecognized event '" 
				  + anEvent.getActionCommand() + "'.", "UnsupportedAction");
	}
}



function initialize(a_sfInstance){


	_setFormVersion(FORM_VERSION_TXT_FN.getNodeInstance(a_sfInstance));
	_setLabels(a_sfInstance);
		
	
}


function _setFormVersion(a_versionField){
	a_versionField.rawValue=VERSION;
	cUiUtil.setCaption(a_versionField,cResourceManager.get(FORM_VERSION_TXT_FN.labelKey));//shouldnt have to do this
}

//sets the labels since this doesn't seem to work on the master page
function _setLabels(a_sfInstance){

	var titleInstance=TITLE_LBL_FN.getNodeInstance(a_sfInstance);
	cUiUtil.setCaption(titleInstance,cResourceManager.get(TITLE_LBL_FN.labelKey));	
}



/***Private functionality ***/
function _initializeFormNodes(){

	try{
	
		cControllerUtil.checkFormNode(FORM_VERSION_TXT_FN, SCRIPT_OBJECT_NAME ,"FORM_VERSION_TXT_FN");
		cControllerUtil.checkFormNode(TITLE_LBL_FN, SCRIPT_OBJECT_NAME ,"TITLE_LBL_FN");			
	}
	catch (exception)
	{
		cLog.critical(SCRIPT_OBJECT_NAME+"._initialize()", exception);
	}
}
</script>
                  <script contentType="application/x-javascript" name="TrialsHandler">/*
* This controller manages the overall state of a clinical trial Site
* i.e. adding or deleting a clinical trial, trial ID
* One exception is the Form type is managed in this handler
*/


//SCRIPT NAME
var SCRIPT_OBJECT_NAME="TrialsHandler";

/** Global Variables **/

var cFormNodeManager = 		script.core.model.FormNodeManager;
var cResourceManager = 		script.core.lang.ResourceManager;
var cConfigManager			=script.core.util.ConfigurationManager;
var cControllerUtil = 		script.core.util.ControllerUtil;
var cException = 			script.core.util.Exception;
var cLog = 					script.core.util.Log;
var cUiUtil=				script.core.util.UiUtil;
var cNodeUtil=		 		script.core.util.NodeUtil;

//form specific
var cSubTypeHandler=		script.HCeForm.control.Part3.SubTypeHandler;
var cGeneralUtil=			script.HCeForm.util.General;
var cQIHandler=				script.HCeForm.control.Part3.QIHandler;
var cSubTypeHandler=		script.HCeForm.control.Part3.SubTypeHandler;
var cRebaHandler=			script.HCeForm.control.Part3.REBAHandler;
var cSiteAddressHandler=	script.HCeForm.control.Part3.SiteAddressHandler;
var cAddressUtil=			script.HCeForm.util.AddressUtil;

// FRM Nodes
var TRIALS_SF_FN=				cFormNodeManager.getFormNodeForKey("sfPart3"); 
var CHANGE_NUM_TXT_FN=			cFormNodeManager.getFormNodeForKey("txtChangeNum"); 
var SUB_TYPE_DDL_FN=			cFormNodeManager.getFormNodeForKey("ddlSubType");
var FORM_SUBMIT_TYPE_RDO_FN=	cFormNodeManager.getFormNodeForKey("rdoTrialType");	  	
var DELETE_BTN_FN=				cFormNodeManager.getFormNodeForKey("btnDeleteSite");

//const
var AMEND_TYPE_CONST=	cConfigManager.get("AMEND_TYPE");


//actions
var SUBTYPE_CHANGE=		"subTypeChange";
var ADD_SITE_ACTION=	"addSite";
var DELETE_SITE_ACTION=	"deleteSite";	 

/*
* actionPerformed- central event handler for the overall form functionality
*
*
*/
function actionPerformed(anEvent)
{
	switch(anEvent.getActionCommand())
	{

		case SUBTYPE_CHANGE:					
			cSubTypeHandler.updateAllSubTypes();				
		break;
		
		case ADD_SITE_ACTION:
			_addTrialSite();
		break;
		
		case DELETE_SITE_ACTION:
			var rootSiteInstance=getClinicalTrialSFInstance(anEvent.getSource());
			_deleteTrialSite(rootSiteInstance);
		break;	 
			
		default:
			throw cException.createInstance(SCRIPT_OBJECT_NAME
				  + ".actionPerformed() - initialize Form '" 
				  + anEvent.getActionCommand() + "'.", "UnsupportedAction");
	}
}


/*
* Adds a clinical Trial Site subform and initializes the subform
*/
function _addTrialSite(){
	var instanceManager= TRIALS_SF_FN.getInstanceManager();
	var newSfInstance=cGeneralUtil.addSubformInstance(instanceManager);
	if(newSfInstance){
		initialise(newSfInstance);
		cSubTypeHandler.initSubType(newSfInstance);
	}
}

function _updateSiteToolTip(sfInstance){

		var textToAdd="for Clinical Trial Site 1"
		cAddressUtil.updateAllFieldTooltips(sfInstance,textToAdd,"labelEnd");
}


function getSiteFormNodeAlias(){

	return(TRIALS_SF_FN.getSomExpression());
}


function _deleteTrialSite(rootSiteInstance){

	if(rootSiteInstance){
		//determine if it is the last clinical site
		var isDeletingLast=false;
		var instanceManager=TRIALS_SF_FN.getInstanceManager()
			if(instanceManager.count===(rootSiteInstance.index+1)){
				isDeletingLast=true;
			}
		var result=cGeneralUtil.removeSubformInstance(rootSiteInstance);
		if(result &amp;&amp; !isDeletingLast){
			cLog.trace("Initializing all the trials...");
			_initialiseAllTrials()
			//TODO: update all the tooltips of all forms
			//TODO: Set the cursor position
		}
	}
}
/*
* Initialise all the Part 3 clinical trial site subforms
*
*/
function _initialiseAllTrials(){
	var trialsList=getTrialsInstances();
	for(var i=0;i&lt;trialsList.length;i++){
		initialise(trialsList.item(i));
	}	

}

function _setDeleteButton(parentInstance){
	var deleteBtnInstance=DELETE_BTN_FN.getNodeInstance(parentInstance);
	var labelText=DELETE_BTN_FN.getLabel();
	var labelText=labelText+" "+(parentInstance.index+1);
	cUiUtil.setCaption(deleteBtnInstance,labelText);
	
}


/*
* Initialises a single clincal trial site
* Calls all the sub controllers for part 3 initialization
*@param- parentInstance - the adobe node of the site subform
*
*/
function initialise(parentInstance){

	 _updateSiteToolTip(parentInstance);

	updateTrialsID(parentInstance);
	 _setDeleteButton(parentInstance);
	 cSubTypeHandler.initialise(parentInstance);			
	cSiteAddressHandler.initialise(parentInstance);
	cQIHandler.initialise(parentInstance);
	cRebaHandler.initialise(parentInstance);
	 
}


/*
* Gets all the trials subform instances
*
*
*/
function getTrialsInstances(){

	return(TRIALS_SF_FN.getNodeInstances());

} 
/* Gets the specific Clincial Trial Site Instance given a field that belongs to the site
* This assumes that the ancestor is the only repeating element
* @param adobeField- an instance of a field that belongs to the clinical site desired
* @returns an adobe node instance of the root Clinical Site subform
*/
function getClinicalTrialSFInstance(adobeField){
	var result=cGeneralUtil.getParentInstance(TRIALS_SF_FN.getSomExpression(),adobeField);
	return(result);
	//return(cNodeUtil.getRepeatingAncestorNode(adobeField));
}

function updateTrialsID(parentInstance){

	CHANGE_NUM_TXT_FN.getNodeInstance(parentInstance).rawValue=(parentInstance.index)+1

}

/*
* gets the form Type (new or amended) for the form
*
@returns adobe node instance of the type of submission for this form
*/
function getSubmissionType(){

	return(FORM_SUBMIT_TYPE_RDO_FN.getNodeInstance().rawValue);
}


function toggleUIStateUnchangedSites(stateValue){
	
	if(getSubmissionType()!==AMEND_TYPE_CONST){
		return;
	}
	
	var trialsList=TRIALS_SF_FN.getNodeInstances();
	for(var i=0;i&lt;trialsList.length;i++){
		var oneSite=trialsList.item(i);
		if(cSubTypeHandler.isUnchangedAmend(oneSite)){
			if(stateValue=="visible"){
			 	cUiUtil.show(oneSite);
			}else{
				 cUiUtil.hide(oneSite);
			}
		}
	}//end for

}




function _initializeFormNodes(){

	try{

		cControllerUtil.checkFormNode(TRIALS_SF_FN,SCRIPT_OBJECT_NAME,"TRIALS_SF_FN");
		cControllerUtil.checkFormNode(CHANGE_NUM_TXT_FN,SCRIPT_OBJECT_NAME,"CHANGE_NUM_TXT_FN");
		cControllerUtil.checkFormNode(SUB_TYPE_DDL_FN,SCRIPT_OBJECT_NAME,"SUB_TYPE_DDL_FN");
		cControllerUtil.checkFormNode(FORM_SUBMIT_TYPE_RDO_FN,SCRIPT_OBJECT_NAME,"FORM_SUBMIT_TYPE_RDO_FN");
		cControllerUtil.checkFormNode(DELETE_BTN_FN,SCRIPT_OBJECT_NAME,"DELETE_BTN_FN");

	 }
	 catch (exception)
	{
		cLog.critical(cResourceManager.get("error_trials", SCRIPT_OBJECT_NAME+".initializeFormNodes()"), exception);
	}

}//end fn


</script>
                  <script contentType="application/x-javascript" name="Part2Handler">
/*
* This form manages the Part 2 information of the form
*/

//SCRIPT NAME
var SCRIPT_OBJECT_NAME="Part2Handler";


var cFormNodeManager = 		script.core.model.FormNodeManager;
var cResourceManager = 		script.core.lang.ResourceManager;
var cConfigManager			=script.core.util.ConfigurationManager
var cControllerUtil = 		script.core.util.ControllerUtil;
var cLog = 					script.core.util.Log;
var cUiUtil=				script.core.util.UiUtil;
var cNodeUtil=		 		script.core.util.NodeUtil;

//form specific
var cTrialsHandler=			script.HCeForm.control.TrialsHandler;
var cGeneralUtil=			script.HCeForm.util.General;
var cAddressUtil= 			script.HCeForm.util.AddressUtil;

var CHK_ON=						cConfigManager.get("CHK_ON");
	
//action Global
var CONTACTSAMEAS_CHANGE=			"contactsameas_change";
var CONTACT_COUNTRY_CHANGED=		"contact_country_change";
var SPONSOR_COUNTRY_CHANGED=		"sponsor_country_change";

// FORM Nodes
//Sponsor Info
var SPONSOR_ROOT_SF_FN=				cFormNodeManager.getFormNodeForKey("sfSponsorInfo"); 
var SPONSOR_PROV_DDL_FN=			cFormNodeManager.getFormNodeForKey("ddlSponsorProvince"); 
var SPONSOR_PROV_TXT_FN=			cFormNodeManager.getFormNodeForKey("txtSponsorProvince"); 
var SPONSOR_POSTAL_TXT_FN= 			cFormNodeManager.getFormNodeForKey("txtSponsorPostalCode");
var SPONSOR_COUNTRY_DDL_FN=			cFormNodeManager.getFormNodeForKey("ddlSponsorCountry");
//contact info
var TRIALCONTACT_ROOT_SF_FN=		cFormNodeManager.getFormNodeForKey("sfTrialContact"); 
var TRIALCONTACT_SAMEAS_CHK_FN=		cFormNodeManager.getFormNodeForKey("chkSponsorAddrSame"); //chg
var TRIALCONTACT_PROV_DDL_FN=		cFormNodeManager.getFormNodeForKey("ddlContactProvince"); 
var TRIALCONTACT_PROV_TXT_FN=		cFormNodeManager.getFormNodeForKey("txtContactProvince"); 
var TRIALCONTACT_POSTAL_TXT_FN= 	cFormNodeManager.getFormNodeForKey("txtContactPostalCode");
var TRIALCONTACT_COUNTRY_DDL_FN=	cFormNodeManager.getFormNodeForKey("ddlContactCountry");
var PART2_SF_FN=					cFormNodeManager.getFormNodeForKey("sfPart2");


 _initializeFormNodes();

/*
* actionPerformed- central event handler for the overall form functionality
*
*
*/
function actionPerformed(anEvent)
{
	switch(anEvent.getActionCommand())
	{

		case CONTACTSAMEAS_CHANGE:
			 _trialContactSameAsUI(anEvent.getSource());
			break;
		case CONTACT_COUNTRY_CHANGED:
				var parentInstance= getPart2SFInstance(anEvent.getSource());
				_initializeContactInfo(TRIALCONTACT_ROOT_SF_FN.getNodeInstance(parentInstance))					
			break;
			
		case SPONSOR_COUNTRY_CHANGED:
				var parentInstance= getPart2SFInstance(anEvent.getSource());
				_initializeSponsorInfo(SPONSOR_ROOT_SF_FN.getNodeInstance(parentInstance))					
			break;	
		
		default:
			throw cException.createInstance(SCRIPT_OBJECT_NAME
				  + ".actionPerformed() - initialize Form '" 
				  + anEvent.getActionCommand() + "'.", "UnsupportedAction");
	}
}


/*
* Initiailizes any part 2 contact for a given clinical trial site
*
*/
function initialise(){

	_trialContactSameAsUI(TRIALCONTACT_SAMEAS_CHK_FN.getNodeInstance());
	 _initializeSponsorInfo();
}



function getPart2SFInstance(adobeField){
	return(PART2_SF_FN.getNodeInstance())
}








/********* Private functions *****/

function _initializeFormNodes(){

	try{

		cControllerUtil.checkFormNode(TRIALCONTACT_ROOT_SF_FN,SCRIPT_OBJECT_NAME,"TRIALCONTACT_ROOT_SF_FN");
		cControllerUtil.checkFormNode(TRIALCONTACT_SAMEAS_CHK_FN,SCRIPT_OBJECT_NAME,"TRIALCONTACT_SAMEAS_CHK_FN");
		cControllerUtil.checkFormNode(TRIALCONTACT_PROV_DDL_FN,SCRIPT_OBJECT_NAME,"TRIALCONTACT_PROV_DDL_FN");
		cControllerUtil.checkFormNode(TRIALCONTACT_PROV_TXT_FN,SCRIPT_OBJECT_NAME,"TRIALCONTACT_PROV_TXT_FN");
		cControllerUtil.checkFormNode(TRIALCONTACT_POSTAL_TXT_FN,SCRIPT_OBJECT_NAME,"TRIALCONTACT_POSTAL_TXT_FN");
		cControllerUtil.checkFormNode(TRIALCONTACT_COUNTRY_DDL_FN,SCRIPT_OBJECT_NAME,"TRIALCONTACT_COUNTRY_DDL_FN");
		
		cControllerUtil.checkFormNode(SPONSOR_ROOT_SF_FN,SCRIPT_OBJECT_NAME,"SPONSOR_ROOT_SF_FN");
		cControllerUtil.checkFormNode(SPONSOR_PROV_DDL_FN,SCRIPT_OBJECT_NAME,"SPONSOR_PROV_DDL_FN");
		cControllerUtil.checkFormNode(SPONSOR_PROV_TXT_FN,SCRIPT_OBJECT_NAME,"SPONSOR_PROV_TXT_FN");
		cControllerUtil.checkFormNode(SPONSOR_POSTAL_TXT_FN,SCRIPT_OBJECT_NAME,"SPONSOR_POSTAL_TXT_FN");
		cControllerUtil.checkFormNode(SPONSOR_COUNTRY_DDL_FN,SCRIPT_OBJECT_NAME,"SPONSOR_COUNTRY_DDL_FN");	
		cControllerUtil.checkFormNode(PART2_SF_FN,SCRIPT_OBJECT_NAME,"PART2_SF_FN");	
							
	 }
	 catch (exception)
	{
		cLog.critical(cResourceManager.get("error_application", SCRIPT_OBJECT_NAME+".initializeFormNodes()"), exception);
	}

}//end fn

/*
*	Manages the state of the Contact same as address field
*	@param- oChkInstance- the adobe instance of the same as checkbox
*
*/
function _trialContactSameAsUI(oChkInstance){
 
 	var parentInstance=getPart2SFInstance(oChkInstance);
 	if(oChkInstance.rawValue==CHK_ON){
 		//delete the instance
 		cGeneralUtil.removeSubformInstance(TRIALCONTACT_ROOT_SF_FN.getNodeInstance(parentInstance));
 	}else{
 		var instanceManager=TRIALCONTACT_ROOT_SF_FN.getInstanceManager(parentInstance);
		var newSfInstance=cGeneralUtil.addSubformInstance(instanceManager);
		//initialize
		if(newSfInstance){
			_initializeContactInfo(newSfInstance);
		}
		
 	}
 }
 /*
 * initialized the state of the contact info. Initialises the country/ province information
 *@param parentinstance- the instance subform fo the contact information
 */
 function _initializeContactInfo(parentInstance){
 
 	var provDdlInstance=TRIALCONTACT_PROV_DDL_FN.getNodeInstance(parentInstance);	
 	var postalTxtInstance=TRIALCONTACT_POSTAL_TXT_FN.getNodeInstance(parentInstance);		
	var countryInstance=TRIALCONTACT_COUNTRY_DDL_FN.getNodeInstance(parentInstance);			
 	//initializes the state of country and province
	cAddressUtil.countryChanged(TRIALCONTACT_PROV_DDL_FN,TRIALCONTACT_POSTAL_TXT_FN,provDdlInstance,postalTxtInstance);
	cAddressUtil.setProvinceUIState(countryInstance.rawValue,provDdlInstance,TRIALCONTACT_PROV_TXT_FN.getNodeInstance(parentInstance));
 }

/*
*	Initialises the Sponsor country and province information
*
*/
 function _initializeSponsorInfo(parentInstance){
 
 	var provDdlInstance=SPONSOR_PROV_DDL_FN.getNodeInstance(parentInstance);	
 	var postalTxtInstance=SPONSOR_POSTAL_TXT_FN.getNodeInstance(parentInstance);		
	var countryInstance=SPONSOR_COUNTRY_DDL_FN.getNodeInstance(parentInstance);			
 	//initializes the state of country and province countryChanged(provinceDdl_formNode,postal_formNode,provinceDdlInstance,postalTxtInstance){
	cAddressUtil.countryChanged(SPONSOR_PROV_DDL_FN,SPONSOR_POSTAL_TXT_FN,provDdlInstance,postalTxtInstance);
	cAddressUtil.setProvinceUIState(countryInstance.rawValue,provDdlInstance,SPONSOR_PROV_TXT_FN.getNodeInstance(parentInstance));
 }
</script>
                  <?templateDesigner expand 1?></variables>
               <bind match="none"/>
               <subform w="100mm" h="50mm" name="Part3">
                  <variables>
                     <script contentType="application/x-javascript" name="SubTypeHandler">/*
* Controller that manages the clinical trial submission/ amendment types
*
*/

//SCRIPT NAME
var SCRIPT_OBJECT_NAME="SubTypeHandler";

/** Global Variables **/

var cFormNodeManager = 		script.core.model.FormNodeManager;
var cResourceManager = 		script.core.lang.ResourceManager;
var cConfigManager			=script.core.util.ConfigurationManager;
var cControllerUtil = 		script.core.util.ControllerUtil;
var cException = 			script.core.util.Exception;
var cLog = 					script.core.util.Log;
var cUiUtil=				script.core.util.UiUtil;


//form specific
var cTrialsHandler=			script.HCeForm.control.TrialsHandler;
var cSiteAddressHandler=	script.HCeForm.control.Part3.SiteAddressHandler;
var cQIHandler=				script.HCeForm.control.Part3.QIHandler; 
var cGeneralUtil=			script.HCeForm.util.General;
var cRebaHandler=			script.HCeForm.control.Part3.REBAHandler; 
var cDateHandler=			script.HCeForm.control.Part3.DateHandler;
	
var CHK_ON=					cConfigManager.get("CHK_ON");
var AMENDSAME_CONST=		cConfigManager.get("AMENDSAME");	// amendment, site not changed	
var NEWTRIAL_CONST=			cConfigManager.get("NEWTRIAL");		// new clinical trial site
var AMEND_CHANGE_CONST=		cConfigManager.get("TRIALCHGE");	//amendment, info has changed

var NEW_CONST=				cConfigManager.get("NEW_TYPE");
var AMEND_CONST=				cConfigManager.get("AMEND_TYPE");

	
//action Global
var SITE_NAME_CHANGE=				"siteNameChange";
var SITE_ADDRESS_CHANGE=			"siteAddressChange";
var QI_NAME_CHANGE=					"qiNameChange";
var QI_ADDRESS_CHANGE=				"qiAddressChange";
var REBA_NAME_CHANGE=				"rebaNameChange";
var REBA_ADDRESS_CHANGE=			"rebaAddressChange";
var DATE_CHANGE=					"dateChange";
var AMEND_TYPE_CHANGE=				"amendTypeChange";

// FRM Nodes
var SITE_ADDR_CHK_FN=	cFormNodeManager.getFormNodeForKey("chkSiteAddressChange"); 
var CHANGE_REASON_SF_FN=	cFormNodeManager.getFormNodeForKey("sfChangeReason"); 
var AMEND_TYPE_DDL_FN=		cFormNodeManager.getFormNodeForKey("ddlChangeType"); 

//change type form nodes
var DATE_CHGE_CHK_FN=			cFormNodeManager.getFormNodeForKey("chkDateChange"); 
var SITE_NAME_CHGE_CHK_FN=		cFormNodeManager.getFormNodeForKey("chkSiteNameChange"); 
var SITE_ADDR_CHGE_CHK_FN=		cFormNodeManager.getFormNodeForKey("chkSiteAddressChange"); 
var QI_NAME_CHGE_CHK_FN=		cFormNodeManager.getFormNodeForKey("chkQINameChange"); 
var QI_ADDR_CHGE_CHK_FN=		cFormNodeManager.getFormNodeForKey("chkQIAddressChange"); 
var REB_PERSON_CHGE_CHK_FN=		cFormNodeManager.getFormNodeForKey("chkREBPersonChange"); 
var REB_ADDR_CHGE_CHK_FN=		cFormNodeManager.getFormNodeForKey("chkREBAddressChange"); 



/*
* actionPerformed- central event handler for the overall form functionality
*
*
*/
function actionPerformed(anEvent)
{
	switch(anEvent.getActionCommand())
	{
		case AMEND_TYPE_CHANGE: //type of amendment droplist behaviour
			var amendTypeDdlInstance=anEvent.getSource();
			var rootTrialInstance= cTrialsHandler.getClinicalTrialSFInstance(amendTypeDdlInstance);	
			 _initReasonState(rootTrialInstance,amendTypeDdlInstance);
			 break;
		
		case SITE_NAME_CHANGE: //site name amendment type
				_clinicalTrialSiteNameChangeType(anEvent.getSource());
				break;
				
		case SITE_ADDRESS_CHANGE: //site address amendment type
				_clinicalTrialAddressChangeType(anEvent.getSource());								
				break;
				
		case 	QI_NAME_CHANGE:	//QI name change amendment type
				_qiNameChangeType(anEvent.getSource());						
				break;
			
		case	QI_ADDRESS_CHANGE: //QI address change amendment type	
			 _qiAddressChangeType(anEvent.getSource());
			 break;
			 
		case REBA_NAME_CHANGE: // research ethics board name change amendment type
			_rebaNameChangeType(anEvent.getSource());
			break;
			
		case REBA_ADDRESS_CHANGE: //research ethics board amendment type
			_rebaAddressChangeType(anEvent.getSource());
			break;			 
			
		case DATE_CHANGE:	//commencement date and approval date amendment type
			_dateChangeType(anEvent.getSource());
			break;	
			 	
		default:
			throw cException.createInstance(SCRIPT_OBJECT_NAME
				  + ".actionPerformed() - initialize Form '" 
				  + anEvent.getActionCommand() + "'.", "UnsupportedAction");
	}
}

/*
* for a given clinical trial site, initializes all the fields
* @param parentInstance- the instance subform of the clinical trial to update
*/
function initialise(parentInstance){
	initSubType(parentInstance);

}
/*
* Returns an array of all the change reason subforms that contain the checkbox group
*
*/
function getAllChangeTypes(){

	return(CHANGE_REASON_SF_FN.getNodeInstances());

}
/* Get the change reason subform given a specific clinical trial site
* @param- parentInstance- the root instance of the clinical trial site
*/
function getChangeTypeSf(parentInstance){

	return(CHANGE_REASON_SF_FN.getNodeInstance(parentInstance));
}


function isUnchangedAmend(clinicalSite){

	var amendDdlInstance=AMEND_TYPE_DDL_FN.getNodeInstance(clinicalSite);
	if(amendDdlInstance.rawValue=== AMENDSAME_CONST){
	
		return (true);
	}
	return false;
}



/*
*  Returns the amendment type droplist instance for a given clinical trial site
*	@param- parentInstance- the clinical site instance to search for the field
*/
function getAmendType(parentInstance){
	return(AMEND_TYPE_DDL_FN.getNodeInstance(parentInstance));
}



/*
* Manages the state of the clinical trial site name 
*@param oChkSiteName- the adobe instance of the checkbox for the for the amend type
*
*/
function _clinicalTrialSiteNameChangeType(oChkSiteName){
	 var parentInstance=cTrialsHandler.getClinicalTrialSFInstance(oChkSiteName);
	 var oldSiteNameInstance=null;
	if(oChkSiteName.rawValue==CHK_ON){ 
		//change in clincial Site Name
		oldSiteNameInstance=cSiteAddressHandler.createOldSiteName(parentInstance);
		cSiteAddressHandler.copySiteNameToOld(parentInstance);
		 xfa.host.resetData((cSiteAddressHandler.getCurrSiteName(parentInstance)).somExpression);
	}else{
			oldSiteNameInstance=cSiteAddressHandler.getOldNameSiteRoot(parentInstance);
			if(oldSiteNameInstance){
				cGeneralUtil.removeSubformInstance(oldSiteNameInstance);	
			}
	}
}



/*
* Manages Change in clinical trial Address UI state 
*@param - oChkClinTrialAddress: the adobe node for teh change in clinical trial address check box
*/
function _clinicalTrialAddressChangeType(oChkClinTrialAddress){

	 var parentInstance=cTrialsHandler.getClinicalTrialSFInstance(oChkClinTrialAddress);
	 var oldAddressInstance=null;
	 //create the old clinical site
	if(oChkClinTrialAddress.rawValue==CHK_ON){
		//copy the data from the current clinical site
		oldAddressInstance=cSiteAddressHandler.createOldAddress(parentInstance);
		var currAddressInstance=cSiteAddressHandler.getCurrentSiteAddressRoot(parentInstance);
		cSiteAddressHandler.copySiteAddress(currAddressInstance,oldAddressInstance)
		//clear the current address as this will be the "new" address
		xfa.host.resetData(currAddressInstance.somExpression);
		cSiteAddressHandler.intializeSiteAddress(currAddressInstance);
	}else{
		oldAddressInstance=cSiteAddressHandler.getOldSiteAddressRoot(parentInstance);
		if(oldAddressInstance){
			cGeneralUtil.removeSubformInstance(oldAddressInstance);
		}	
	}	 
}

/*
* Manages the state when a change in QI address is selected or deselected
* @param- oChkAddress: the adobe instance of the change address check box
*/
function _qiAddressChangeType(oChkAddress){

	 var rootInstance=cTrialsHandler.getClinicalTrialSFInstance(oChkAddress);
	 var oldAddressInstance=null;
	 //create the old clinical site
	if(oChkAddress.rawValue==CHK_ON){
		//copy the data from the current clinical site
		oldAddressInstance=cQIHandler.createOldQIAddress(rootInstance);
		cQIHandler.copyToOldQIAddress(rootInstance);
		
		var currAddressInstance=cQIHandler.getCurrentQAddressSfInstance(rootInstance);
		if(currAddressInstance){
			//clear the current address as this will be the "new" address
			xfa.host.resetData(currAddressInstance.somExpression);
			cQIHandler.initializeCurrQIAddress(rootInstance);
		}else{
			//create it, reset the same as
			cQIHandler.resetCurrentQiAddress(rootInstance);
		}

	}else{
		oldAddressInstance=cQIHandler.getOldQIAddressSfInstance(rootInstance);
		if(oldAddressInstance){
			if(cQIHandler.isCurrentQIAddressEmpty(rootInstance)===true){
				cQIHandler.copyToCurrQiAddress(rootInstance);
			}
			cGeneralUtil.removeSubformInstance(oldAddressInstance);
		}	
	}	 
}

/*
*	Manages the Qualified Investigator Name state
*	@param oChkQIName - the QI name change checkbox, used to indicate amend change
*/
function _qiNameChangeType(oChkQIName){

	var parentInstance=cTrialsHandler.getClinicalTrialSFInstance(oChkQIName);
	var oldQINameInstance=null;
	
	if(oChkQIName.rawValue==CHK_ON){
		//create the old name instance
		oldNameInstance=cQIHandler.createOldQIName(parentInstance);
		var currQINameInstance=cQIHandler.getCurrentQINameInstance(parentInstance);
		//copy data from the current name to the old name
		cQIHandler.copyToOldQIName(parentInstance)	//clear the current address as this will be the "new" address
		xfa.host.resetData(currQINameInstance.somExpression);
			//? reset the state of current
		}else{
		//delete the instance
		oldQINameInstance=cQIHandler.getOldQINameInstance(parentInstance);
		if(oldQINameInstance){
		
			if(cQIHandler.isCurrentQINameEmpty(parentInstance)===true){
				cQIHandler.copyToCurrQiName(parentInstance);
			}
			cGeneralUtil.removeSubformInstance(oldQINameInstance);
		}	
	}
	
}
/*
*	Manages Research Ethics Board Name state
*	oChkName- the adobe instance of the checkbox related to the Ethics Board State
*/
function _rebaNameChangeType(oChkName){
	var parentInstance=cTrialsHandler.getClinicalTrialSFInstance(oChkName);
		
	if(oChkName.rawValue==CHK_ON){
		//create the old
		 var oldInstance=cRebaHandler.createOldRebaContact(parentInstance);
		 if(oldInstance){
		 		cRebaHandler.copyToPrevRebaContact(parentInstance);
		 		xfa.host.resetData((cRebaHandler.getCurrRebaContactRoot(parentInstance).somExpression));
			}
	}else{
		 //check if current is empty
			if( cRebaHandler.isCurrentContactEmpty(parentInstance)){
				cRebaHandler.copyToCurrRebaContact(parentInstance);
			}
			
		 cRebaHandler.deleteOldContact(parentInstance);
	}
}

/*
*	Manages the state of the Research Ethics board Address
*	@param- oChkName- the adobe checkbox related to the amend status for REB address
*
*/
function _rebaAddressChangeType(oChkName){
	var parentInstance=cTrialsHandler.getClinicalTrialSFInstance(oChkName);
	
	if(oChkName.rawValue==CHK_ON){
		//create the old
		 var oldInstance=cRebaHandler.createOldRebaAddress(parentInstance);
		 if(oldInstance){
		 		cRebaHandler.copyToPrevRebaAddress(parentInstance);
		 		xfa.host.resetData((cRebaHandler.getCurrRebaAddressRoot(parentInstance).somExpression));
			}
	}else{
		 //check if current is empty
			if( cRebaHandler.isCurrentAddressEmpty(parentInstance)){
				cRebaHandler.copyToCurrRebaAddress(parentInstance);
			}	
		 cRebaHandler.deleteOldAddress(parentInstance);
	}
}//end functoin

/*
*	Manages the Commencment date and Approval date states
*	@param oChkName- the adobe checkbox related to the amendment state of the dates
*
*/
function _dateChangeType(oChkName){
	var parentInstance=cTrialsHandler.getClinicalTrialSFInstance(oChkName);	
	if(oChkName.rawValue==CHK_ON){
		//create the old
		  var oldApprovalInstance=cDateHandler.createPrevApprovalDate(parentInstance);
		  var oldComenceInstance=cDateHandler.createPrevCommenceDate(parentInstance);
		 if(oldApprovalInstance){
		 		cDateHandler.copyToPrevApprovalDate(parentInstance);
		 		xfa.host.resetData((cDateHandler.getCurrApprovalDate(parentInstance).somExpression));
			}
		if(oldComenceInstance){
		 		cDateHandler.copyToPrevCommenceDate(parentInstance);
		 		xfa.host.resetData((cDateHandler.getCurrCommenceDate(parentInstance).somExpression));
			}		
	}else{
		 //check if current is empty
				if(cDateHandler.isCurrCommenceDateEmpty(parentInstance)){
				cDateHandler.copyToCurrCommenceDate(parentInstance);
			}
			if(cDateHandler.isCurrApprovalDateEmpty(parentInstance)){
				cDateHandler.copyToCurrApprovalDate(parentInstance);
			}
			cDateHandler.deletePrevCommenceDate(parentInstance);
			cDateHandler.deletePrevApprovalDate(parentInstance);		
	}
}





/*
* Checks that the form nodes exist
*
*/
function _initializeFormNodes(){

	try{

		cControllerUtil.checkFormNode(AMEND_TYPE_DDL_FN,SCRIPT_OBJECT_NAME,"AMEND_TYPE_DDL_FN");
		cControllerUtil.checkFormNode(CHANGE_REASON_SF_FN,SCRIPT_OBJECT_NAME,"CHANGE_REASON_SF_FN");
		cControllerUtil.checkFormNode(AMEND_TYPE_DDL_FN,SCRIPT_OBJECT_NAME,"AMEND_TYPE_DDL_FN");
		
		cControllerUtil.checkFormNode(DATE_CHGE_CHK_FN,SCRIPT_OBJECT_NAME,"DATE_CHGE_CHK_FN");
		cControllerUtil.checkFormNode(SITE_NAME_CHGE_CHK_FN,SCRIPT_OBJECT_NAME,"SITE_NAME_CHGE_CHK_FN");
		cControllerUtil.checkFormNode(SITE_ADDR_CHGE_CHK_FN,SCRIPT_OBJECT_NAME,"SITE_ADDR_CHGE_CHK_FN");
		cControllerUtil.checkFormNode(QI_NAME_CHGE_CHK_FN,SCRIPT_OBJECT_NAME,"QI_NAME_CHGE_CHK_FN");
		cControllerUtil.checkFormNode(QI_ADDR_CHGE_CHK_FN,SCRIPT_OBJECT_NAME,"QI_ADDR_CHGE_CHK_FN");
		cControllerUtil.checkFormNode(REB_PERSON_CHGE_CHK_FN,SCRIPT_OBJECT_NAME,"REB_PERSON_CHGE_CHK_FN");
		cControllerUtil.checkFormNode(REB_ADDR_CHGE_CHK_FN,SCRIPT_OBJECT_NAME,"REB_ADDR_CHGE_CHK_FN");
						
	 }
	 catch (exception)
	{
		cLog.critical(cResourceManager.get("error_trials", SCRIPT_OBJECT_NAME+".initializeFormNodes()"), exception);
	}

}//end fn

/*
*
*/
 function updateAllSubTypes(){		
	var clinTrialsList=cTrialsHandler.getTrialsInstances()
	for(var i=0;i&lt;clinTrialsList.length;i++){
		updateSubType(clinTrialsList.item(i));
	}
}

/*
* Based on the form amendment type, updates teh Amendment type default
* @param parentInstance - the instance of the clinical site to update
*/
function updateSubType(parentInstance){

	amendDdlInstance=getAmendType(parentInstance);
	
	if(cTrialsHandler.getSubmissionType()===AMEND_CONST){
		//user selected an amendment to this form is being submitted
		//make existing sites Existing, no change	
		 amendDdlInstance.rawValue=AMENDSAME_CONST; 	
	}else{
		 	//otherwise submitting for first time, type is new
		 	amendDdlInstance.rawValue=NEWTRIAL_CONST;	
	}
	initSubType(parentInstance);
	
}
/*
* Initializes the state of the amendment type for a given site
* This differs from updateSubType as it does not change the amend type if it exists already
*/
function initSubType(parentInstance){
	amendDdlInstance=getAmendType(parentInstance);
	if(amendDdlInstance.isNull){
		//if null must have created a new instance, must be a new trial
		amendDdlInstance.rawValue=NEWTRIAL_CONST;
	}
	if(cTrialsHandler.getSubmissionType()===AMEND_CONST){	
		 	
		 	cUiUtil.show(amendDdlInstance);	
	}else{
		 	cUiUtil.hide(amendDdlInstance); 		
	}
		_initReasonState(parentInstance,amendDdlInstance);
}

/* Initializse the reason state subform, and initialise all the states that the checkboxes control
*	@param rootTrialInstance- the subform instance of the clinical trial site
*	@param amendDdlInstance- the adobe instance of the tpye of amendment droplist
*/
function _initReasonState(rootTrialInstance,amendDdlInstance){
	 var changeReasonSfInstance=getChangeTypeSf(rootTrialInstance);
		if(changeReasonSfInstance){
		//manage the UI state of the reason for change	
		if(amendDdlInstance.rawValue==AMEND_CHANGE_CONST){
			cUiUtil.show(changeReasonSfInstance);
		}else{
			cGeneralUtil.hideAndClearNodeInstance(changeReasonSfInstance);
		}
		// intialize the checkbox states of the reason for the change
		_clinicalTrialSiteNameChangeType(SITE_NAME_CHGE_CHK_FN.getNodeInstance(changeReasonSfInstance));
		_dateChangeType(DATE_CHGE_CHK_FN.getNodeInstance(changeReasonSfInstance));
		_clinicalTrialAddressChangeType(SITE_ADDR_CHGE_CHK_FN.getNodeInstance(changeReasonSfInstance));	
		_qiNameChangeType(QI_NAME_CHGE_CHK_FN.getNodeInstance(changeReasonSfInstance));
		_qiAddressChangeType(QI_ADDR_CHGE_CHK_FN.getNodeInstance(changeReasonSfInstance));
		_rebaNameChangeType(REB_PERSON_CHGE_CHK_FN.getNodeInstance(changeReasonSfInstance));
		_rebaAddressChangeType(REB_ADDR_CHGE_CHK_FN.getNodeInstance(changeReasonSfInstance));
	}
	
		
}//end function

</script>
                     <script contentType="application/x-javascript" name="SiteAddressHandler">//imports, core
var cLog = 					script.core.util.Log;
var cResourceManager = 		script.core.lang.ResourceManager;
var cFormNodeManager = 		script.core.model.FormNodeManager;
var cUiUtil=				script.core.util.UiUtil;
var cException = 			script.core.util.Exception;
var cConfigurationManager = script.core.util.ConfigurationManager;
var cControllerUtil = 		script.core.util.ControllerUtil;
var cInstanceManagerUtil=	script.core.util.InstanceManagerUtil;
var cAddressUtil=			script.HCeForm.util.AddressUtil;


//imports, utility
var cAddressUtil= 			script.HCeForm.util.AddressUtil;
var cTrialsHandler=			script.HCeForm.control.TrialsHandler;
var cGeneralUtil=			script.HCeForm.util.General;
//Globals
var LABEL_START=cConfigurationManager.get("LabelStart");
var LABEL_END=cConfigurationManager.get("LabelEnd");

var CANADA=	cConfigurationManager.get("CANADA");
var  USA=	cConfigurationManager.get("USA");


//Handler name
var SCRIPT_OBJECT_NAME=					"siteAddressHandler";

//Action Globals

var CLINICAL_COUNTRY_CHANGED_ACTION=	"clinical_country_changed";
var INITIALISE_COUNTRY_ACTION="country_init";

//address array indexes
var CONST_STREET=0;
var CONST_CITY=1;
var CONST_DDLPROV=2;
var CONST_POSTAL=3;


//FORM NODES (FN)


//current site name
//var CURR_SITE_SF_FN=cFormNodeManager.getFormNodeForKey("sfCurrSiteName");
var CURR_SITE_NAME_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrSiteName");

//old site name
var OLD_SITE_SF_FN=cFormNodeManager.getFormNodeForKey("sfOldSiteName");
var OLD_SITE_NAME_TXT_FN=cFormNodeManager.getFormNodeForKey("txtOldSiteName");

//Current site info
var CURR_SITE_ADDR_SF_FN=cFormNodeManager.getFormNodeForKey("sfCurrSiteAddressDetails");
var CURR_SITE_PROVINCE_FN=cFormNodeManager.getFormNodeForKey("ddlCurrSiteProvince");
var CURR_SITE_POSTAL_CODE_FN=cFormNodeManager.getFormNodeForKey("txtCurrSitePostalCode");
var CURR_SITE_PROVINCE_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrSiteProvince");
var CURR_SITE_COUNTRY_DDL_FN=cFormNodeManager.getFormNodeForKey("ddlCurrSiteCountry");
var CURR_SITE_STREET_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrSiteAddress");
var CURR_SITE_CITY_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrSiteCity");

//Old site info
var OLD_SITE_ADDR_SF_FN=cFormNodeManager.getFormNodeForKey("sfOldSiteAddressDetails"); 
var OLD_SITE_STREET_TXT_FN=cFormNodeManager.getFormNodeForKey("txtOldSiteAddress");
var OLD_SITE_CITY_TXT_FN=cFormNodeManager.getFormNodeForKey("txtOldSiteCity");
var OLD_SITE_PROVINCE_FN=cFormNodeManager.getFormNodeForKey("ddlOldSiteProvince");
var OLD_SITE_POSTAL_CODE_FN=cFormNodeManager.getFormNodeForKey("txtOldSitePostalCode");
var OLD_SITE_PROVINCE_TXT_FN=cFormNodeManager.getFormNodeForKey("txtOldSiteProvince");
var OLD_SITE_COUNTRY_DDL_FN=cFormNodeManager.getFormNodeForKey("ddlOldSiteCountry");

_initializeFormNodes();


/* Action Handler- Place all actions here
*
*
*
*/
function actionPerformed(anEvent)
{
	switch(anEvent.getActionCommand())
	{
		
			case CLINICAL_COUNTRY_CHANGED_ACTION:
				cAddressUtil.countryChanged(CLINICAL_PROVINCE_FN,CLINICAL_POSTAL_CODE_FN);
				cAddressUtil.setProvinceUIState(anEvent.getSource().rawValue,CLINICAL_PROVINCE_FN.getNodeInstance(),CLINICAL_PROVINCE_TXT_FN.getNodeInstance());					
			break;
			
			case INITIALISE_COUNTRY_ACTION:
					 cAddressUtil.setCountryReadonly("CA",anEvent.getSource());
			
			break;
			
				
		default:
			throw cException.createInstance(SCRIPT_OBJECT_NAME
				  + ".actionPerformed() - unrecognized event '" 
				  + anEvent.getActionCommand() + "'.", "UnsupportedAction");
	}//switch
}//end fn


function getCurrentSiteAddressValues(rootSfInstance){

	 var currSiteSfInstance=getCurrentSiteAddressRoot(rootSfInstance);
	 var addr=[CURR_SITE_STREET_TXT_FN.getNodeInstance(currSiteSfInstance).rawValue,CURR_SITE_CITY_TXT_FN.getNodeInstance(currSiteSfInstance).rawValue,
	 CURR_SITE_PROVINCE_FN.getNodeInstance(currSiteSfInstance).rawValue,CURR_SITE_POSTAL_CODE_FN.getNodeInstance(currSiteSfInstance).rawValue];
	 
	 return(addr);
}
function getOldSiteAddressValues(rootSfInstance){

	 var oldSiteSfInstance=getOldNameSiteRoot(rootSfInstance);
	 var addr=[OLD_SITE_STREET_TXT_FN.getNodeInstance(oldSiteSfInstance).rawValue,OLD_SITE_CITY_TXT_FN.getNodeInstance(oldSiteSfInstance).rawValue,
	 OLD_SITE_PROVINCE_FN.getNodeInstance(oldSiteSfInstance).rawValue,OLD_SITE_POSTAL_CODE_FN.getNodeInstance(oldSiteSfInstance).rawValue];
	 
	 return(addr);
}



function createOldSiteName(rootSfInstance){

	var instanceManager=OLD_SITE_SF_FN.getInstanceManager(rootSfInstance);
	return(cGeneralUtil.addSubformInstance(instanceManager));
}

function getOldNameSiteRoot(parentInstance){
	
	return(OLD_SITE_SF_FN.getNodeInstance(parentInstance));
}

/*
* Copies the current site name to the old site name for a given clinical site
* @param -parentInstance- a ancestor node of the names to copy
*
*/
function copySiteNameToOld(parentInstance){
		OLD_SITE_NAME_TXT_FN.getNodeInstance(parentInstance).rawValue=getCurrSiteName(parentInstance).rawValue;
}

function getCurrSiteName(parentInstance){

	return(CURR_SITE_NAME_TXT_FN.getNodeInstance(parentInstance))
}

function createOldAddress(rootSfInstance){
	var instanceManager=OLD_SITE_ADDR_SF_FN.getInstanceManager(rootSfInstance);
	
	var newInstance=cGeneralUtil.addSubformInstance(instanceManager);
	if(newInstance) initializeOldAddress(newInstance);
	
	return(newInstance);	
}

function getCurrentSiteAddressRoot(parentInstance){

	return(CURR_SITE_ADDR_SF_FN.getNodeInstance(parentInstance))

}
function getOldSiteAddressRoot(parentInstance){

	return(OLD_SITE_ADDR_SF_FN.getNodeInstance(parentInstance))
}

function copySiteAddress(currSiteSFInstance,oldSiteSFInstance){
		
	OLD_SITE_PROVINCE_FN.getNodeInstance(oldSiteSFInstance).rawValue=CURR_SITE_PROVINCE_FN.getNodeInstance(currSiteSFInstance).rawValue;
	OLD_SITE_POSTAL_CODE_FN.getNodeInstance(oldSiteSFInstance).rawValue=CURR_SITE_POSTAL_CODE_FN.getNodeInstance(currSiteSFInstance).rawValue;
	OLD_SITE_PROVINCE_TXT_FN.getNodeInstance(oldSiteSFInstance).rawValue=CURR_SITE_PROVINCE_TXT_FN.getNodeInstance(currSiteSFInstance).rawValue;
	OLD_SITE_COUNTRY_DDL_FN.getNodeInstance(oldSiteSFInstance).rawValue=CURR_SITE_COUNTRY_DDL_FN.getNodeInstance(currSiteSFInstance).rawValue;
	OLD_SITE_STREET_TXT_FN.getNodeInstance(oldSiteSFInstance).rawValue=CURR_SITE_STREET_TXT_FN.getNodeInstance(currSiteSFInstance).rawValue;
	OLD_SITE_CITY_TXT_FN.getNodeInstance(oldSiteSFInstance).rawValue=CURR_SITE_CITY_TXT_FN.getNodeInstance(currSiteSFInstance).rawValue;
	
	
}
//function initialise(){
		
	//set the province UI visibility based on the country value
	//cAddressUtil.setProvinceUIState(CLINICAL_COUNTRY_DDL_FN.getNodeInstance().rawValue,CLINICAL_PROVINCE_FN.getNodeInstance(),CLINICAL_PROVINCE_TXT_FN.getNodeInstance());
	//update all the tooltips based on the provided label
	//var contactHeadingLabel= cResourceManager.get("lbFor")+CLINICAL_CONTACTHEADING_LBL_FN.getLabel();
	//cAddressUtil.updateAllFieldTooltips(CLINICAL_ADDRESSDETAILS_SF_FN.getNodeInstance(),contactHeadingLabel,LABEL_END);
	
//	 _initialiseAllSiteInfo()
	
//}

/*
*
*
*
*/
function initialise(parentInstance){
		
	 _initialiseSiteInfo(parentInstance);
	
}


function initializeOldAddress(sfParentInstance){
		
			//update old clinical country
				var oldCountryInstance=OLD_SITE_COUNTRY_DDL_FN.getNodeInstance(sfParentInstance);
			cAddressUtil.setCountryReadonly(CANADA,oldCountryInstance);//call first affects province
			cAddressUtil.countryChanged(OLD_SITE_PROVINCE_FN,OLD_SITE_POSTAL_CODE_FN);
			cAddressUtil.setProvinceUIState(OLD_SITE_COUNTRY_DDL_FN.getNodeInstance(sfParentInstance).rawValue,OLD_SITE_PROVINCE_FN.getNodeInstance(sfParentInstance),OLD_SITE_PROVINCE_TXT_FN.getNodeInstance(sfParentInstance));

}

function intializeSiteAddress(sfParentInstance){

		var countryInstance=CURR_SITE_COUNTRY_DDL_FN.getNodeInstance(sfParentInstance);
		//update clinical country
		cAddressUtil.setCountryReadonly(CANADA,countryInstance);//call first affects province
		cAddressUtil.countryChanged(CURR_SITE_PROVINCE_FN,CURR_SITE_POSTAL_CODE_FN);
		cAddressUtil.setProvinceUIState(CURR_SITE_COUNTRY_DDL_FN.getNodeInstance(sfParentInstance).rawValue,
		CURR_SITE_PROVINCE_FN.getNodeInstance(sfParentInstance),CURR_SITE_PROVINCE_TXT_FN.getNodeInstance(sfParentInstance));
}


//Jan 20
function _initialiseAllSiteInfo(){

	//Set the Clinical trial current Country to Canada and read only
	var trialsList=cTrialsHandler.getTrialsInstances();
	for(var i=0; i&lt;trialsList.length;i++){
		  _initialiseSiteInfo(trialsList.item(i));
	}
}

function  _initialiseSiteInfo(parentInstance){

		intializeSiteAddress(parentInstance)
		//old address
		var oldSiteAddress=OLD_SITE_ADDR_SF_FN.getNodeInstance(parentInstance);
		if(oldSiteAddress){
			initializeOldAddress(oldSiteAddress);
		}

}


/*
* Checks to see if a form node exists. If it doesn't exist than throw an exception. Otherwise this will fail silently
*
*/

function _initializeFormNodes(){

		try{
		cControllerUtil.checkFormNode(CURR_SITE_COUNTRY_DDL_FN,SCRIPT_OBJECT_NAME,"CURR_SITE_COUNTRY_DDL_FN");
		cControllerUtil.checkFormNode(CURR_SITE_PROVINCE_FN,SCRIPT_OBJECT_NAME,"CURR_SITE_PROVINCE_FN");
		cControllerUtil.checkFormNode(CURR_SITE_POSTAL_CODE_FN,SCRIPT_OBJECT_NAME,"CURR_SITE_POSTAL_CODE_FN");
		cControllerUtil.checkFormNode(CURR_SITE_PROVINCE_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_SITE_PROVINCE_TXT_FN");
		cControllerUtil.checkFormNode(CURR_SITE_ADDR_SF_FN,SCRIPT_OBJECT_NAME,"CURR_SITE_ADDR_SF_FN");
		
		cControllerUtil.checkFormNode(OLD_SITE_ADDR_SF_FN,SCRIPT_OBJECT_NAME,"OLD_SITE_ADDR_SF_FN");
		cControllerUtil.checkFormNode(OLD_SITE_PROVINCE_FN,SCRIPT_OBJECT_NAME,"OLD_SITE_PROVINCE_FN");
		cControllerUtil.checkFormNode(OLD_SITE_POSTAL_CODE_FN,SCRIPT_OBJECT_NAME,"OLD_SITE_POSTAL_CODE_FN")
		cControllerUtil.checkFormNode(OLD_SITE_PROVINCE_TXT_FN,SCRIPT_OBJECT_NAME,"OLD_SITE_PROVINCE_TXT_FN")
		cControllerUtil.checkFormNode(OLD_SITE_COUNTRY_DDL_FN,SCRIPT_OBJECT_NAME,"OLD_SITE_COUNTRY_DDL_FN")
		
		cControllerUtil.checkFormNode(CURR_SITE_CITY_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_SITE_CITY_TXT_FN")
		cControllerUtil.checkFormNode(CURR_SITE_STREET_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_SITE_STREET_TXT_FN")
		cControllerUtil.checkFormNode(OLD_SITE_STREET_TXT_FN,SCRIPT_OBJECT_NAME,"OLD_SITE_STREET_TXT_FN")
		cControllerUtil.checkFormNode(OLD_SITE_CITY_TXT_FN,SCRIPT_OBJECT_NAME,"OLD_SITE_CITY_TXT_FN")
		
		cControllerUtil.checkFormNode(CURR_SITE_NAME_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_SITE_NAME_TXT_FN")
		cControllerUtil.checkFormNode(OLD_SITE_SF_FN,SCRIPT_OBJECT_NAME,"OLD_SITE_SF_FN")
		cControllerUtil.checkFormNode(OLD_SITE_NAME_TXT_FN,SCRIPT_OBJECT_NAME,"OLD_SITE_NAME_TXT_FN")
		
		//cControllerUtil.checkFormNode(CURR_SITE_SF_FN,SCRIPT_OBJECT_NAME,"CURR_SITE_SF_FN")
		
	
	 }
	 catch (exception)
	{
		cLog.critical(cResourceManager.get("error_application", SCRIPT_OBJECT_NAME+"._initializeFormNode()"), exception);
	}

}


/*
* Sets the passed in adobe node to readonly and sets the value of the field
*@param- countryValue- the saved (rawValue) to set
*@param- countryInstance- the country Instance to process
*/
/*
Moved to addressUtil

function _setCountryReadonly(countryValue,countryInstance){

	countryInstance.rawValue=countryValue;
	var country_FN=cFormNodeManager.getFormNodeForSom(countryInstance.somExpression);		
	country_FN.lock(countryInstance);
}


*/
                  
               
               
</script>
                     <script contentType="application/x-javascript" name="QIHandler">

//imports, core
var cLog = 					script.core.util.Log;
var cResourceManager = 		script.core.lang.ResourceManager;
var cFormNodeManager = 		script.core.model.FormNodeManager;
var cUiUtil=				script.core.util.UiUtil;
var cException = 			script.core.util.Exception;
var cConfigurationManager = script.core.util.ConfigurationManager;
var cControllerUtil = 		script.core.util.ControllerUtil;
var cInstanceManagerUtil=	script.core.util.InstanceManagerUtil;
var cStringUtil=			script.core.util.StringUtil;

//imports, utility
var cAddressUtil= 			script.HCeForm.util.AddressUtil;
var cTrialsHandler=			script.HCeForm.control.TrialsHandler;
var cGeneralUtil=			script.HCeForm.util.General;
var cSiteHandler=			script.HCeForm.control.Part3.SiteAddressHandler; 

//Globals
var LABEL_START=cConfigurationManager.get("LabelStart");
var LABEL_END=	cConfigurationManager.get("LabelEnd");

var CANADA=		cConfigurationManager.get("CANADA");
var  USA=		cConfigurationManager.get("USA");
var CHK_ON=		cConfigurationManager.get("CHK_ON");
var CHK_OFF=		cConfigurationManager.get("CHK_OFF");
//Handler name
var SCRIPT_OBJECT_NAME=					"QIHandler";

//Action Globals

var  CURRADDR_SAMEAS_ACTION=	"curr_sameas_changed";


//FORM NODES (FN)

//current QI Name nodes
var CURR_QINAME_SF_FN=cFormNodeManager.getFormNodeForKey("sfCurrQIName");
var CURR_QINAME_GIVEN_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrQIGivenName");
var CURR_QINAME_INITIALS_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrQIInitials");
var CURR_QINAME_SURNAME_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrQISurname");
var CURR_QINAME_DESIGN_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrQIDesignation");
var CURR_QINAME_TITLE_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrQITitle");
var CURR_QINAME_LANG_DDL_FN=cFormNodeManager.getFormNodeForKey("ddlCurrQILangPref");
var CURR_QINAME_PHONE_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrQITelephone");
var CURR_QINAME_EXTENSION_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrQIExtension");
var CURR_QINAME_FAX_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrQIFax");
var CURR_QINAME_EMAIL_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrQIEmail");

//old QIName nodes
var PREV_QINAME_SF_FN=cFormNodeManager.getFormNodeForKey("sfOldQIName");
var PREV_QINAME_GIVEN_TXT_FN=cFormNodeManager.getFormNodeForKey("txtOldQIGivenName");
var PREV_QINAME_INITIALS_TXT_FN=cFormNodeManager.getFormNodeForKey("txtOldQIInitials");
var PREV_QINAME_SURNAME_TXT_FN=cFormNodeManager.getFormNodeForKey("txtOldQISurname");
var PREV_QINAME_DESIGN_TXT_FN=cFormNodeManager.getFormNodeForKey("txtOldQIDesignation");
var PREV_QINAME_TITLE_TXT_FN=cFormNodeManager.getFormNodeForKey("txtOldQITitle");
//hidden fields used for copying
var PREV_QINAME_HIDE_SF_FN=cFormNodeManager.getFormNodeForKey("sfOldQINameHide");	
var PREV_QINAME_LANG_DDL_FN=cFormNodeManager.getFormNodeForKey("ddlPrevQILangPref");	
var PREV_QINAME_PHONE_TXT_FN=cFormNodeManager.getFormNodeForKey("txtPrevQITelephone");	
var PREV_QINAME_EXTENSION_TXT_FN=cFormNodeManager.getFormNodeForKey("txtPrevQIExtension");	
var PREV_QINAME_FAX_TXT_FN=cFormNodeManager.getFormNodeForKey("txtPrevQIFax");
var PREV_QINAME_EMAIL_TXT_FN=cFormNodeManager.getFormNodeForKey("txtPrevQIEmail");

//current QI address nodes
var CURR_ADDR_SAMEAS_CHK_FN=cFormNodeManager.getFormNodeForKey("chkCurrQIAddrSameAs");
var CURR_ADDR_SF_FN=cFormNodeManager.getFormNodeForKey("sfCurrQIAddressDetails");
var CURR_STREET_TXT_FN=		cFormNodeManager.getFormNodeForKey("txtCurrQIAddress");
var CURR_CITY_TXT_FN=		cFormNodeManager.getFormNodeForKey("txtCurrQICity");
var CURR_COUNTRY_DDL_FN=	cFormNodeManager.getFormNodeForKey("ddlCurrQICountry");
var CURR_PROV_DDL_FN=		cFormNodeManager.getFormNodeForKey("ddlCurrQIProvince");
var CURR_PROV_TXT_FN=		cFormNodeManager.getFormNodeForKey("txtCurrQIProvince");
var CURR_POSTAL_TXT_FN=		cFormNodeManager.getFormNodeForKey("txtCurrQIPostalCode");

//previous QI address nodes
var PREV_ADDR_SF_FN=		cFormNodeManager.getFormNodeForKey("sfPrevQIAddressDetails");
var PREV_STREET_TXT_FN=		cFormNodeManager.getFormNodeForKey("txtPrevQIAddress");
var PREV_CITY_TXT_FN=		cFormNodeManager.getFormNodeForKey("txtPrevQICity");
var PREV_COUNTRY_DDL_FN=	cFormNodeManager.getFormNodeForKey("ddlPrevQICountry");
var PREV_PROV_DDL_FN=		cFormNodeManager.getFormNodeForKey("ddlPrevQIProvince");
var PREV_PROV_TXT_FN=		cFormNodeManager.getFormNodeForKey("txtPrevQIProvince");
var PREV_POSTAL_TXT_FN=		cFormNodeManager.getFormNodeForKey("txtPrevQIPostalCode");


_initializeFormNodes();


/* Action Handler- Place all actions here
*
*
*
*/
function actionPerformed(anEvent)
{
	switch(anEvent.getActionCommand())
	{
		
			case CURRADDR_SAMEAS_ACTION:
					_setQISameAsUIState(anEvent.getSource());				
			break;
						
				
		default:
			throw cException.createInstance(SCRIPT_OBJECT_NAME
				  + ".actionPerformed() - unrecognized event '" 
				  + anEvent.getActionCommand() + "'.", "UnsupportedAction");
	}//switch
}//end fn

/*
* Creates the previous Name fields for amendment changes
* @param- parentSfInstance- the adobe instance of the clinical trial
*/
function createOldQIName(parentSfInstance){

	if(!parentSfInstance) return null;
	var instanceManager=PREV_QINAME_SF_FN.getInstanceManager(parentSfInstance);
	var newInstance=cGeneralUtil.addSubformInstance(instanceManager);
	_intializePrevNameInstance(newInstance);
	return(newInstance);		
}
/*
* 
*
*/
function _intializePrevNameInstance(qiNameInstance){

	var hiddenSfInstance=PREV_QINAME_HIDE_SF_FN.getNodeInstance(qiNameInstance);
	cUiUtil.hide(hiddenSfInstance);

}


function getOldQINameInstance(parentSfInstance){
	
	if(!parentSfInstance) return null;
	return(PREV_QINAME_SF_FN.getNodeInstance(parentSfInstance));

}

function getCurrentQINameInstance(parentSfInstance){

	if(!parentSfInstance) return null;
	return(CURR_QINAME_SF_FN.getNodeInstance(parentSfInstance));
}

function getCurrentQAddressSfInstance(parentSfInstance){

	if(!parentSfInstance) return null;
	return(CURR_ADDR_SF_FN.getNodeInstance(parentSfInstance));
}

function getOldQIAddressSfInstance(parentSfInstance){

	if(!parentSfInstance) return null;
	return(PREV_ADDR_SF_FN.getNodeInstance(parentSfInstance));
}

function resetCurrentQiAddress(rootInstance){
	//reset the checkbox
	var sameAsChkInstance=CURR_ADDR_SAMEAS_CHK_FN.getNodeInstance(rootInstance);
	sameAsChkInstance.rawValue=CHK_OFF;
	_setQISameAsUIState(sameAsChkInstance);
}

function copyToOldQIName(rootSfInstance){

	var currElementsList=_getAllCurrQINameElements(rootSfInstance);
	var prevElementsList=_getAllPrevQINameElements(rootSfInstance);
	for(var i=0;i&lt;prevElementsList.length;i++){
		prevElementsList[i].rawValue=currElementsList[i].rawValue;
	
	}
}

function copyToCurrQiName(rootSfInstance){
	var currElementsList=_getAllCurrQINameElements(rootSfInstance);
	var prevElementsList=_getAllPrevQINameElements(rootSfInstance);
	for(var i=0;i&lt;prevElementsList.length;i++){
		currElementsList[i].rawValue=prevElementsList[i].rawValue;
	
	}
	
}
/*
* for a given clinical trial site, determines if all the QI name 
* Fields are empty
* @param rootSfInstance the root suform of the clinical trial
*
*/
function isCurrentQINameEmpty(rootSfInstance){

	var currList=_getAllCurrQINameElements(rootSfInstance)
	for(var i=0;i&lt;currList.length;i++){
		var val=cStringUtil.trim(currList[i].rawValue);
		if(val){
			return false;
		}
	}
	return true;	
}

function _getAllCurrQINameElements(rootSfInstance){
	
	var currQINameSfInstance=CURR_QINAME_SF_FN.getNodeInstance(rootSfInstance);
	if(!currQINameSfInstance) return (new Array());
	return(
	new Array(
		CURR_QINAME_GIVEN_TXT_FN.getNodeInstance(currQINameSfInstance),		
		CURR_QINAME_INITIALS_TXT_FN.getNodeInstance(currQINameSfInstance),
		CURR_QINAME_SURNAME_TXT_FN.getNodeInstance(currQINameSfInstance),
		CURR_QINAME_DESIGN_TXT_FN.getNodeInstance(currQINameSfInstance),
		CURR_QINAME_TITLE_TXT_FN.getNodeInstance(currQINameSfInstance),
		CURR_QINAME_LANG_DDL_FN.getNodeInstance(currQINameSfInstance),
		CURR_QINAME_PHONE_TXT_FN.getNodeInstance(currQINameSfInstance),
		CURR_QINAME_EXTENSION_TXT_FN.getNodeInstance(currQINameSfInstance),
		CURR_QINAME_FAX_TXT_FN.getNodeInstance(currQINameSfInstance),
		CURR_QINAME_EMAIL_TXT_FN.getNodeInstance(currQINameSfInstance)
	));
}
function _getAllPrevQINameElements(rootSfInstance){
	
	var prevQIRootSfInstance=PREV_QINAME_SF_FN.getNodeInstance(rootSfInstance);
	if(!prevQIRootSfInstance) return (new Array());
	return(
	new Array(
		PREV_QINAME_GIVEN_TXT_FN.getNodeInstance(prevQIRootSfInstance),		
		PREV_QINAME_INITIALS_TXT_FN.getNodeInstance(prevQIRootSfInstance),
		PREV_QINAME_SURNAME_TXT_FN.getNodeInstance(prevQIRootSfInstance),
		PREV_QINAME_DESIGN_TXT_FN.getNodeInstance(prevQIRootSfInstance),
		PREV_QINAME_TITLE_TXT_FN.getNodeInstance(prevQIRootSfInstance),
		PREV_QINAME_LANG_DDL_FN.getNodeInstance(prevQIRootSfInstance),
		PREV_QINAME_PHONE_TXT_FN.getNodeInstance(prevQIRootSfInstance),
		PREV_QINAME_EXTENSION_TXT_FN.getNodeInstance(prevQIRootSfInstance),
		PREV_QINAME_FAX_TXT_FN.getNodeInstance(prevQIRootSfInstance),
		PREV_QINAME_EMAIL_TXT_FN.getNodeInstance(prevQIRootSfInstance)
	));

}//end function

function _getAllPrevQIAddressElements(rootSfInstance){
	
	var prevQIRootSfInstance=PREV_ADDR_SF_FN.getNodeInstance(rootSfInstance);
	if(!prevQIRootSfInstance) return (new Array());
	return(
	new Array(
		PREV_STREET_TXT_FN.getNodeInstance(prevQIRootSfInstance),		
		PREV_CITY_TXT_FN.getNodeInstance(prevQIRootSfInstance),
		PREV_PROV_DDL_FN.getNodeInstance(prevQIRootSfInstance),
		PREV_POSTAL_TXT_FN.getNodeInstance(prevQIRootSfInstance)
	));

}


function _getAllCurrQIAddressElements(rootSfInstance){
	
	var currQIRootSfInstance=CURR_ADDR_SF_FN.getNodeInstance(rootSfInstance);
	if(!currQIRootSfInstance) return (new Array());
	return(
	new Array(
		CURR_STREET_TXT_FN.getNodeInstance(currQIRootSfInstance),		
		CURR_CITY_TXT_FN.getNodeInstance(currQIRootSfInstance),
		CURR_PROV_DDL_FN.getNodeInstance(currQIRootSfInstance),
		CURR_POSTAL_TXT_FN.getNodeInstance(currQIRootSfInstance)
	));

}

function copyToCurrQiAddress(rootSfInstance){
	var currElementsList=_getAllCurrQIAddressElements(rootSfInstance);
	var prevElementsList=_getAllPrevQIAddressElements(rootSfInstance);
	for(var i=0;i&lt;prevElementsList.length;i++){
		currElementsList[i].rawValue=prevElementsList[i].rawValue;
	}
}//fn

function isCurrentQIAddressEmpty(rootSfInstance){

	var currList=_getAllCurrQIAddressElements(rootSfInstance);
	for(var i=0;i&lt;currList.length;i++){
		var val=cStringUtil.trim(currList[i].rawValue);
		if(val){
			return false;
		}
	}
	return true;	
}


function initialise(parentInstance){

	_setQISameAsUIState(CURR_ADDR_SAMEAS_CHK_FN.getNodeInstance(parentInstance));
	var currQIAddrInstance= getCurrentQAddressSfInstance(parentInstance);
	if( currQIAddrInstance){
		initializeCurrQIAddress(parentInstance);
	}
	var oldQIAddrInstance= getOldQIAddressSfInstance(parentInstance);
	if(oldQIAddrInstance){
		_initializeOldQIAddress(oldQIAddrInstance);	}
}

/*
* Checks to see if a form node exists. If it doesn't exist than throw an exception. Otherwise this will fail silently
*
*/

function _initializeFormNodes(){

		try{
			
		cControllerUtil.checkFormNode(PREV_QINAME_SF_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_SF_FN");
		cControllerUtil.checkFormNode(PREV_QINAME_GIVEN_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_GIVEN_TXT_FN");
		cControllerUtil.checkFormNode(PREV_QINAME_INITIALS_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_INITIALS_TXT_FN");
		cControllerUtil.checkFormNode(PREV_QINAME_SURNAME_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_SURNAME_TXT_FN");
		cControllerUtil.checkFormNode(PREV_QINAME_DESIGN_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_DESIGN_TXT_FN");
		cControllerUtil.checkFormNode(PREV_QINAME_TITLE_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_TITLE_TXT_FN")
		
		cControllerUtil.checkFormNode(PREV_QINAME_HIDE_SF_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_HIDE_SF_FN");
		cControllerUtil.checkFormNode(PREV_QINAME_LANG_DDL_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_LANG_DDL_FN");
		cControllerUtil.checkFormNode(PREV_QINAME_PHONE_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_PHONE_TXT_FN");
		cControllerUtil.checkFormNode(PREV_QINAME_EXTENSION_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_EXTENSION_TXT_FN");
		cControllerUtil.checkFormNode(PREV_QINAME_FAX_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_FAX_TXT_FN");
		cControllerUtil.checkFormNode(PREV_QINAME_EMAIL_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_QINAME_EMAIL_TXT_FN");
		
		
		cControllerUtil.checkFormNode(CURR_QINAME_SF_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_SF_FN");
		cControllerUtil.checkFormNode(CURR_QINAME_GIVEN_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_GIVEN_TXT_FN");
		cControllerUtil.checkFormNode(CURR_QINAME_INITIALS_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_INITIALS_TXT_FN");
		cControllerUtil.checkFormNode(CURR_QINAME_SURNAME_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_SURNAME_TXT_FN");
		cControllerUtil.checkFormNode(CURR_QINAME_DESIGN_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_DESIGN_TXT_FN");
		cControllerUtil.checkFormNode(CURR_QINAME_TITLE_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_TITLE_TXT_FN");
		//new
		cControllerUtil.checkFormNode(CURR_QINAME_LANG_DDL_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_LANG_DDL_FN");
		cControllerUtil.checkFormNode(CURR_QINAME_PHONE_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_PHONE_TXT_FN");
		cControllerUtil.checkFormNode(CURR_QINAME_EXTENSION_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_EXTENSION_TXT_FN");
		cControllerUtil.checkFormNode(CURR_QINAME_FAX_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_FAX_TXT_FN");
		cControllerUtil.checkFormNode(CURR_QINAME_EMAIL_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_QINAME_EMAIL_TXT_FN");
		
		cControllerUtil.checkFormNode(CURR_ADDR_SAMEAS_CHK_FN,SCRIPT_OBJECT_NAME,"CURR_ADDR_SAMEAS_CHK_FN");
		cControllerUtil.checkFormNode(CURR_ADDR_SF_FN,SCRIPT_OBJECT_NAME,"CURR_ADDR_SF_FN");
		cControllerUtil.checkFormNode(PREV_ADDR_SF_FN,SCRIPT_OBJECT_NAME,"PREV_ADDR_SF_FN");
		
		//Previous QI address
		cControllerUtil.checkFormNode(PREV_STREET_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_STREET_TXT_FN");
		cControllerUtil.checkFormNode(PREV_CITY_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_CITY_TXT_FN");
		cControllerUtil.checkFormNode(PREV_COUNTRY_DDL_FN,SCRIPT_OBJECT_NAME,"PREV_COUNTRY_DDL_FN");
		cControllerUtil.checkFormNode(PREV_PROV_DDL_FN,SCRIPT_OBJECT_NAME,"PREV_PROV_DDL_FN");
		cControllerUtil.checkFormNode(PREV_PROV_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_PROV_TXT_FN");
		cControllerUtil.checkFormNode(PREV_POSTAL_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_POSTAL_TXT_FN");
		
		//Current QI Address
		cControllerUtil.checkFormNode(CURR_STREET_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_STREET_TXT_FN");
		cControllerUtil.checkFormNode(CURR_CITY_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_CITY_TXT_FN");
		cControllerUtil.checkFormNode(CURR_COUNTRY_DDL_FN,SCRIPT_OBJECT_NAME,"CURR_COUNTRY_DDL_FN");
		cControllerUtil.checkFormNode(CURR_PROV_DDL_FN,SCRIPT_OBJECT_NAME,"CURR_PROV_DDL_FN");
		cControllerUtil.checkFormNode(CURR_PROV_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_PROV_TXT_FN");
		cControllerUtil.checkFormNode(CURR_POSTAL_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_POSTAL_TXT_FN");
		
		
		
		
		
	 }
	 catch (exception)
	{
		cLog.critical(cResourceManager.get("error_application", SCRIPT_OBJECT_NAME+"._initializeFormNode()"), exception);
	}

}



function createOldQIAddress(parentInstance){
	
	var instanceManager=PREV_ADDR_SF_FN.getInstanceManager(parentInstance);	
	var prevAddrInstance=cGeneralUtil.addSubformInstance(instanceManager);
	if(prevAddrInstance){
		_initializeOldQIAddress(prevAddrInstance);
	}

}
/**
* Copies the to the old QI address the appropriate information
* @param rootInstance- the root subform instance of the clinical trial
**/
function copyToOldQIAddress(rootInstance){

	var prevQIAddrSfInstance= PREV_ADDR_SF_FN.getNodeInstance(rootInstance);
	if(!prevQIAddrSfInstance) return; // error check if previous address doesn't exist get out	
	//previous QI Address fields instances, Country is always Canada
	var prevQIStreetTxtInstance=PREV_STREET_TXT_FN.getNodeInstance(prevQIAddrSfInstance);	
	var  prevQICityTxtInstance=PREV_CITY_TXT_FN.getNodeInstance(prevQIAddrSfInstance);	
	var  prevQIProvinceDdlInstance=PREV_PROV_DDL_FN.getNodeInstance(prevQIAddrSfInstance);		
	var  prevQIPostalTxtInstance=PREV_POSTAL_TXT_FN.getNodeInstance(prevQIAddrSfInstance);	
	cLog.trace("created all the previous nodes "+prevQIStreetTxtInstance );
	if(CURR_ADDR_SAMEAS_CHK_FN.getNodeInstance(rootInstance).rawValue==CHK_ON){

		var siteAddressRootSf=cSiteHandler.getOldSiteAddressRoot(rootInstance);
		if(siteAddressRootSf){
			//TODO: copy information from the old address, there is a change in site address as well
			var oldAddrList=cSiteHandler.getOldSiteAddressValues(rootInstance);
			prevQIStreetTxtInstance.rawValue=oldAddrList[cSiteHandler.CONST_STREET];
			prevQICityTxtInstance.rawValue=	 oldAddrList[cSiteHandler.CONST_CITY];	
			prevQIProvinceDdlInstance.rawValue= oldAddrList[cSiteHandler.CONST_DDLPROV];
			prevQIPostalTxtInstance.rawValue= oldAddrList[cSiteHandler.CONST_POSTAL];	
		}else{
			//copy information from the current address as there is no change to site address
			var currAddrList=cSiteHandler.getCurrentSiteAddressValues(rootInstance);
			prevQIStreetTxtInstance.rawValue=currAddrList[cSiteHandler.CONST_STREET];
			prevQICityTxtInstance.rawValue=	 currAddrList[cSiteHandler.CONST_CITY];	
			prevQIProvinceDdlInstance.rawValue= currAddrList[cSiteHandler.CONST_DDLPROV];
			prevQIPostalTxtInstance.rawValue= currAddrList[cSiteHandler.CONST_POSTAL];
		}	
	}else{
		//copy from the current QI address. Same as was not selected
		var currQIAddrSfInstance=getCurrentQAddressSfInstance(rootInstance);
		cLog.trace("get curr instance "+	currQIAddrSfInstance);	
		prevQIStreetTxtInstance.rawValue=CURR_STREET_TXT_FN.getNodeInstance(currQIAddrSfInstance).rawValue;
		prevQICityTxtInstance.rawValue=CURR_CITY_TXT_FN.getNodeInstance(currQIAddrSfInstance).rawValue;
		prevQIProvinceDdlInstance.rawValue=	CURR_PROV_DDL_FN.getNodeInstance(currQIAddrSfInstance).rawValue;
		prevQIPostalTxtInstance.rawValue=CURR_POSTAL_TXT_FN.getNodeInstance(currQIAddrSfInstance).rawValue;
	}
}

/*
* Sets the current QI address state to be same as the site
* This deletes the current address field details
*@param- the sameAs checkbox for the current address. State determines if address details exists or are deleted
*/
function _setQISameAsUIState(oSameAsChk){

	var parentInstance=cTrialsHandler.getClinicalTrialSFInstance(oSameAsChk);
	var currAddrInstance=null;
	if(oSameAsChk.rawValue===CHK_ON){
		//delete it
		 currAddrInstance=CURR_ADDR_SF_FN.getNodeInstance(parentInstance);
		 if( currAddrInstance){
		 	cGeneralUtil.removeSubformInstance(currAddrInstance);
		 }
	}
	else{
		//create it if it doesn't exist	
		var instanceManager=CURR_ADDR_SF_FN.getInstanceManager(parentInstance);	
		currAddrInstance=cGeneralUtil.addSubformInstance(instanceManager);
		initializeCurrQIAddress(currAddrInstance);
	}	
}//end fn

/*
* Initializes the Previouse QI address. Does not check 
*@param rootInstance- the root SF object for the Prev QI Address
*/

function _initializeOldQIAddress(rootInstance){
	
			if(!rootInstance) return;
			var oldCountryInstance=PREV_COUNTRY_DDL_FN.getNodeInstance(rootInstance);
			var provDdlInstance=PREV_PROV_DDL_FN.getNodeInstance(rootInstance);
			var postalTxtInstance=PREV_POSTAL_TXT_FN.getNodeInstance(rootInstance);	
			
			cAddressUtil.setCountryReadonly(CANADA,oldCountryInstance);//call first affects province
			cAddressUtil.countryChanged(PREV_PROV_DDL_FN,PREV_POSTAL_TXT_FN,provDdlInstance,postalTxtInstance);
			cAddressUtil.setProvinceUIState(oldCountryInstance.rawValue,provDdlInstance,PREV_PROV_TXT_FN.getNodeInstance(rootInstance));	
			PREV_ADDR_SF_FN.lock(rootInstance);
			//TODO manage hidden fields
			
}

function initializeCurrQIAddress(rootInstance){
			if(!rootInstance) return;	
			var currCountryInstance=CURR_COUNTRY_DDL_FN.getNodeInstance(rootInstance);
				cAddressUtil.setCountryReadonly(CANADA,currCountryInstance);//call first affects province
				var provDdlInstance=CURR_PROV_DDL_FN.getNodeInstance(rootInstance);
				var postalTxtInstance=CURR_POSTAL_TXT_FN.getNodeInstance(rootInstance);
				cAddressUtil.countryChanged(CURR_PROV_DDL_FN,CURR_POSTAL_TXT_FN,provDdlInstance,postalTxtInstance);				
				cAddressUtil.setProvinceUIState(currCountryInstance.rawValue,provDdlInstance,CURR_PROV_TXT_FN.getNodeInstance(rootInstance));
}

</script>
                     <script contentType="application/x-javascript" name="REBAHandler">

//imports, core
var cLog = 					script.core.util.Log;
var cResourceManager = 		script.core.lang.ResourceManager;
var cFormNodeManager = 		script.core.model.FormNodeManager;
var cUiUtil=				script.core.util.UiUtil;
var cException = 			script.core.util.Exception;
var cConfigurationManager = script.core.util.ConfigurationManager;
var cControllerUtil = 		script.core.util.ControllerUtil;
var cInstanceManagerUtil=	script.core.util.InstanceManagerUtil;
var cStringUtil=			script.core.util.StringUtil;

//imports, utility
var cAddressUtil= 			script.HCeForm.util.AddressUtil;
var cTrialsHandler=			script.HCeForm.control.TrialsHandler;
var cGeneralUtil=			script.HCeForm.util.General;
var cSiteHandler=			script.HCeForm.control.Part3.SiteAddressHandler; 

//Globals
var LABEL_START=			cConfigurationManager.get("LabelStart");
var LABEL_END=				cConfigurationManager.get("LabelEnd");

var CANADA=					cConfigurationManager.get("CANADA");
var USA=					cConfigurationManager.get("USA");
var CHK_ON=					cConfigurationManager.get("CHK_ON");
var CHK_OFF=				cConfigurationManager.get("CHK_OFF");
//Handler name
var SCRIPT_OBJECT_NAME=					"REBAHandler";

//Action Globals
var  REBA_COUNTRY_CHANGE_ACTION=	"currCountryChange";


//FORM NODES (FN)

//prev Name nodes
var PREV_CONTACT_ROOT_SF_FN=cFormNodeManager.getFormNodeForKey("sfREBPrevName");
var PREV_CONTACT_HIDDENPROP_SF_FN=cFormNodeManager.getFormNodeForKey("sfPrevHiddenProp");
var PREV_CONTACT_GIVENAME_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBPrevGivenName");
var PREV_CONTACT_INITIALS_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBPrevInitials");
var PREV_CONTACT_SURNAME_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBPrevSurname");
var PREV_CONTACT_TITLE_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBPrevTitle");
var PREV_CONTACT_LANG_DDL_FN=cFormNodeManager.getFormNodeForKey("ddlREBPrevLangPref");
var PREV_CONTACT_PHONE_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBPrevTelephone");
var PREV_CONTACT_PHONEEXT_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBPrevExtension");
var PREV_CONTACT_FAX_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBPrevFax");
var PREV_CONTACT_EMAIL_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBPrevEmail");


//current Name Fields
var CURR_CONTACT_ROOT_SF_FN=cFormNodeManager.getFormNodeForKey("sfREBCurrName");
var CURR_CONTACT_GIVENAME_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBCurrGivenName");
var CURR_CONTACT_INITIALS_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBCurrInitials");

var CURR_CONTACT_SURNAME_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBCurrSurname");
var CURR_CONTACT_TITLE_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBCurrTitle");
var CURR_CONTACT_LANG_DDL_FN=cFormNodeManager.getFormNodeForKey("ddlREBCurrLangPref");
var CURR_CONTACT_PHONE_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBCurrTelephone");
var CURR_CONTACT_PHONEEXT_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBCurrExtension");
var CURR_CONTACT_FAX_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBCurrFax");
var CURR_CONTACT_EMAIL_TXT_FN=cFormNodeManager.getFormNodeForKey("txtREBCurrEmail");


//prev REBA Address Fields
PREV_ADDR_ROOT_SF_FN=cFormNodeManager.getFormNodeForKey("sfPrevREBAddress");
PREV_ADDR_STREET_TXT_FN=cFormNodeManager.getFormNodeForKey("txtPrevREBStreetAddress");
PREV_ADDR_CITY_TXT_FN=cFormNodeManager.getFormNodeForKey("txtPrevREBCity");
PREV_ADDR_COUNTRY_DDL_FN=cFormNodeManager.getFormNodeForKey("ddlPrevREBCountry");
PREV_ADDR_PROV_DDL_FN=cFormNodeManager.getFormNodeForKey("ddlPrevREBProvince");
PREV_ADDR_PROV_TXT_FN=cFormNodeManager.getFormNodeForKey("txtPrevREBProvince");
PREV_ADDR_POSTAL_TXT_FN=cFormNodeManager.getFormNodeForKey("txtPrevREBPostalCode");


//CURR Address Fields
CURR_ADDR_ROOT_SF_FN=cFormNodeManager.getFormNodeForKey("sfCurrREBAddress");
CURR_ADDR_STREET_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrREBStreetAddress");
CURR_ADDR_CITY_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrREBCity");
CURR_ADDR_COUNTRY_DDL_FN=cFormNodeManager.getFormNodeForKey("ddlCurrREBCountry");
CURR_ADDR_PROV_DDL_FN=cFormNodeManager.getFormNodeForKey("ddlCurrREBProvince");
CURR_ADDR_PROV_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrREBProvince");
CURR_ADDR_POSTAL_TXT_FN=cFormNodeManager.getFormNodeForKey("txtCurrREBPostalCode");




_initializeFormNodes();


/* Action Handler- Place all actions here
*
*
*
*/
function actionPerformed(anEvent)
{
	switch(anEvent.getActionCommand())
	{
		
		case REBA_COUNTRY_CHANGE_ACTION:
			var rootTrialInstance=cTrialsHandler.getClinicalTrialSFInstance(anEvent.getSource());
				_rebaCountryChanged(rootTrialInstance);				
			break;
						
				
		default:
			throw cException.createInstance(SCRIPT_OBJECT_NAME
				  + ".actionPerformed() - unrecognized event '" 
				  + anEvent.getActionCommand() + "'.", "UnsupportedAction");
	}//switch
}//end fn


function initialise(parentInstance){

	_rebaCountryChanged(parentInstance);

}


function _initializeFormNodes(){

	try{
			
		cControllerUtil.checkFormNode(PREV_CONTACT_ROOT_SF_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_ROOT_SF_FN");
		cControllerUtil.checkFormNode(PREV_CONTACT_HIDDENPROP_SF_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_HIDDENPROP_SF_FN");
		cControllerUtil.checkFormNode(PREV_CONTACT_GIVENAME_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_GIVENAME_TXT_FN");
		cControllerUtil.checkFormNode(PREV_CONTACT_INITIALS_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_INITIALS_TXT_FN");
		cControllerUtil.checkFormNode(PREV_CONTACT_SURNAME_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_SURNAME_TXT_FN");
		cControllerUtil.checkFormNode(PREV_CONTACT_TITLE_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_TITLE_TXT_FN");
		cControllerUtil.checkFormNode(PREV_CONTACT_LANG_DDL_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_LANG_DDL_FN");
		cControllerUtil.checkFormNode(PREV_CONTACT_PHONE_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_PHONE_TXT_FN");
		cControllerUtil.checkFormNode(PREV_CONTACT_PHONEEXT_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_PHONEEXT_TXT_FN");
		cControllerUtil.checkFormNode(PREV_CONTACT_FAX_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_FAX_TXT_FN");
		cControllerUtil.checkFormNode(PREV_CONTACT_EMAIL_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_CONTACT_EMAIL_TXT_FN");
		//curr name
		cControllerUtil.checkFormNode(CURR_CONTACT_ROOT_SF_FN,SCRIPT_OBJECT_NAME,"CURR_CONTACT_ROOT_SF_FN");
		cControllerUtil.checkFormNode(CURR_CONTACT_GIVENAME_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_CONTACT_GIVENAME_TXT_FN");
		cControllerUtil.checkFormNode(CURR_CONTACT_INITIALS_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_CONTACT_INITIALS_TXT_FN");
		cControllerUtil.checkFormNode(CURR_CONTACT_SURNAME_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_CONTACT_SURNAME_TXT_FN");
		cControllerUtil.checkFormNode(CURR_CONTACT_TITLE_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_CONTACT_TITLE_TXT_FN");
		cControllerUtil.checkFormNode(CURR_CONTACT_LANG_DDL_FN,SCRIPT_OBJECT_NAME,"CURR_CONTACT_LANG_DDL_FN");
		cControllerUtil.checkFormNode(CURR_CONTACT_PHONE_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_CONTACT_PHONE_TXT_FN");
		cControllerUtil.checkFormNode(CURR_CONTACT_PHONEEXT_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_CONTACT_PHONEEXT_TXT_FN");
		cControllerUtil.checkFormNode(CURR_CONTACT_FAX_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_CONTACT_FAX_TXT_FN");
		cControllerUtil.checkFormNode(CURR_CONTACT_EMAIL_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_CONTACT_EMAIL_TXT_FN");
		
		//old address
		cControllerUtil.checkFormNode(PREV_ADDR_ROOT_SF_FN,SCRIPT_OBJECT_NAME,"PREV_ADDR_ROOT_SF_FN");
		cControllerUtil.checkFormNode(PREV_ADDR_STREET_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_ADDR_STREET_TXT_FN");
		cControllerUtil.checkFormNode(PREV_ADDR_CITY_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_ADDR_CITY_TXT_FN");
		cControllerUtil.checkFormNode(PREV_ADDR_COUNTRY_DDL_FN,SCRIPT_OBJECT_NAME,"PREV_ADDR_COUNTRY_DDL_FN");
		cControllerUtil.checkFormNode(PREV_ADDR_PROV_DDL_FN,SCRIPT_OBJECT_NAME,"PREV_ADDR_PROV_DDL_FN");
		cControllerUtil.checkFormNode(PREV_ADDR_PROV_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_ADDR_PROV_TXT_FN");
		cControllerUtil.checkFormNode(PREV_ADDR_POSTAL_TXT_FN,SCRIPT_OBJECT_NAME,"PREV_ADDR_POSTAL_TXT_FN");
		
		
		//curr address
		cControllerUtil.checkFormNode(CURR_ADDR_ROOT_SF_FN,SCRIPT_OBJECT_NAME,"CURR_ADDR_ROOT_SF_FN");
		cControllerUtil.checkFormNode(CURR_ADDR_STREET_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_ADDR_STREET_TXT_FN");
		cControllerUtil.checkFormNode(CURR_ADDR_CITY_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_ADDR_CITY_TXT_FN");
		cControllerUtil.checkFormNode(CURR_ADDR_COUNTRY_DDL_FN,SCRIPT_OBJECT_NAME,"CURR_ADDR_COUNTRY_DDL_FN");
		cControllerUtil.checkFormNode(CURR_ADDR_PROV_DDL_FN,SCRIPT_OBJECT_NAME,"CURR_ADDR_PROV_DDL_FN");
		cControllerUtil.checkFormNode(CURR_ADDR_PROV_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_ADDR_PROV_TXT_FN");
		cControllerUtil.checkFormNode(CURR_ADDR_POSTAL_TXT_FN,SCRIPT_OBJECT_NAME,"CURR_ADDR_POSTAL_TXT_FN");
		
	
	 }
	 catch (exception)
	{
		cLog.critical(cResourceManager.get("error_application", SCRIPT_OBJECT_NAME+"._initializeFormNode()"), exception);
	}

}

/**
* Creates an instance of the previous person
*@ returns the new instance subform if it was created, null if it was not created (already exists)
*/
function createOldRebaContact(parentInstance){

 	var instanceManager=PREV_CONTACT_ROOT_SF_FN.getInstanceManager(parentInstance);
	var newInstance=cGeneralUtil.addSubformInstance(instanceManager);
	
	if(newInstance){
		initialiseOldRebaContact(parentInstance)
	}
	return(newInstance);		

}
/*
* Initializes the previous REBA name section
*	@param rootSfInstace- the root Adobe sf for the previous address
*/
function initialiseOldRebaContact(rootSfInstance){
	
	var hiddenSfInstance=PREV_CONTACT_HIDDENPROP_SF_FN.getNodeInstance(rootSfInstance);
	cUiUtil.hide(hiddenSfInstance);
	PREV_CONTACT_ROOT_SF_FN.lock(rootSfInstance);
	
}


function getOldRebaContactRoot(rootSfInstance){

	return(PREV_CONTACT_ROOT_SF_FN.getNodeInstance(rootSfInstance));
}

function getCurrRebaContactRoot(rootSfInstance){

	return(CURR_CONTACT_ROOT_SF_FN.getNodeInstance(rootSfInstance));
}


function deleteOldContact(rootSfInstance){
	var oldInstance=getOldRebaContactRoot(rootSfInstance);
	if(oldInstance){
		cGeneralUtil.removeSubformInstance(oldInstance);	
	}
}

function copyToPrevRebaContact(rootSfInstance){

	var prevContactList=_getAllPrevContactElements(rootSfInstance);
	var currContactList=_getAllCurrContactElements(rootSfInstance);
	//order of lists is important! Use prev list for the loop as it might be length 0
	for(var i=0;i&lt;prevContactList.length;i++){
		 prevContactList[i].rawValue=currContactList[i].rawValue;
	}

}

function copyToCurrRebaContact(rootSfInstance){

	var prevContactList=_getAllPrevContactElements(rootSfInstance);
	var currContactList=_getAllCurrContactElements(rootSfInstance);
	//order of lists is important!
	for(var i=0;i&lt;prevContactList.length;i++){
		currContactList[i].rawValue= prevContactList[i].rawValue;
	
	}
}

function isCurrentContactEmpty(rootSfInstance){

	var currList=_getAllCurrContactElements(rootSfInstance)
	for(var i=0;i&lt;currList.length;i++){
		var val=cStringUtil.trim(currList[i].rawValue);
		if(val){
			return false;
		}
	}
	return true;	
}


function _rebaCountryChanged(parentInstance){
	var provDdlInstance=CURR_ADDR_PROV_DDL_FN.getNodeInstance(parentInstance);	
 	var postalTxtInstance=CURR_ADDR_POSTAL_TXT_FN.getNodeInstance(parentInstance);		
	var countryInstance=CURR_ADDR_COUNTRY_DDL_FN.getNodeInstance(parentInstance);			
 	//initializes the state of country and province
	cAddressUtil.countryChanged(CURR_ADDR_PROV_DDL_FN,CURR_ADDR_POSTAL_TXT_FN,provDdlInstance,postalTxtInstance);
	cAddressUtil.setProvinceUIState(countryInstance.rawValue,provDdlInstance,CURR_ADDR_PROV_TXT_FN.getNodeInstance(parentInstance));
}


function _getAllCurrContactElements(rootSfInstance){
	
	var currContactRootSfInstance=CURR_CONTACT_ROOT_SF_FN.getNodeInstance(rootSfInstance);
	return(
	new Array(
		CURR_CONTACT_GIVENAME_TXT_FN.getNodeInstance(currContactRootSfInstance),		
		CURR_CONTACT_INITIALS_TXT_FN.getNodeInstance(currContactRootSfInstance),
		CURR_CONTACT_SURNAME_TXT_FN.getNodeInstance(currContactRootSfInstance),
		CURR_CONTACT_TITLE_TXT_FN.getNodeInstance(currContactRootSfInstance),
		CURR_CONTACT_LANG_DDL_FN.getNodeInstance(currContactRootSfInstance),
		CURR_CONTACT_PHONE_TXT_FN.getNodeInstance(currContactRootSfInstance),
		CURR_CONTACT_PHONEEXT_TXT_FN.getNodeInstance(currContactRootSfInstance),
		CURR_CONTACT_FAX_TXT_FN.getNodeInstance(currContactRootSfInstance),
		CURR_CONTACT_EMAIL_TXT_FN.getNodeInstance(currContactRootSfInstance)
	));
	//cLog.trace("Given Name value "+result[0].rawValue);
	//return (result);
}
function _getAllPrevContactElements(rootSfInstance){
		var prevContactRootSfInstance=PREV_CONTACT_ROOT_SF_FN.getNodeInstance(rootSfInstance);
	
	if(!prevContactRootSfInstance) return (new Array());

	return(
	new Array(
	PREV_CONTACT_GIVENAME_TXT_FN.getNodeInstance(prevContactRootSfInstance),		
	PREV_CONTACT_INITIALS_TXT_FN.getNodeInstance(prevContactRootSfInstance),
	PREV_CONTACT_SURNAME_TXT_FN.getNodeInstance(prevContactRootSfInstance),
	PREV_CONTACT_TITLE_TXT_FN.getNodeInstance(prevContactRootSfInstance),
	PREV_CONTACT_LANG_DDL_FN.getNodeInstance(prevContactRootSfInstance),
	PREV_CONTACT_PHONE_TXT_FN.getNodeInstance(prevContactRootSfInstance),
	PREV_CONTACT_PHONEEXT_TXT_FN.getNodeInstance(prevContactRootSfInstance),
	PREV_CONTACT_FAX_TXT_FN.getNodeInstance(prevContactRootSfInstance),
	PREV_CONTACT_EMAIL_TXT_FN.getNodeInstance(prevContactRootSfInstance)
	));
	//return (result);
}

/*
* returns the Adobe instance of the root subform for the previous address
*
*/
function getOldAddressRoot(rootSfInstance){
 	return(PREV_ADDR_ROOT_SF_FN.getNodeInstance(rootSfInstance));
}
 
function createOldRebaAddress(parentInstance){

	var instanceManager=PREV_ADDR_ROOT_SF_FN.getInstanceManager(parentInstance);
	var newInstance=cGeneralUtil.addSubformInstance(instanceManager);
	
	if(newInstance){
		initialiseOldRebaAddress(parentInstance);
	}
	return(newInstance);		

} 
function deleteOldRebaAddress(rootSfInstance){
	oldAddressInstance=getOldAddressRoot(rootSfInstance);
	if(oldAddressInstance){
		cGeneralUtil.removeSubformInstance(oldAddressInstance);	
	}

}
function copyToPrevRebaAddress(rootSfInstance){
	var prevList=_getAllPrevAddressElements(rootSfInstance);
	var currList=_getAllCurrAddressElements(rootSfInstance);
	
	for(var i=0;i&lt;prevList.length;i++){
		prevList[i].rawValue=currList[i].rawValue;
	}
	
}
/*
* Copies data from the current Reba address to the previous address
*/
function copyToCurrRebaAddress(rootSfInstance){
	var prevList=_getAllPrevAddressElements(rootSfInstance);
	var currList=_getAllCurrAddressElements(rootSfInstance);
	
	for(var i=0;i&lt;prevList.length;i++){
		currList[i].rawValue=prevList[i].rawValue;
	}	
}


function initialiseOldRebaAddress(parentInstance){

	PREV_ADDR_ROOT_SF_FN.lock(parentInstance);
}
function initialiseCurrRebaAddress(parentInstance){


}

function isCurrentAddressEmpty(rootInstance){

	var currList=_getAllCurrAddressElements(rootInstance)
	for(var i=0;i&lt;currList.length;i++){
		var val=cStringUtil.trim(currList[i].rawValue);
		if(val){
			return false;
		}
	}
	return true;
}

function deleteOldAddress(rootInstance){
	
	var oldAddrInstance=getPrevRebaAddressRoot(rootInstance);
	if(oldAddrInstance){
		cGeneralUtil.removeSubformInstance();
	}
}

function getCurrRebaAddressRoot(rootInstance){

	return(CURR_ADDR_ROOT_SF_FN.getNodeInstance(rootInstance));
}

function getPrevRebaAddressRoot(rootInstance){

	return(PREV_ADDR_ROOT_SF_FN.getNodeInstance(rootInstance));
}


/*
* Returns a list of adobe elements for the previous Reba Address
* @param rootSfInstance- the instance of the address to look for the elements
* @returns: an array of address adobe node elements
*/
function _getAllPrevAddressElements(rootSfInstance){

		var prevAddressRootSfInstance= getPrevRebaAddressRoot(rootSfInstance);
		//if it doesn't exist, return an empty array
		if(!prevAddressRootSfInstance) return (new Array());
		
	return(
	new Array(
				PREV_ADDR_STREET_TXT_FN.getNodeInstance(prevAddressRootSfInstance),
				PREV_ADDR_CITY_TXT_FN.getNodeInstance(prevAddressRootSfInstance),
				PREV_ADDR_COUNTRY_DDL_FN.getNodeInstance(prevAddressRootSfInstance),
				PREV_ADDR_PROV_DDL_FN.getNodeInstance(prevAddressRootSfInstance),
				PREV_ADDR_PROV_TXT_FN.getNodeInstance(prevAddressRootSfInstance),
				PREV_ADDR_POSTAL_TXT_FN.getNodeInstance(prevAddressRootSfInstance)	
			));

}
/*
* Returns a list of adobe elements for the Current Reba Address
* @param rootSfInstance- the instance of the clinical trial site to look for the elements
* @returns: an array of address adobe node elements
*/

function _getAllCurrAddressElements(rootSfInstance){

		var currAddressRootSfInstance=getCurrRebaAddressRoot(rootSfInstance);
	return(
	new Array(
				CURR_ADDR_STREET_TXT_FN.getNodeInstance(currAddressRootSfInstance),
				CURR_ADDR_CITY_TXT_FN.getNodeInstance(currAddressRootSfInstance),
				CURR_ADDR_COUNTRY_DDL_FN.getNodeInstance(currAddressRootSfInstance),
				CURR_ADDR_PROV_DDL_FN.getNodeInstance(currAddressRootSfInstance),
				CURR_ADDR_PROV_TXT_FN.getNodeInstance(currAddressRootSfInstance),
				CURR_ADDR_POSTAL_TXT_FN.getNodeInstance(currAddressRootSfInstance)			
			));
}
</script>
                     <script contentType="application/x-javascript" name="DateHandler">
//imports, core
var cLog = 					script.core.util.Log;
var cResourceManager = 		script.core.lang.ResourceManager;
var cFormNodeManager = 		script.core.model.FormNodeManager;
var cUiUtil=				script.core.util.UiUtil;
var cException = 			script.core.util.Exception;
var cConfigurationManager = script.core.util.ConfigurationManager;
var cControllerUtil = 		script.core.util.ControllerUtil;
var cInstanceManagerUtil=	script.core.util.InstanceManagerUtil;
var cStringUtil=			script.core.util.StringUtil;

//imports, utility
var cAddressUtil= 			script.HCeForm.util.AddressUtil;
var cTrialsHandler=			script.HCeForm.control.TrialsHandler;
var cGeneralUtil=			script.HCeForm.util.General;
var cSiteHandler=			script.HCeForm.control.Part3.SiteAddressHandler; 

//Globals

var CHK_ON=					cConfigurationManager.get("CHK_ON");
var CHK_OFF=				cConfigurationManager.get("CHK_OFF");
//Handler name
var SCRIPT_OBJECT_NAME=					"DateHandler";

//Action Globals

//var  CURRADDR_SAMEAS_ACTION=	"curr_sameas_changed";


//FORM NODES (FN)

var PREV_COMMENCE_DATE_ROOT_SF_FN=cFormNodeManager.getFormNodeForKey("sfPrevCommDate");
var PREV_APPROVAL_DATE_ROOT_SF_FN=cFormNodeManager.getFormNodeForKey("sfPrevApprovalDate");
var CURR_APPROVAL_DTE_FN=cFormNodeManager.getFormNodeForKey("dteCurrApprovalDate");
var CURR_COMMENCE_DTE_FN=cFormNodeManager.getFormNodeForKey("dteCurrComenceDate");
var PREV_COMMENCE_DTE_FN=cFormNodeManager.getFormNodeForKey("dtePrevComenceDate");
var PREV_APPROVAL_DTE_FN=cFormNodeManager.getFormNodeForKey("dtePrevApprovalDate");





_initializeFormNodes();


/* Action Handler- Place all actions here
*
*
*
*/
function actionPerformed(anEvent)
{
	switch(anEvent.getActionCommand())
	{
		
		//	case CURRADDR_SAMEAS_ACTION:
			//		_setQISameAsUIState(anEvent.getSource());				
			//break;
						
				
		default:
			throw cException.createInstance(SCRIPT_OBJECT_NAME
				  + ".actionPerformed() - unrecognized event '" 
				  + anEvent.getActionCommand() + "'.", "UnsupportedAction");
	}//switch
}//end fn


function _initializeFormNodes(){

	try{
			
		cControllerUtil.checkFormNode(PREV_COMMENCE_DATE_ROOT_SF_FN,SCRIPT_OBJECT_NAME,"PREV_COMMENCE_DATE_ROOT_SF_FN");
		cControllerUtil.checkFormNode(PREV_APPROVAL_DATE_ROOT_SF_FN,SCRIPT_OBJECT_NAME,"PREV_APPROVAL_DATE_ROOT_SF_FN");
		cControllerUtil.checkFormNode(CURR_APPROVAL_DTE_FN,SCRIPT_OBJECT_NAME,"CURR_APPROVAL_DTE_FN");
		cControllerUtil.checkFormNode(CURR_COMMENCE_DTE_FN,SCRIPT_OBJECT_NAME,"CURR_COMMENCE_DTE_FN");	
		cControllerUtil.checkFormNode(PREV_COMMENCE_DTE_FN,SCRIPT_OBJECT_NAME,"PREV_COMMENCE_DTE_FN");	
		cControllerUtil.checkFormNode(PREV_APPROVAL_DTE_FN,SCRIPT_OBJECT_NAME,"PREV_APPROVAL_DTE_FN");	
					
	 }
	 catch (exception)
	{
		cLog.critical(cResourceManager.get("error_application", SCRIPT_OBJECT_NAME+"._initializeFormNode()"), exception);
	}

}

/*
*
*
*
*/
function createPrevCommenceDate(sfRootInstance){
	var instanceManager=PREV_COMMENCE_DATE_ROOT_SF_FN.getInstanceManager(sfRootInstance);
	var newInstance=cGeneralUtil.addSubformInstance(instanceManager);
	
	if(newInstance){
		 initialisePrevCommenceDate(newInstance);
	}
	return(newInstance);	


}

function createPrevApprovalDate(sfRootInstance){
	var instanceManager=PREV_APPROVAL_DATE_ROOT_SF_FN.getInstanceManager(sfRootInstance);
	var newInstance=cGeneralUtil.addSubformInstance(instanceManager);
	
	if(newInstance){
		 initialisePrevApprovalDate(newInstance);
	}
	return(newInstance);	


}
function initialisePrevCommenceDate(sfInstance){

	PREV_COMMENCE_DATE_ROOT_SF_FN.lock(sfInstance);

}
function initialisePrevApprovalDate(sfInstance){

	PREV_APPROVAL_DATE_ROOT_SF_FN.lock(sfInstance);

}

function deletePrevCommenceDate(rootSfInstance){
	var oldInstance=PREV_COMMENCE_DATE_ROOT_SF_FN.getNodeInstance(rootSfInstance);
	if(oldInstance){
		cGeneralUtil.removeSubformInstance(oldInstance);
	}	
}
function deletePrevApprovalDate(rootSfInstance){
	var oldInstance=PREV_APPROVAL_DATE_ROOT_SF_FN.getNodeInstance(rootSfInstance);
	if(oldInstance){
		cGeneralUtil.removeSubformInstance(oldInstance);	
	}

}

function isCurrCommenceDateEmpty(rootSfInstance){
	var dteInstance=getCurrCommenceDate(rootSfInstance);
	return(dteInstance.isNull);

}

function isCurrApprovalDateEmpty(rootSfInstance){

	var dteInstance=getCurrApprovalDate(rootSfInstance);
	return(dteInstance.isNull);

}
/*
* Done
*/
function copyToCurrApprovalDate(rootSfInstance){
	var currDateInstance=getCurrApprovalDate(rootSfInstance);
	var prevDateSfInstance= getPrevApprovalDateRoot(rootSfInstance);
	if(prevDateSfInstance){
		var prevDateInstance=PREV_APPROVAL_DTE_FN.getNodeInstance(prevDateSfInstance);
		currDateInstance.rawValue=prevDateInstance.rawValue;
	}
}
/*
*
*/
function copyToPrevApprovalDate(rootSfInstance){
	var currDateInstance=getCurrApprovalDate(rootSfInstance);
	var prevDateSfInstance= getPrevApprovalDateRoot(rootSfInstance)
	if(prevDateSfInstance){
		var prevDateInstance=PREV_APPROVAL_DTE_FN.getNodeInstance(prevDateSfInstance);
		prevDateInstance.rawValue=currDateInstance.rawValue;
	}
}
/*
*
*
*/
function copyToCurrCommenceDate(rootSfInstance){
	var currDateInstance=getCurrCommenceDate(rootSfInstance);
	var prevDateSfInstance= getPrevCommenceDateRoot(rootSfInstance)
	if( prevDateSfInstance){
		var prevDateInstance=	PREV_COMMENCE_DTE_FN.getNodeInstance(prevDateSfInstance);
		currDateInstance.rawValue=prevDateInstance.rawValue;
	}

}
function copyToPrevCommenceDate(rootSfInstance){
	var currDateInstance=getCurrCommenceDate(rootSfInstance);
	var prevDateSfInstance= getPrevCommenceDateRoot(rootSfInstance)
	if(prevDateSfInstance){
		var prevDateInstance=	PREV_COMMENCE_DTE_FN.getNodeInstance(prevDateSfInstance);
		prevDateInstance.rawValue=currDateInstance.rawValue;	
	}
}

function getCurrApprovalDate(rootSfInstance){
	
	return(CURR_APPROVAL_DTE_FN.getNodeInstance(rootSfInstance));	
		
				

}		
function getCurrCommenceDate(rootSfInstance){

	return(CURR_COMMENCE_DTE_FN.getNodeInstance(rootSfInstance));	
}

function getPrevApprovalDateRoot(rootSfInstance){
	
	return(PREV_APPROVAL_DATE_ROOT_SF_FN.getNodeInstance(rootSfInstance));	
}
		
function getPrevCommenceDateRoot(rootSfInstance){

	return(PREV_COMMENCE_DATE_ROOT_SF_FN.getNodeInstance(rootSfInstance));	
}	
	





</script>
                     <?templateDesigner expand 1?></variables>
                  <?templateDesigner expand 1?></subform>
               <?templateDesigner expand 1?></subform>
            <subform h="50mm" name="model" w="100mm">
               <subform w="100mm" h="50mm" name="delegate">
                  <bind match="none"/>
                  <variables>
                     <script contentType="application/x-javascript" name="EmailFormatDelegate">
//
/*******************************************************************************
 * An object that responds to information requests sent to an email FormNode.
 *
 * Implements FormNodeDelegateInterface.
 */

//imports
var cLog = script.core.util.Log;
var cResourceManager = 		script.core.lang.ResourceManager;
var cConfigurationManager = script.core.util.ConfigurationManager;
var cUiUtil = 						script.core.util.UiUtil;
var cValidationFailure = 			script.core.validation.ValidationFailure;
var cGeneralUtil=			script.HCeForm.util.General;

var _EMAIL_FORMAT_TYPE = "email";

/*******************************************************************************
 * Gets a new EmailDelegate. Adobe does not allow object instances to be
 * created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the new EmailDelegate instance
 */
function createInstance()
{
	return new EmailFormatDelegateClass();
}

/**
 * Class implementation
 */
function EmailFormatDelegateClass(somExpression)
{
	this.className = "EmailFormatDelegate";
	this.errorResourceAlias="";
	this.formNode;
	this.base_errorAlias="error_emailFormat";
	this.errorRootAlias=null;
	this.nodeAlias=null;
	
	
	/*
	* this is the resource file alias for the text that identifies the subform the field is on
	* For example: "For trial site". The delegate adds the index of the subform
	* This text is optional, it isn't needed if you have only one instance of a specific postal code
	*/
	this.setErrorRootText=function(aliasName){
	
		this.errorRootAlias=aliasName;
	}
	
	/* Optional -sets the string alias to the name of the root node (ie the field name)
	**
	*/
	this.setNodeAlias = function(bar)
	{
		this.nodeAlias=bar;
	}
	
	/*
	* this is the resource file alias for the text that identifies the subform the field is on
	* For example: "For trial site". The delegate adds the index of the subform
	* This text is optional, it isn't needed if you have only one instance of a specific postal code
	*/
	this.setErrorRootText=function(aliasName){
	
		this.errorRootAlias=aliasName;
	}	
	
	/**
	 * Sets custom error text 
	 *
	 * @param aFormNode the FormNode that is using this delegate.
	 */
	this.setErrorText = function(resName)
    {    	
    	this.errorResourceAlias=resName;
    	cLog.trace("SDFSFSF "+this.errorResourceAlias);
    }
	

	/**
	 * Gets this node's default value, which is an internationalized value.
	 * This returns null since this uses a picklist.
	 * @param aNode the Adobe Node instance who's default value is required.
	 * @return a String that contains the internationalized default value for
	 *		   the passed Node. Null if this is not applicable.
	 */
    this.getDefaultValue = function(aNode)
    {
    	return null;
	}
		
	/**
	 * Gets the type of format validation to be applied to data entered into
	 * this node in the UI.
	 * @param aNode the Adobe Node instance who's value must conform to a 
	 *		  specific format.
	 * @return a String that contains the type of format validation to be
	 *		   applied to data entered into this node in the UI. These must be
	 *		   types that are supported by the currently installed 
	 *		   FormatValidator. Null if this is not applicable.
	 */
    this.getFormatType = function(aNode)
    {
    	return null;
	}

	/**
	 * Gets this node's label to be displayed in the UI, which is an
	 * internationalized value.
	 * @param aNode the Adobe Node instance who's label is required.
	 * @return a String that contains the internationalized UI label for the
	 *		   passed Node. Null if this is not applicable.
	 */
    this.getLabel = function(aNode)
    {
    	return null;
   	}

	/**
	 * Gets whether this node is mandatory (required).
	 * @param aNode the Adobe Node instance who's mandatory setting is required.
	 * @return a boolean - true if the country is Canada or the US, false if it
	 *		   is any other value, null if there was no node passed.
	 */
	this.isMandatory = function(aNode)
	{
		return null;
	}
		
	/**
	 * Gets a string that defines the pick list to be displayed in the UI for
	 * this node.
	 * @param aNode the Adobe Node instance who's pick list is required.
	 * @return a String that contains the definition of the pick list to be
	 *		   displayed in the UI for this node. The format is:
	 *		   "displayValue1, code1, displayValue2, code2...". Null if
	 *		   this is not applicable.
	 */
    this.getPickListValues = function(aNode)
    {
    	return null;
	}
		
	/**
	 * Gets this node's tool tip to be displayed in the UI, which is an
	 * internationalized value. In this case it is null, since these are
	 * dependant on the subform that the field is in (must be handled by the
	 * FormNode itself).
	 * @param aNode the Adobe Node instance who's tool tip is required.
	 * @return a String that contains the internationalized UI tool tip for the
	 *		   passed Node. Null if this is not applicable.
	 */
    this.getToolTip = function(aNode)
    {
    	return null;
	}

	/**
	 * Sets the FormNode that is using this delegate. It is mandatory that this
	 * is set to allow the delegate to access items in the FormNode as required.
	 * @param aFormNode the FormNode that is using this delegate.
	 */
    this.setFormNode = function(aFormNode)
    {
    	this.formNode = aFormNode;
	}

	/**
	 * Gets whether this delegate is used to validate node instances (e.g.
	 * mandatory fields, etc.) as well as their child nodes.
	 * @return a boolean -true if this should be called to perform validation.
	 */
	this.isUsedToValidateNodes = function()
	{
		return true;
	}
	
	/**
	 * Dummy function stub so the interface requirements are met.
	 */
	this.validateNode = function(aNodeInstance, updateDisplay,
								 aValidationFailure)
	{
		// It must be called to avoid being
		// overwirtten.
		this.formNode._validateNode(aNodeInstance, updateDisplay,
									aValidationFailure);
		
		if(!aNodeInstance.isNull){
		
			var regExpress=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
			var resourceError=cResourceManager.get(this.base_errorAlias);
			
			if(!regExpress.test(aNodeInstance.rawValue)){
				if(updateDisplay===true){
					cUiUtil.setColour(aNodeInstance,
										cConfigurationManager.get("colourError"))
				}						
				var errorMsg=cResourceManager.get(this.errorResourceAlias)+resourceError;	
				if(this.errorRootAlias &amp;&amp; this.nodeAlias){
					var errorPart1msg=cResourceManager.get(this.errorRootAlias);
					var rootIndex= (cGeneralUtil.getParentIndex(this.nodeAlias,aNodeInstance))+1;
					if(rootIndex&gt;=0){
					errorPart1msg=errorPart1msg+" "+rootIndex+",";
					}
					errorMsg=errorPart1msg+" "+errorMsg;
					validationType="PostalCodeValidation_"+rootIndex;
				}
									
				var newValidationFailure = cValidationFailure.createInstance(
										"EmailValidation",errorMsg);
				if (aValidationFailure != null)
				{
					aValidationFailure.addNestedValidationFailure(newValidationFailure);
				}
				else
				{
					aValidationFailure = newValidationFailure;
				}						
			}else{
				cUiUtil.resetColour(aNodeInstance); //In case it previously failed
			}
		}			
		return aValidationFailure;
	}
			
    /**
     * Describes this object. This is implemented in all objects since their
     * toString() cannot be overridden!
     * @return the description of this object.
     */
    this.asString = function()
	{
		var buffer = this.className + "[";
		
	    if (this.formNode != null)
	    {
	    	buffer += "formNode.somExpression= " + this.formNode.somExpression;
	    }
	    else
	    {
	    	buffer += "formNode= null";
	    }
		buffer += "]";
		return buffer;
	}
}

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               
</script>
                     <script contentType="application/x-javascript" name="TelephoneFormatDelegate">
//
/*******************************************************************************
 * An object that responds to information requests sent to a telephone/fax
 * FormNode.
 *
 * Implements FormNodeDelegateInterface.
 */

//imports
//imports
var cLog = script.core.util.Log;
var cResourceManager = 		script.core.lang.ResourceManager;
var cConfigurationManager = script.core.util.ConfigurationManager;
var cUiUtil = 						script.core.util.UiUtil;
var cValidationFailure = 			script.core.validation.ValidationFailure;
var cFormNodeManager = 				script.core.model.FormNodeManager;
var cGeneralUtil=					script.HCeForm.util.General;


var _TELEPHONE_FORMAT_TYPE = "telephone";
var CANADA=	cConfigurationManager.get("CANADA");
var  USA=	cConfigurationManager.get("USA");
var PHONE=	1;
var FAX=		2;

/*******************************************************************************
 * Gets a new PostalZipDelegate. Adobe does not allow object instances to be
 * created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the new PostalZipDelegate instance
 */
function createInstance()
{
	return new TelephoneFormatDelegateClass();
}

/**
 * Class implementation
 */
function TelephoneFormatDelegateClass(somExpression)
{
	this.className = "TelephoneFormatDelegate";
	this.errorResourceAlias="";
	this.northAmerica_errorAlias="error_usPhoneNumError";
	this.other_errorAlias="error_otherPhoneNumError";
	this.numberType=PHONE;
	this.countryDdlNodeAlias="";
	this.formNode;
	this.errorRootAlias=null;
	this.nodeAlias=null;		

	/* Optional -sets the string alias to the name of the root node (ie the field name)
	**		
	*/
	this.setNodeAlias = function(bar)
	{
		this.nodeAlias=bar;
	}
	/*
	* this is the resource file alias for the text that identifies the subform the field is on
	* For example: "For trial site". The delegate adds the index of the subform
	* This text is optional, it isn't needed if you have only one instance of a specific postal code
	*/
	this.setErrorRootText=function(aliasName){
	
		this.errorRootAlias=aliasName;
	}	
	

	/**
	 * Gets this node's default value, which is an internationalized value.
	 * This returns null since this uses a picklist.
	 * @param aNode the Adobe Node instance who's default value is required.
	 * @return a String that contains the internationalized default value for
	 *		   the passed Node. Null if this is not applicable.
	 */
    this.getDefaultValue = function(aNode)
    {
    	return null;
	}
	
	/**
	 * Sets alias 
	 *
	 * @param aliasName -the alias of the country set in the nodeDefinitions
	 */
	this.setCountryNodeAlias = function(aliasName)
    {    	
    		this.countryDdlNodeAlias=aliasName;
    }
    
    	/**
	 * Sets the delegate to treat any error messages a phone messages
	 *
	 * 
	 */
	this.setAsPhoneNumber = function()
    {    	
    		this.numberType=PHONE;
    		this.northAmerica_errorAlias="error_usPhoneNumError";
		this.other_errorAlias="error_otherPhoneNumError";
    }
    /**
	 * Sets the delegate to treat any error messages a fax messages
	 *
	 * 
	 */
	this.setAsFaxNumber = function()
    {    	
    		this.numberType=FAX;
    		this.northAmerica_errorAlias="error_usFaxNumError";
		this.other_errorAlias="error_otherFaxNumError";	
    }
    

	/* Sets custom error text 
	 *
	 * @param aFormNode the FormNode that is using this delegate.
	 */
	this.setErrorText = function(aliasName)
    {    	
    		this.errorResourceAlias=aliasName;
    }
	
		
	/**
	 * Gets the type of format validation to be applied to data entered into
	 * this node in the UI.
	 * @param aNode the Adobe Node instance who's value must conform to a 
	 *		  specific format.
	 * @return a String that contains the type of format validation to be
	 *		   applied to data entered into this node in the UI. These must be
	 *		   types that are supported by the currently installed 
	 *		   FormatValidator. Null if this is not applicable.
	 */
    this.getFormatType = function(aNode)
    {
    	return null;
	}

	/**
	 * Gets this node's label to be displayed in the UI, which is an
	 * internationalized value.
	 * @param aNode the Adobe Node instance who's label is required.
	 * @return a String that contains the internationalized UI label for the
	 *		   passed Node. Null if this is not applicable.
	 */
    this.getLabel = function(aNode)
    {
    	return null;
   	}

	/**
	 * Gets whether this node is mandatory (required).
	 * @param aNode the Adobe Node instance who's mandatory setting is required.
	 * 	 
	 */
	this.isMandatory = function(aNode)
	{
			return null;
	}
		
	/**
	 * Gets a string that defines the pick list to be displayed in the UI for
	 * this node.
	 * @param aNode the Adobe Node instance who's pick list is required.
	 * @return a String that contains the definition of the pick list to be
	 *		   displayed in the UI for this node. The format is:
	 *		   "displayValue1, code1, displayValue2, code2...". Null if
	 *		   this is not applicable.
	 */
    this.getPickListValues = function(aNode)
    {
    	return null;
	}
		
	/**
	 * Gets this node's tool tip to be displayed in the UI, which is an
	 * internationalized value. In this case it is null, since these are
	 * dependant on the subform that the field is in (must be handled by the
	 * FormNode itself).
	 * @param aNode the Adobe Node instance who's tool tip is required.
	 * @return a String that contains the internationalized UI tool tip for the
	 *		   passed Node. Null if this is not applicable.
	 */
    this.getToolTip = function(aNode)
    {
    	return null;
	}

	/**
	 * Sets the FormNode that is using this delegate. It is mandatory that this
	 * is set to allow the delegate to access items in the FormNode as required.
	 * @param aFormNode the FormNode that is using this delegate.
	 */
    this.setFormNode = function(aFormNode)
    {
    	this.formNode = aFormNode;
	}

	/**
	 * Gets whether this delegate is used to validate node instances (e.g.
	 * mandatory fields, etc.) as well as their child nodes.
	 * @return a boolean -true if this should be called to perform validation.
	 */
	this.isUsedToValidateNodes = function()
	{
		return true;
	}
	
	/**
	 * Dummy function stub so the interface requirements are met.
	 */
	this.validateNode = function(aNodeInstance, updateDisplay,
								 aValidationFailure)
	{
		// It must be called to avoid being
		// overwirtten.
		this.formNode._validateNode(aNodeInstance, updateDisplay,
									aValidationFailure);
		
		var countryCode=this._getCountryCode(aNodeInstance);
		var errorAlias=""; //dynamic
		if(aNodeInstance.isNull){
			return aValidationFailure;
		}//if
	
		var testPassed=true;
		var phone = aNodeInstance.rawValue;
		if (countryCode == CANADA || countryCode == USA) {
				var reg = /^(?:\+?1[-. ]?)?\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/; //(phone leading with 1
				if (reg.test(phone) == false) {
						testPassed= false;
						errorAlias=this.northAmerica_errorAlias;
				} 
				else {
						testPassed= true;
						var formattedPhoneNumber = phone.replace(reg, "$1-$2-$3");
						var temp = phone.replace(/[^\d]/g, "");
						if (temp.length == 11) {
							formattedPhoneNumber = phone.replace(reg, "1-$1-$2-$3");
						}//if	
				}//else	
		}//if 
		else {
				var reg = /^[0-9() .-]+$/;
				var temp = phone.replace(/[^\d]/g, "");
				if (temp.length &lt; 9 || temp.length &gt; 18) {
						testPassed= false;
						errorAlias=this.other_errorAlias;
				}//if
				else{
					testPassed= true;
				}//else
		}//else		
		if(testPassed===true){
				cUiUtil.resetColour(aNodeInstance); //In case it previously failed
		}//if
		else{
				this.createFailure(updateDisplay,aValidationFailure,aNodeInstance,errorAlias);
		}//else
	return aValidationFailure;
	}
			
    /**
     * Describes this object. This is implemented in all objects since their
     * toString() cannot be overridden!
     * @return the description of this object.
     */
    this.asString = function()
	{
		var buffer = this.className + "[";
		
	    if (this.formNode != null)
	    {
	    	buffer += "formNode.somExpression= " + this.formNode.somExpression;
	    }
	    else
	    {
	    	buffer += "formNode= null";
	    }
		buffer += "]";
		return buffer;
	}
	//assumes that a) country field is called ddlCountry  and 
	//b) has the same parent as phone number
	this._getCountryCode=function(aNodeInstance){
		var countryValue="";
		if(!this.countryDdlNodeAlias){
			//use the parent and use ddlCountry if the alias is not set
			countryValue=this.parent.ddlCountry;
		}else{
			var countryFormNode=cFormNodeManager.getFormNodeForKey(this.countryDdlNodeAlias);
			if(!countryFormNode) return null;
			var rootInstance=null;
			if(this.errorRootAlias &amp;&amp; this.nodeAlias){
					var errorPart1msg=cResourceManager.get(this.errorRootAlias);
					rootInstance= cGeneralUtil.getParentInstance(this.nodeAlias,aNodeInstance); 
			}
			var countryInstance=countryFormNode.getNodeInstance(rootInstance);
			countryValue=countryInstance.rawValue;
		}
		return(countryValue);
	}
	
	
	this.createFailure=function(updateDisplay,aValidationFailure,aNodeInstance,baseErrorAlias){
	
		var resourceError=this.errorResourceAlias;
		if(updateDisplay===true){
					cUiUtil.setColour(aNodeInstance,cConfigurationManager.get("colourError"));
		}						
		var errorMsg=cResourceManager.get(resourceError)+cResourceManager.get(baseErrorAlias);
		//Feb 2016 added to account for multiple repeating instances of the same type
		if(this.errorRootAlias &amp;&amp; this.nodeAlias){
					var errorPart1msg=cResourceManager.get(this.errorRootAlias);
					var rootIndex= (cGeneralUtil.getParentIndex(this.nodeAlias,aNodeInstance))+1;
					if(rootIndex&gt;=0){
					errorPart1msg=errorPart1msg+" "+rootIndex+",";
					}
					errorMsg=errorPart1msg+" "+errorMsg;
					validationType="PostalCodeValidation_"+rootIndex;
		}			
		var newValidationFailure = cValidationFailure.createInstance("PhoneFormatValidation",errorMsg);
		if (aValidationFailure != null)
		{
			aValidationFailure.addNestedValidationFailure(newValidationFailure);
		}
		else{
			aValidationFailure = newValidationFailure;
		}					
	}//endfn
	
	
	
}

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               
</script>
                     <script contentType="application/x-javascript" name="PostalCodeFormatDelegate">
//Updated on Feb 2016 to support multiple instances of the same field
/*******************************************************************************
 * An object that responds to information requests sent to a postal/zip code
 * FormNode. This determines whether the country is Canada, the US, or other
 * value and responds accordingly.
 * Note that this assumes that the related country node instance is a peer to
 * this one (i.e. has the same parent).
 *
 * Implements FormNodeDelegateInterface.
 */

//imports
var cConfigurationManager = script.core.util.ConfigurationManager;
var cLog = script.core.util.Log;
var cResourceManager = script.core.lang.ResourceManager;
var cUiUtil = 						script.core.util.UiUtil;
var cValidationFailure = 			script.core.validation.ValidationFailure;
var cNodeUtil=		 				script.core.util.NodeUtil;
var cFormNodeManager = 				script.core.model.FormNodeManager;
var cGeneralUtil=					script.HCeForm.util.General;
//note: These keys are in the core fragment. The base implementation was copied from core
//for all the label handling
var _COUNTRY_NODE_NAME = null; //String
var _COUNTRY_NODE_NAME_KEY = "countryNodeName";
var _POSTAL_CODE_FORMAT_TYPE = "postalCode";
var _POSTAL_CODE_LABEL_KEY = "postalCode";
var _POSTAL_ZIP_CODE_LABEL_KEY = "postalZipCode";
var _ZIP_CODE_FORMAT_TYPE = "zipCode";
var _ZIP_CODE_LABEL_KEY = "zipCode";
var CANADA=	cConfigurationManager.get("CANADA");
var  USA=	cConfigurationManager.get("USA");

/*******************************************************************************
 * Gets a new PostalZipDelegate. Adobe does not allow object instances to be
 * created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the new PostalZipDelegate instance
 */
function createInstance()
{
	return new PostalCodeFormatDelegateClass();
}

//===== PRIVATE ================================================================
/**
 * Gets the name of the country node. This is lazy loaded from the configuration
 * since the field naming conventions may vary between applications.
 * @return the name of country nodes in this form.
 */
function _getCountryNodeName()
{
	if (_COUNTRY_NODE_NAME == null)
	{
		_COUNTRY_NODE_NAME = cConfigurationManager.get(_COUNTRY_NODE_NAME_KEY);
		if (_COUNTRY_NODE_NAME == null)
		{
			cLog.warn("PostalZipDelegate._getCountryNodeName(): '"
					  + _COUNTRY_NODE_NAME_KEY + "' not found in the configuration");
		}
	}
	return _COUNTRY_NODE_NAME;
}

/**
 * Class implementation
 */
function PostalCodeFormatDelegateClass(somExpression)
{
	this.className = "PostalCodeFormatDelegate";
	this.errorResourceAlias="error_PostalCodeFormat";
	this.base_errorAlias="error_caPostalCodeFormat";
	this.errorRootAlias=null;
	this.nodeAlias=null;
	this.formNode;
	this.delegateIndex=0;
	
	
	/* Optional -sets the string alias to the name of the root node (ie the field name)
	**
	*/
	this.setNodeAlias = function(bar)
	{
		this.nodeAlias=bar;
	}
	


	/**
	 * Gets this node's default value, which is an internationalized value.
	 * This returns null since this uses a picklist.
	 * @param aNode the Adobe Node instance who's default value is required.
	 * @return a String that contains the internationalized default value for
	 *		   the passed Node. Null if this is not applicable.
	 */
    this.getDefaultValue = function(aNode)
    {
    	return null;
	}
	
	/**
	 * Sets custom error text 
	 *
	 * @param aFormNode the FormNode that is using this delegate.
	 */
	this.setErrorText = function(aliasName)
    {
    	
    	this.errorResourceAlias=aliasName;
    }
		
	/*
	* this is the resource file alias for the text that identifies the subform the field is on
	* For example: "For trial site". The delegate adds the index of the subform
	* This text is optional, it isn't needed if you have only one instance of a specific postal code
	*/
	this.setErrorRootText=function(aliasName){
	
		this.errorRootAlias=aliasName;
	}
	
	
		
	/**
	 * Gets the type of format validation to be applied to data entered into
	 * this node in the UI.
	 * @param aNode the Adobe Node instance who's value must conform to a 
	 *		  specific format.
	 * @return a String that contains the type of format validation to be
	 *		   applied to data entered into this node in the UI. These must be
	 *		   types that are supported by the currently installed 
	 *		   FormatValidator. Null if this is not applicable.
	 */
    this.getFormatType = function(aNode)
    {
    	return null;
    }
	/**
	 * Gets this node's label to be displayed in the UI, which is an
	 * internationalized value.
	 * @param aNode the Adobe Node instance who's label is required.
	 * @return a String that contains the internationalized UI label for the
	 *		   passed Node. Null if this is not applicable.
	 */
    this.getLabel = function(aNode)
    {
    	if (aNode != undefined)
    	{
    		var countryValue = this._getCountry(aNode);

			if(countryValue == CANADA)
			{
    			return cResourceManager.get(_POSTAL_CODE_LABEL_KEY);
			}
			else if(countryValue == USA)
			{
    			return cResourceManager.get(_ZIP_CODE_LABEL_KEY);
			}
    	}
    	return cResourceManager.get(_POSTAL_ZIP_CODE_LABEL_KEY);
   	}

	/**
	 * Gets whether this node is mandatory (required).
	 * @param aNode the Adobe Node instance who's mandatory setting is required.
	 * @return a boolean - true if the country is Canada or the US, false if it
	 *		   is any other value, null if there was no node passed.
	 */
	this.isMandatory = function(aNode)
	{
    	if (aNode != undefined)
    	{
    		var countryValue = this._getCountry(aNode);

			return (countryValue == CANADA || countryValue == USA);
    	}
		return null;
	}
		
	/**
	 * Gets a string that defines the pick list to be displayed in the UI for
	 * this node.
	 * @param aNode the Adobe Node instance who's pick list is required.
	 * @return a String that contains the definition of the pick list to be
	 *		   displayed in the UI for this node. The format is:
	 *		   "displayValue1, code1, displayValue2, code2...". Null if
	 *		   this is not applicable.
	 */
    this.getPickListValues = function(aNode)
    {
    	return null;
	}
		
	/**
	 * Gets this node's tool tip to be displayed in the UI, which is an
	 * internationalized value. In this case it is null, since these are
	 * dependant on the subform that the field is in (must be handled by the
	 * FormNode itself).
	 * @param aNode the Adobe Node instance who's tool tip is required.
	 * @return a String that contains the internationalized UI tool tip for the
	 *		   passed Node. Null if this is not applicable.
	 */
    this.getToolTip = function(aNode)
    {
    	return null;
	}

	/**
	 * Sets the FormNode that is using this delegate. It is mandatory that this
	 * is set to allow the delegate to access items in the FormNode as required.
	 * @param aFormNode the FormNode that is using this delegate.
	 */
    this.setFormNode = function(aFormNode)
    {
    	this.formNode = aFormNode;
	}

	/**
	 * Gets whether this delegate is used to validate node instances (e.g.
	 * mandatory fields, etc.) as well as their child nodes.
	 * @return a boolean -true if this should be called to perform validation.
	 */
	this.isUsedToValidateNodes = function()
	{
		return true;
	}
	
	/**
	 * Dummy function stub so the interface requirements are met.
	 */
	this.validateNode = function(aNodeInstance, updateDisplay,
								 aValidationFailure)
	{
		// It must be called to avoid being
		// overwirtten.
		this.formNode._validateNode(aNodeInstance, updateDisplay,
									aValidationFailure);
		
		
		if(!aNodeInstance.isNull){
		
			var countryNodeValue=aNodeInstance.parent.ddlCountry.rawValue;
			var regExpress="";
			var resourceError="";
			if(countryNodeValue===CANADA){
				regExpress= /^[a-z]\d[a-z](\s)?\d[a-z]\d\s*$/i ;
				resourceError=cResourceManager.get(this.base_errorAlias);
			}else if(countryNodeValue===USA){
			
				regExpress=/^\d{5}([-, ]\d{4})?$/
				resourceError=cResourceManager.get("error_usZipCodeFormat");
			}else{
				//not USA or Canada so don't test
				return aValidationFailure;
			}
			if(!regExpress.test(aNodeInstance.rawValue)){
				
				if(updateDisplay===true){
					cUiUtil.setColour(aNodeInstance,
										cConfigurationManager.get("colourError"))
				}						
				
				var errorMsg=cResourceManager.get(this.errorResourceAlias)+resourceError;						
				if(this.errorRootAlias &amp;&amp; this.nodeAlias){
					var errorPart1msg=cResourceManager.get(this.errorRootAlias);
					var rootIndex= (cGeneralUtil.getParentIndex(this.nodeAlias,aNodeInstance))+1;
					if(rootIndex&gt;=0){
					errorPart1msg=errorPart1msg+" "+rootIndex+",";
					}
					errorMsg=errorPart1msg+" "+errorMsg;
					validationType="PostalCodeValidation_"+rootIndex;
				}
				var newValidationFailure = cValidationFailure.createInstance("PostalCodeValidation",errorMsg);				
										
				if (aValidationFailure != null)
				{
					
					aValidationFailure.addNestedValidationFailure(newValidationFailure);
				}
				else
				{
					aValidationFailure = newValidationFailure;
			
				}						
			}else{
			
				cUiUtil.resetColour(aNodeInstance); //In case it previously failed
				this.formatZip(countryNodeValue,aNodeInstance)
			}
		}			
		return aValidationFailure;

	}
			
    /**
     * Describes this object. This is implemented in all objects since their
     * toString() cannot be overridden!
     * @return the description of this object.
     */
    this.asString = function()
	{
		var buffer = this.className + "[";
		
	    if (this.formNode != null)
	    {
	    	buffer += "formNode.somExpression= " + this.formNode.somExpression;
	    }
	    else
	    {
	    	buffer += "formNode= null";
	    }
		buffer += "]";
		buffer+=this.delegateIndex;
		return buffer;
	}
	this.formatZip=function(country,postalCodeInstance){
		var zipCodeValue=postalCodeInstance.rawValue;
		var formattedZipCode="";
		if (country===CANADA){
		
			formattedZipCode = (zipCodeValue.substring(0, 3) + " " + zipCodeValue.substring(zipCodeValue.length - 3, zipCodeValue.length)).toUpperCase();
			postalCodeInstance.rawValue=formattedZipCode ;
		}	
	}


	//===== PRIVATE ============================================================
	/**
	 * Gets the value of a country node. Issues a warning if the country node
	 * can't be found.
	 * @param aNode the Adobe Node instance that is being processed.
	 * @return the value of the related country node in this form.
	 */
	this._getCountry = function(aNode)
	{
		var countryNode = xfa.resolveNode(aNode.parent.somExpression + "."
										  + _getCountryNodeName());
				
		if (countryNode != null)
		{
    		return countryNode.rawValue;
		}
		cLog.info("PostalZipDelegate._getCountry couldn't find the country"
				  + " node for " + aNode.somExpression);
		return null;
	}
	//this assumes that the first repeating ancestor is the one we want. Works but potentially dangerous
	this._getRootNodeInstance=function(aNode, ROOT_FN){
	
		//if(!ROOT_FN) return null;
		
		return(ROOT_FN.getNodeInstance())
	}//end fn
}               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               

               
               
               
</script>
                     <script contentType="application/x-javascript" name="ContactPhoneFormatDelegate">
//imports
var cLog = 							script.core.util.Log;
var cPhoneFormatDelegate=			script.HCeForm.model.delegate.TelephoneFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPhoneFormatDelegate.createInstance();
	oDelegate.setErrorText("error_contact");
	oDelegate.setAsPhoneNumber();
	oDelegate.setCountryNodeAlias("ddlContactCountry");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="ContactFaxFormatDelegate">

//imports
var cLog = 							script.core.util.Log;
var cPhoneFormatDelegate=			script.HCeForm.model.delegate.TelephoneFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPhoneFormatDelegate.createInstance();
	oDelegate.setErrorText("error_contact");
	oDelegate.setAsFaxNumber();
	oDelegate.setCountryNodeAlias("ddlContactCountry");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="ContactEmailFormatDelegate">

//imports
var cLog = 							script.core.util.Log;
var cEmailFormatDelegate=		script.HCeForm.model.delegate.EmailFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cEmailFormatDelegate.createInstance();
	oDelegate.setErrorText("error_contact");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="ContactPostalCodeFormatDelegate">//imports
var cLog = 							script.core.util.Log;
var cPostalCodeFormatDelegate=		script.HCeForm.model.delegate.PostalCodeFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPostalCodeFormatDelegate.createInstance();
	oDelegate.setErrorText("error_contactAddress");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="SponsorPostalCodeFormatDelegate">//imports
var cLog = 							script.core.util.Log;
var cPostalCodeFormatDelegate=		script.HCeForm.model.delegate.PostalCodeFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPostalCodeFormatDelegate.createInstance();
	oDelegate.setErrorText("error_sponsorSiteAddress");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="SponsorEmailFormatDelegate">
//imports
var cLog = 							script.core.util.Log;
var cEmailFormatDelegate=		script.HCeForm.model.delegate.EmailFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cEmailFormatDelegate.createInstance();
	oDelegate.setErrorText("error_contactSponsor");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="SponsorPhoneFormatDelegate">

//imports
var cLog = 							script.core.util.Log;
var cPhoneFormatDelegate=			script.HCeForm.model.delegate.TelephoneFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPhoneFormatDelegate.createInstance();
	oDelegate.setErrorText("error_contactSponsor");
	oDelegate.setAsPhoneNumber();
	oDelegate.setCountryNodeAlias("ddlSponsorCountry");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="SponsorFaxFormatDelegate">//imports
var cLog = 							script.core.util.Log;
var cPhoneFormatDelegate=			script.HCeForm.model.delegate.TelephoneFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPhoneFormatDelegate.createInstance();
	oDelegate.setErrorText("error_contactSponsor");
	oDelegate.setAsFaxNumber();
	oDelegate.setCountryNodeAlias("ddlSponsorCountry");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="SitePostalCodeFormatDelegate">
//imports
var cLog = 							script.core.util.Log;
var cPostalCodeFormatDelegate=		script.HCeForm.model.delegate.PostalCodeFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPostalCodeFormatDelegate.createInstance();
	oDelegate.setErrorText("error_clinicalSiteAddress");
	oDelegate.setNodeAlias("sfPart3"); //can't make function calls, must be hard coded
	oDelegate.setErrorRootText("error_clinicalTrialSite");
	return oDelegate;
}
</script>
                     <?templateDesigner expand 1?>
                     <script contentType="application/x-javascript" name="QIPhoneFormatDelegate">
//imports
var cLog = 							script.core.util.Log;
var cPhoneFormatDelegate=			script.HCeForm.model.delegate.TelephoneFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPhoneFormatDelegate.createInstance();
	oDelegate.setErrorText("error_currQIName");
	oDelegate.setNodeAlias("sfPart3"); //can't make function calls, must be hard coded
	oDelegate.setErrorRootText("error_clinicalTrialSite");
	oDelegate.setAsPhoneNumber();
	oDelegate.setCountryNodeAlias("ddlCurrQICountry");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="QIFaxFormatDelegate">

//imports
var cLog = 							script.core.util.Log;
var cPhoneFormatDelegate=			script.HCeForm.model.delegate.TelephoneFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPhoneFormatDelegate.createInstance();
	oDelegate.setErrorText("error_currQIName");
	oDelegate.setNodeAlias("sfPart3"); //can't make function calls, must be hard coded
	oDelegate.setErrorRootText("error_clinicalTrialSite");
	oDelegate.setAsFaxNumber();
	oDelegate.setCountryNodeAlias("ddlCurrQICountry");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="QIEmailFormatDelegate">
//imports
var cLog = 							script.core.util.Log;
var cEmailFormatDelegate=		script.HCeForm.model.delegate.EmailFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cEmailFormatDelegate.createInstance();
	oDelegate.setErrorText("error_currQIName");
	oDelegate.setNodeAlias("sfPart3"); //can't make function calls, must be hard coded
	oDelegate.setErrorRootText("error_clinicalTrialSite");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="QIPostalCodeFormatDelegate">
//imports
var cLog = 							script.core.util.Log;
var cPostalCodeFormatDelegate=		script.HCeForm.model.delegate.PostalCodeFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPostalCodeFormatDelegate.createInstance();
	oDelegate.setErrorText("error_currQIAddress");
	oDelegate.setNodeAlias("sfPart3"); //can't make function calls, must be hard coded
	oDelegate.setErrorRootText("error_clinicalTrialSite");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="REBPhoneFormatDelegate">

//imports
var cLog = 							script.core.util.Log;
var cPhoneFormatDelegate=			script.HCeForm.model.delegate.TelephoneFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPhoneFormatDelegate.createInstance();
	oDelegate.setErrorText("error_currREBName");
	oDelegate.setNodeAlias("sfPart3"); //can't make function calls, must be hard coded
	oDelegate.setErrorRootText("error_clinicalTrialSite");
	oDelegate.setAsPhoneNumber();
	oDelegate.setCountryNodeAlias("ddlCurrREBCountry");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="REBFaxFormatDelegate">
//imports
var cLog = 							script.core.util.Log;
var cPhoneFormatDelegate=			script.HCeForm.model.delegate.TelephoneFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPhoneFormatDelegate.createInstance();
	oDelegate.setErrorText("error_currREBName");
	oDelegate.setNodeAlias("sfPart3"); //can't make function calls, must be hard coded
	oDelegate.setErrorRootText("error_clinicalTrialSite");
	oDelegate.setAsFaxNumber();
	oDelegate.setCountryNodeAlias("ddlCurrREBCountry");
	return oDelegate;
}
</script>
                     <script contentType="application/x-javascript" name="REBEmailFormatDelegate">

//imports
var cLog = 							script.core.util.Log;
var cEmailFormatDelegate=		script.HCeForm.model.delegate.EmailFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cEmailFormatDelegate.createInstance();
	oDelegate.setErrorText("error_currREBName");
	oDelegate.setNodeAlias("sfPart3"); //can't make function calls, must be hard coded
	oDelegate.setErrorRootText("error_clinicalTrialSite");
	return oDelegate;
}

</script>
                     <script contentType="application/x-javascript" name="REBPostalCodeFormatDelegate">

//imports
var cLog = 							script.core.util.Log;
var cPostalCodeFormatDelegate=		script.HCeForm.model.delegate.PostalCodeFormatDelegate;
/*******************************************************************************
 * Gets a new PostalCodeFormatDelegate. Adobe does not allow object instances
 * to be created outside of their packaging, so it must be done here.
 * Note that this is only intended for use by FormNodeFactory. All instances
 * should be created by that class.
 * @return the newPostalCodeFormatDelegate instance
 */
function createInstance()
{
	var oDelegate=  cPostalCodeFormatDelegate.createInstance();
	oDelegate.setErrorText("error_currREBAddress");
	oDelegate.setNodeAlias("sfPart3"); //can't make function calls, must be hard coded
	oDelegate.setErrorRootText("error_clinicalTrialSite");
	return oDelegate;
}
</script>
                  </variables>
                  <?templateDesigner expand 1?></subform>
               <bind match="none"/>
               <?templateDesigner expand 0?></subform>
            <subform h="50mm" name="nodeDefinitions" w="100mm">
               <variables>
                  <script contentType="application/x-javascript" name="MasterPage1">
var content={

	masterPage: {
		somExpression: "#pageSet",
		parentNodeKey: "root"},

	//Master Page / Form Page
	mp1FormPage: {
		somExpression: "Page1",
		parentNodeKey: "masterPage"},
		
	mp1Version:{
		somExpression:	"txtFormVersion",
		parentNodeKey:	"mp1FormPage",
		labelKey:		"lbVersion"},		
		
	mp1SFEnLogo: {
		somExpression:	"sfLogo_en",
		parentNodeKey:	"mp1FormPage"},
					
	mp1HcLogo: {
		somExpression:	"imgHCLogo",
		parentNodeKey:	"mp1SFEnLogo",
		toolTipKey:		"lbHealthCanada"},
	
	mp1SFFrLogo: {
		somExpression:	"sfLogo_fr",
		parentNodeKey:	"mp1FormPage"},
	
	mp1HcLogoFr: {
		somExpression:	"imgHCLogo_fr",
		parentNodeKey:	"mp1SFFrLogo",
		toolTipKey:		"lbHealthCanada"},	

	
	mp1Title:  {
		somExpression:	"lblMasterTitle",
		parentNodeKey:	"mp1FormPage",
		labelKey:		"lbApplTitle"},	
				
			
}


</script>
                  <script contentType="application/x-javascript" name="General">	
var content={
		root: {
			somExpression: "xfa.form.CTSI", //TODO: change the root node name
		},	
		sfPage1: {
			somExpression: "sfPage1",
			parentNodeKey: "root"},	
		
		sfMainHeader: {
			somExpression: "sfMainHeader",
			parentNodeKey: "sfPage1"},
			
		languageChoice: {
			somExpression: "pageLanguage",
			parentNodeKey: "sfMainHeader"},
			
		chkEnglish: {
			somExpression: "chkEnglish",
			parentNodeKey: "languageChoice"},
			
		chkFrancais: {
			somExpression: "chkFrancais",
			parentNodeKey: "languageChoice"},		
		
		lblFormTitle: {
			somExpression: "lblFormTitle",
			parentNodeKey: "sfMainHeader",
			labelKey:		"lbApplTitle"},
		
		
		sfCTSIContent: {
			somExpression: "sfCTSIContent",
			parentNodeKey: "sfPage1"},	
				
			
}
</script>
                  <script contentType="application/x-javascript" name="Part1">

var content={

	sfPart1: {
		somExpression: "sfPart1",
		parentNodeKey: "sfCTSIContent"},
	
	
	sfPart1Heading: {
		somExpression: "sfPart1Heading",
		parentNodeKey: "sfPart1"},
		
	lblPart1: {
		somExpression: "lblPart1",
		parentNodeKey: "sfPart1Heading",
		labelKey:		"lbPart1",
		},
	
	sfSubAction: {
		somExpression: "sfSubAction",
		parentNodeKey: "sfPart1"},
		
	rdoTrialType: {
		somExpression: "rdoTrialType",
		parentNodeKey: "sfSubAction"},
			
	rdoNew: {
		somExpression: "rdoNew",
		parentNodeKey: "rdoTrialType",
		labelKey:		"lbNewAppl"},
			
	rdoAmend: {
		somExpression: "rdoAmend",
		parentNodeKey: "rdoTrialType",
		labelKey:		"lbAmendAppl"},
		
	sfActionHeading: {
		somExpression: "sfActionHeading",
		parentNodeKey: "sfSubAction"},
	
	lblAction: {
		somExpression: "lblAction",
		parentNodeKey: "sfActionHeading",
		labelKey:		"lbSubAction"},
	
	ddlSubType: {
		somExpression: "ddlSubType",
		parentNodeKey: "sfSubAction",
		labelKey:		"lbSubType",
		pickListKey:	"subTypeList"},
	
	sfClinTrial: {
		somExpression: "sfClinTrial",
		parentNodeKey: "sfPart1"},
	
	sfTrialIdHeading: {
		somExpression: "sfTrialIdHeading",
		parentNodeKey: "sfClinTrial"},
	
	lblTrialId: {
		somExpression: "lblTrialId",
		parentNodeKey: "sfTrialIdHeading",
		labelKey:		"lbTrialIDInfo"},
	
	txtProtocolTitle: {
		somExpression: "txtProtocolTitle",
		parentNodeKey: "sfClinTrial",
		labelKey:		"lbProtocolTitle"},
	
	txtProtocolNumber: {
		somExpression: "txtProtocolNumber",
		parentNodeKey: "sfClinTrial",
		labelKey:		"lbProtocolNum"},
	
	txtPrimeControlNumber: {
		somExpression: "txtControlNumber",
		parentNodeKey: "sfClinTrial",
		labelKey:		"lbControlNumber"},
		
	sfAddControlNum: {
		somExpression: "sfAddControlNum",
		parentNodeKey: "sfClinTrial"},
	
	btnAddControlNum: {
		somExpression: "btnAddControlNum",
		parentNodeKey: "sfAddControlNum"},
	
	txtRegistryNumber: {
		somExpression: "txtRegistryNumber",
		parentNodeKey: "sfClinTrial",
		labelKey:		"lbRegFileNum"},
				
	sfCTNList: {
		somExpression: "sfCTNList",
		parentNodeKey: "sfClinTrial"},

	sfControlNumber: {
		somExpression: "sfControlNumber",
		parentNodeKey: "sfCTNList"},
	
	txtControlNumber: {
		somExpression:	"txtControlNumber",
		parentNodeKey:	"sfControlNumber",
		labelKey:		"lbControlNumber"},
	
	sfDeleteCT: {
		somExpression: "sfDeleteCT",
		parentNodeKey: "sfControlNumber"},
	
	btnDeleteCT: {
		somExpression:	"btnDeleteCT",
		parentNodeKey:	"sfDeleteCT",
		labelKey:		"lbDeleteControlNumber"},
	
}
</script>
                  <script contentType="application/x-javascript" name="Instructions">

var content={

	
	sfInstructions: {
			somExpression: "sfInstructions",
			parentNodeKey: "sfPage1"},
		
	btnHideInstructions: {
			somExpression: "btnHideInstructions",
			parentNodeKey: "sfInstructions",
			labelKey:		"lbHideInstruct"},
		
	btnViewInstructions: {
			somExpression:	"btnViewInstructions",
			parentNodeKey:	"sfInstructions",
			labelKey:		"lbShowInstruct"},
	
	
	sfPreInstruct: {
		somExpression: "sfPreInstruct",
		parentNodeKey: "sfPage1"},
		
	sfPreInstruct1: {
		somExpression: "sfPreInstruct1",
		parentNodeKey: "sfPreInstruct"},
	
	lblMandatory: {
		somExpression: "lblMandatory",
		parentNodeKey: "sfPreInstruct1",
		labelKey:		"lbMandatory"},
	
	sfPreInstruct2: {
		somExpression: "sfPreInstruct2",
		parentNodeKey: "sfPreInstruct"},
	
	lblValidation: {
		somExpression: "lblValidation",
		parentNodeKey: "sfPreInstruct2",
		labelKey:		"lbValidError"},
			
	
	sfInstructionsContent: {
		somExpression: "sfInstructionsContent",
		parentNodeKey: "sfPage1"},

	lblInstructionsHead: {
		somExpression: "lblInstructionsHead",
		parentNodeKey: "sfInstructionsContent",
		labelKey:		"lbInstructionsHeading"
		},
	
	
	sfInstructList: {
		somExpression: "sfInstructList",
		parentNodeKey: "sfInstructionsContent"},
	
	sfInstruct1: {
		somExpression: "sfInstruct1",
		parentNodeKey: "sfInstructList"},
	
	lblInstruct1: {
		somExpression: "lblInstruct1",
		parentNodeKey: "sfInstruct1",
		labelKey:		"lbInstruct1"},
	
	sfInstruct2: {
		somExpression: "sfInstruct2",
		parentNodeKey: "sfInstructList"},
	
	lblInstruct2: {
		somExpression: "lblInstruct2",
		parentNodeKey: "sfInstruct2",
		labelKey:		"lbInstruct2"},
	
	sfInstruct3: {
		somExpression: "sfInstruct3",
		parentNodeKey: "sfInstructList"},
	
	lblInstruct3: {
		somExpression: "lblInstruct3",
		parentNodeKey: "sfInstruct3",
		labelKey:		"lbInstruct3"},
	
	sfInstruct4: {
		somExpression: "sfInstruct4",
		parentNodeKey: "sfInstructList"},
	
	lblInstruct4: {
		somExpression: "lblInstruct4",
		parentNodeKey: "sfInstruct4",
		labelKey:		"lbInstruct4"},
	
	sfInstruct5: {
		somExpression: "sfInstruct5",
		parentNodeKey: "sfInstructList"},
	
	lblInstruct5: {
		somExpression: "lblInstruct5",
		parentNodeKey: "sfInstruct5",
		labelKey:		"lbInstruct5"},
	//add more instructions here

}
</script>
                  <script contentType="application/x-javascript" name="Finalize">

var content={

	sfFinalizeButton: {
		somExpression: "sfFinalizeButton",
		parentNodeKey: "sfPage1"}, //TODO: reparent if needed
	
	btnFinalizeAndLock: {
		somExpression: "btnFinalizeAndLock",
		parentNodeKey: "sfFinalizeButton",
		labelKey: 		"lbFinalize"},
	
	btnModify: {
		somExpression: "btnModify",
		parentNodeKey: "sfFinalizeButton",
		labelKey: 		"lbModify"},

}
</script>
                  <script contentType="application/x-javascript" name="Part2">

var content={

	sfPart2: {
		somExpression: "sfPart2",
		parentNodeKey: "sfCTSIContent"},

	sfPart2AHeading: {
		somExpression: "sfPart2AHeading",
		parentNodeKey: "sfPart2"},
	
	lblDrugSponsor: {
		somExpression: "lblDrugSponsor",
		parentNodeKey: "sfPart2AHeading",
		labelKey:		"lbPart2",
		},
	
	sfDrugProdHeading: {
		somExpression: "sfDrugProdHeading",
		parentNodeKey: "sfPart2"},
	
	lblDrugProd: {
		somExpression: "lblDrugProd",
		parentNodeKey: "sfDrugProdHeading",
		labelKey:		"lbProductInfo",
		},
	
	txtDrugBrandName: {
		somExpression: "txtDrugBrandName",
		parentNodeKey: "sfPart2",
		labelKey:		"lbBrandName"},
	
	txtDrugCommonName: {
		somExpression: "txtDrugCommonName",
		parentNodeKey: "sfPart2",
		labelKey:		"lbCommonName"},
	
	sfSponsorInfo: {
		somExpression: "sfSponsorInfo",
		parentNodeKey: "sfPart2"},
	
	sfSponsorInfoHeading: {
		somExpression: "sfSponsorInfoHeading",
		parentNodeKey: "sfSponsorInfo"},
	
	lblSponsorInfo: {
		somExpression: "lblSponsorInfo",
		parentNodeKey: "sfSponsorInfoHeading",
		labelKey:		"lbSponsorInfo"},
	
	sfSponsorAddress: {
		somExpression: "sfSponsorAddress",
		parentNodeKey: "sfSponsorInfo"},
	
	txtSponsorName: {
		somExpression: "txtSponsorName",
		parentNodeKey: "sfSponsorAddress",
		labelKey:		"lbSponsor",
		},
	
	txtSponsorStreetAddress: {
		somExpression: "txtSponsorStreetAddress",
		parentNodeKey: "sfSponsorAddress",
		labelKey:		"lbAddress"},
	
	txtSponsorCity: {
		somExpression: "txtSponsorCity",
		parentNodeKey: "sfSponsorAddress",
		labelKey:		"lbCity"},
	
	ddlSponsorCountry: {
		somExpression: "ddlCountry",
		parentNodeKey: "sfSponsorAddress",
		pickListKey:	"countryList",
		labelKey:		"lbCountry"},
	
	ddlSponsorProvince: {
		somExpression: "ddlProvince",
		parentNodeKey: "sfSponsorAddress",
		//labelKey:		"lbProvince", delegate handles
		delegate:	 	"script.core.model.delegate.ProvinceStateDelegate"},
	
	txtSponsorProvince: {
		somExpression: "txtProvince",
		parentNodeKey: "sfSponsorAddress",
		labelKey:		"provinceState"},
	
	txtSponsorPostalCode: {
		somExpression: "txtPostalCode",
		parentNodeKey: "sfSponsorAddress",
		delegate:		"script.HCeForm.model.delegate.SponsorPostalCodeFormatDelegate"},
	
	sfSponsorContact: {
		somExpression: "sfSponsorContact",
		parentNodeKey: "sfSponsorInfo"},
	
	sfSponsorContactHeading: {
		somExpression: "sfSponsorContactHeading",
		parentNodeKey: "sfSponsorContact"},
	
	lblSponsorHeading: {
		somExpression: "lblSponsor",
		parentNodeKey: "sfSponsorContactHeading",
		labelKey:		"lbContactPersonHeading",
		},
	
	sfSponsorContactDetails: {
		somExpression: "sfSponsorContactDetails",
		parentNodeKey: "sfSponsorContact"},
	
	ddlSponsorSalutation: {
		somExpression: "ddlSponsorSalutation",
		parentNodeKey: "sfSponsorContactDetails",
		labelKey:		"lbSalutation",
		pickListKey:	"salutationList",
		},
	
	txtSponsorGivenName: {
		somExpression: "txtSponsorGivenName",
		parentNodeKey: "sfSponsorContactDetails",
		labelKey:		"lbGivenName"},
	
	txtSponsorInitials: {
		somExpression: "txtSponsorInitials",
		parentNodeKey: "sfSponsorContactDetails",
		labelKey:		"lbInitials"},
	
	txtSponsorSurname: {
		somExpression: "txtSponsorSurname",
		parentNodeKey: "sfSponsorContactDetails",
		labelKey:		"lbSurname",
		},
	
	txtSponsorTelephone: {
		somExpression: "txtSponsorTelephone",
		parentNodeKey: "sfSponsorContactDetails",
		labelKey:		"lbTelephone",
		delegate:		"script.HCeForm.model.delegate.SponsorPhoneFormatDelegate"
		},
	
	txtSponsorExtension: {
		somExpression: "txtSponsorExtension",
		parentNodeKey: "sfSponsorContactDetails",
		labelKey:		"lbExtension",
		},
	
	txtSponsorFax: {
		somExpression: "txtSponsorFax",
		parentNodeKey: "sfSponsorContactDetails",
		labelKey:		"lbFax",
		delegate:		"script.HCeForm.model.delegate.SponsorFaxFormatDelegate"},
	
	ddlSponsorLangPref: {
		somExpression: "ddlSponsorLangPref",
		parentNodeKey: "sfSponsorContactDetails",
		labelKey:		"lbLangPref",
		pickListKey:	"languageList"},
	
		
	txtSponsorTitle: {
		somExpression: "txtSponsorTitle",
		parentNodeKey: "sfSponsorContactDetails",
		labelKey:			"lbPositionTitle",
		fieldNumber:	"17",
		
		},	
	
	txtSponsorEmail: {
		somExpression: "txtSponsorEmail",
		parentNodeKey: "sfSponsorContactDetails",
		labelKey:		"lbEmail",
		delegate:		"script.HCeForm.model.delegate.SponsorEmailFormatDelegate"},
	
	sfContactHeading: {
		somExpression: "sfContactHeading",
		parentNodeKey: "sfSponsorInfo"},
	
	lblContactHeading: {
		somExpression: "lblContactHeading",
		parentNodeKey: "sfContactHeading",
		labelKey:		"lbContactInfo"},
	
	chkSponsorAddrSame: {
		somExpression: "chkSponsorAddrSame",
		parentNodeKey: "sfSponsorInfo",
		labelKey:		"lbContactSameSponsor"},
			
	sfTrialContact: {
		somExpression: "sfTrialContact",
		parentNodeKey: "sfPart2"},
	
	sfTrialContactAddress: {
		somExpression: "sfTrialContactAddress",
		parentNodeKey: "sfTrialContact"},
	
	txtContactCompany: {
		somExpression: "txtCompany",
		parentNodeKey: "sfTrialContactAddress",
		labelKey:		"lbCompanyOrg",
		},
	
	txtContactStreetAddress: {
		somExpression:	"txtStreetAddress",
		parentNodeKey:	"sfTrialContactAddress",
		labelKey:		"lbAddress"},
	
	txtContactCity: {
		somExpression: "txtCity",
		parentNodeKey: "sfTrialContactAddress",
		labelKey:		"lbCity",
		},
	
	ddlContactCountry: {
		somExpression: "ddlCountry",
		parentNodeKey: "sfTrialContactAddress",
		labelKey:		"lbCountry",
		pickListKey:	"countryList"},
	
	ddlContactProvince: {
		somExpression: "ddlProvince",
		parentNodeKey: "sfTrialContactAddress",
		labelKey:		"lbProvince",
		delegate:	 	"script.core.model.delegate.ProvinceStateDelegate"
		},
	
	txtContactProvince: {
		somExpression: "txtProvince",
		parentNodeKey: "sfTrialContactAddress",
		labelKey:		"provinceState"},
	
	txtContactPostalCode: {
		somExpression: "txtPostalCode",
		parentNodeKey: "sfTrialContactAddress",
		delegate:		"script.HCeForm.model.delegate.ContactPostalCodeFormatDelegate"
		}, //label handled by the delegate
	
	sfTrialContactDetails: {
		somExpression: "sfTrialContactDetails",
		parentNodeKey: "sfTrialContact"},
	
	ddlTrialContactSalutation: {
		somExpression: "ddlTrialContactSalutation",
		parentNodeKey: "sfTrialContactDetails",
		labelKey:		"lbSalutation",
		pickListKey:	"salutationList",
		},
	
	txtTrialContactGivenName: {
		somExpression: "txtTrialContactGivenName",
		parentNodeKey: "sfTrialContactDetails",
		labelKey:		"lbGivenName"},
	
	txtTrialContactInitials: {
		somExpression: "txtTrialContactInitials",
		parentNodeKey: "sfTrialContactDetails",
		labelKey:		"lbInitials"
		},
	
	txtTrialContactSurname: {
		somExpression: "txtTrialContactSurname",
		parentNodeKey: "sfTrialContactDetails",
		labelKey:		"lbSurname",
		},
	
	txtTrialContactTitle: {
		somExpression: "txtTrialContactTitle",
		parentNodeKey: "sfTrialContactDetails",
		labelKey:		"lbPositionTitle",
		}, //TODO
	
	ddlTrialContactLangPref: {
		somExpression: "ddlTrialContactLangPref",
		parentNodeKey: "sfTrialContactDetails",
		labelKey:		"lbLangPref",
		pickListKey:	"languageList"},
	
	txtTrialContactTelephone: {
		somExpression: "txtTrialContactTelephone",
		parentNodeKey: "sfTrialContactDetails",
		labelKey:		"lbTelephone",
		delegate:		"script.HCeForm.model.delegate.ContactPhoneFormatDelegate"
		},
	
	txtTrialContactExtension: {
		somExpression: "txtTrialContactExtension",
		parentNodeKey: "sfTrialContactDetails",
		labelKey:		"lbExtension"
		},
	
	txtTrialContactFax: {
		somExpression: "txtTrialContactFax",
		parentNodeKey: "sfTrialContactDetails",
		labelKey:		"lbFax",
		delegate:		"script.HCeForm.model.delegate.ContactFaxFormatDelegate"},
	
	txtTrialContactEmail: {
		somExpression:	"txtTrialContactEmail",
		parentNodeKey:	"sfTrialContactDetails",
		labelKey:		"lbEmail",
		delegate:		"script.HCeForm.model.delegate.ContactEmailFormatDelegate"
		},
			
}
</script>
                  <script contentType="application/x-javascript" name="Part3">

var content={

	sfPart3: {
		somExpression: "sfPart3",
		parentNodeKey: "sfCTSIContent"},
	
	sfSiteInfo: {
		somExpression: "sfSiteInfo",
		parentNodeKey: "sfPart3"},
	
	txtChangeNum: {
		somExpression: "txtChangeNum",
		parentNodeKey: "sfSiteInfo"}, //TODO
		
	btnDeleteSite: {
		somExpression:	"btnDeleteSite",
		parentNodeKey:	"sfSiteInfo",
		labelKey:		"lbDeleteSite"},	
	
	sfClinTrialHeading: {
		somExpression: "sfClinTrialHeading",
		parentNodeKey: "sfPart3"},
	
	lblClinTrialHeading: {
		somExpression: "lblClinTrialHeading",
		parentNodeKey: "sfClinTrialHeading",
		labelKey:		"lbPart3",
		},	
		
	ddlChangeType:{
		somExpression: "ddlChangeType",
		parentNodeKey: "sfPart3",
		labelKey:		"lbChangeType",
		pickListKey:	"amendTypeList"}, 
			
	sfChangeReason: {
		somExpression: "sfChangeReason",
		parentNodeKey: "sfPart3"},
	
	lblChangeReason: {
		somExpression: "lblChangeReason",
		parentNodeKey: "sfChangeReason",
		labelKey:		"lbReasonText",
		}, //TODO
	
	chkDateChange: {
		somExpression: "chkDateChange",
		parentNodeKey: "sfChangeReason",
		labelKey:		"lbDateChange"},
	
	chkSiteNameChange: {
		somExpression: "chkSiteNameChange",
		parentNodeKey: "sfChangeReason",
		labelKey:		"lbSiteNameChange",
		},
	
	chkSiteAddressChange: {
		somExpression: "chkSiteAddressChange",
		parentNodeKey: "sfChangeReason",
		labelKey:		"lbSiteAddressChange"},
	
	chkQINameChange: {
		somExpression: "chkQINameChange",
		parentNodeKey: "sfChangeReason",
		labelKey:		"lbQINameChange",
		},
	
	chkQIAddressChange: {
		somExpression: "chkQIAddressChange",
		parentNodeKey: "sfChangeReason",
		labelKey:		"lbQIAddressChange",
		},
	
	chkREBPersonChange: {
		somExpression: "chkREBPersonChange",
		parentNodeKey: "sfChangeReason",
		labelKey:		"lbREBNameChange",
		},
	
	chkREBAddressChange: {
		somExpression: "chkREBAddressChange",
		parentNodeKey: "sfChangeReason",
		labelKey:		"lbREBAddressChange",
		},
		
	
	sfClinicalTrialSite: {
		somExpression: "sfClinicalTrialSite",
		parentNodeKey: "sfPart3"},
	
	
	/*
	sfCurrTrialHeading: {
		somExpression: "sfCurrTrialHeading",
		parentNodeKey: "sfClinicalTrialSite"},
	*/
	sfCurrSiteHeading: {
		somExpression: "sfCurrSiteHeading",
		parentNodeKey: "sfClinicalTrialSite"},
	
	lblCurrSiteAddrHeading: {
		somExpression: "lblCurrSiteAddrHeading",
		parentNodeKey: "sfCurrSiteHeading",
		labelKey:		"lbCurrClinSiteAddress",
		},
	
	txtCurrSiteName: {
		somExpression: "txtCurrSiteName",
		parentNodeKey: "sfClinicalTrialSite",
		labelKey:		"lbCurrSiteName",
		},
			
	sfOldSiteName: {
		somExpression: "sfOldSiteName",
		parentNodeKey: "sfClinicalTrialSite"},
	
	txtOldSiteName: {
		somExpression: "txtOldSiteName",
		parentNodeKey: "sfOldSiteName"}, //TODO
	
	sfCurrSiteAddressDetails: {
		somExpression: "sfCurrSiteAddressDetails",
		parentNodeKey: "sfClinicalTrialSite"},
	
	txtCurrSiteAddress: {
		somExpression: "txtCurrSiteAddress",
		parentNodeKey: "sfCurrSiteAddressDetails",
		labelKey:		"lbAddress"}, //TODO
	
	txtCurrSiteCity: {
		somExpression: "txtCurrSiteCity",
		parentNodeKey: "sfCurrSiteAddressDetails",
		labelKey:		"lbCity"},
	
	ddlCurrSiteCountry: {
		somExpression: "ddlCountry",
		parentNodeKey: "sfCurrSiteAddressDetails",
		labelKey:		"lbCountry",
		pickListKey:	"countryList"},
	
	ddlCurrSiteProvince: {
		somExpression: "ddlProvince",
		parentNodeKey: "sfCurrSiteAddressDetails",
		labelKey:		"lbProvince",
		delegate:	 	"script.core.model.delegate.ProvinceStateDelegate",
		},
	
	txtCurrSiteProvince: {
		somExpression: "txtProvince",
		parentNodeKey: "sfCurrSiteAddressDetails",
		//labelKey:	"provinceState",
		},
	
	txtCurrSitePostalCode: {
		somExpression: "txtCurrSitePostalCode",
		parentNodeKey: "sfCurrSiteAddressDetails",
		delegate:		"script.HCeForm.model.delegate.SitePostalCodeFormatDelegate",
		}, //label handled via the delegate
	
	sfOldSiteAddressDetails: {
		somExpression: "sfOldSiteAddressDetails",
		parentNodeKey: "sfClinicalTrialSite"},
	
	sfOldSiteAddrHeading: {
		somExpression: "sfOldSiteAddrHeading",
		parentNodeKey: "sfOldSiteAddressDetails"},
	
	lblOldSiteAddrHeading: {
		somExpression: "lblOldSiteAddrHeading",
		parentNodeKey: "sfOldSiteAddrHeading",
		labelKey:		"lbPrevClinSiteAddress"},
	
	txtOldSiteAddress: {
		somExpression: "txtOldSiteAddress",
		parentNodeKey: "sfOldSiteAddressDetails",
		labelKey:		"lbAddress",
		},
	
	txtOldSiteCity: {
		somExpression: "txtOldSiteCity",
		parentNodeKey: "sfOldSiteAddressDetails",
		labelKey:		"lbCity",
		},
	
	ddlOldSiteCountry: {
		somExpression: "ddlCountry",
		parentNodeKey: "sfOldSiteAddressDetails",
		labelKey:		"lbCountry",
		pickListKey:	"countryList",
		},
	
	ddlOldSiteProvince: {
		somExpression: "ddlProvince",
		parentNodeKey: "sfOldSiteAddressDetails",
		labelKey:		"lbProvince",
		delegate:	 	"script.core.model.delegate.ProvinceStateDelegate"
		},
	
	txtOldSiteProvince: {
		somExpression: "txtProvince",
		parentNodeKey: "sfOldSiteAddressDetails",
		labelKey:		"lbProvince",
		},
	
	txtOldSitePostalCode: {
		somExpression: "txtOldSitePostalCode",
		parentNodeKey: "sfOldSiteAddressDetails",
		labelKey:		"postal",
	},
	
	dteCurrComenceDate: {
		somExpression: "dteComenceDate",
		parentNodeKey: "sfPart3",
		labelKey:		"lbAmendDate",
		},
	//prev date
	sfPrevCommDate: {
		somExpression: "sfPrevCommDate",
		parentNodeKey: "sfPart3"},

	dtePrevComenceDate: {
		somExpression: "dtePrevComenceDate",
		parentNodeKey: "sfPrevCommDate"},	
	
	sfQualifiedInvest: {
		somExpression: "sfQualifiedInvest",
		parentNodeKey: "sfPart3"},
	
	sfQIHeading: {
		somExpression: "sfQIHeading",
		parentNodeKey: "sfQualifiedInvest"},
	
	lblQIHeading: {
		somExpression: "lblQIHeading",
		parentNodeKey: "sfQIHeading",
		labelKey:		"lbQualifiedInvestigator"},
	
	lblQIInstruct: {
		somExpression: "lblQIInstruct",
		parentNodeKey: "sfQIHeading",
		labelKey:		"lbQUIDecl"},
	
	sfQIContactDetails: {
		somExpression: "sfQIContactDetails",
		parentNodeKey: "sfQualifiedInvest"},
	
	sfOldQIName: {
		somExpression: "sfOldQIName",
		parentNodeKey: "sfQIContactDetails"},
	
	sfOldQIHeading: {
		somExpression: "sfOldQIHeading",
		parentNodeKey: "sfOldQIName"},
	
	lblOldQIName: {
		somExpression: "lblOldQIName",
		parentNodeKey: "sfOldQIHeading",
		labelKey:		"lbPrevQIName",
		},
	
	txtOldQIGivenName: {
		somExpression: "txtOldQIGivenName",
		parentNodeKey: "sfOldQIName"},
	
	txtOldQIInitials: {
		somExpression: "txtOldQIInitials",
		parentNodeKey: "sfOldQIName"},
	
	txtOldQISurname: {
		somExpression: "txtOldQISurname",
		parentNodeKey: "sfOldQIName"},
	
	txtOldQIDesignation: {
		somExpression: "txtOldQIDesignation",
		parentNodeKey: "sfOldQIName"},
	
	txtOldQITitle: {
		somExpression: "txtOldQITitle",
		parentNodeKey: "sfOldQIName"},
		
	sfOldQINameHide: {
		somExpression: "sfOldQINameHide",
		parentNodeKey: "sfOldQIName"},

	ddlPrevQILangPref: {
		somExpression: "ddlPrevQILangPref",
		parentNodeKey: "sfOldQINameHide",
		pickListKey:	"languageList"},
	
	txtPrevQITelephone: {
		somExpression: "txtPrevQITelephone",
		parentNodeKey: "sfOldQINameHide"},
	
	txtPrevQIExtension: {
		somExpression: "txtPrevQIExtension",
		parentNodeKey: "sfOldQINameHide"},
	
	txtPrevQIFax: {
		somExpression: "txtPrevQIFax",
		parentNodeKey: "sfOldQINameHide"},
	
	txtPrevQIEmail: {
		somExpression: "txtPrevQIEmail",
		parentNodeKey: "sfOldQINameHide"},
	
	sfCurrQIName: {
		somExpression: "sfCurrQIName",
		parentNodeKey: "sfQIContactDetails"},
	
	sfCurrQIHeading: {
		somExpression: "sfCurrQIHeading",
		parentNodeKey: "sfCurrQIName"},
	
	lblCurrQIName: {
		somExpression: "lblCurrQIName",
		parentNodeKey: "sfCurrQIHeading",
		labelKey:		"lbCurrQIName"},
	
	txtCurrQIGivenName: {
		somExpression: "txtCurrQIGivenName",
		parentNodeKey: "sfCurrQIName"},
	
	txtCurrQIInitials: {
		somExpression: "txtCurrQIInitials",
		parentNodeKey: "sfCurrQIName"},
	
	txtCurrQISurname: {
		somExpression: "txtCurrQISurname",
		parentNodeKey: "sfCurrQIName"},
	
	txtCurrQIDesignation: {
		somExpression: "txtCurrQIDesignation",
		parentNodeKey: "sfCurrQIName"},
	
	txtCurrQITitle: {
		somExpression: "txtCurrQITitle",
		parentNodeKey: "sfCurrQIName"},
	
	ddlCurrQILangPref: {
		somExpression: "ddlCurrQILangPref",
		parentNodeKey: "sfCurrQIName",
		pickListKey:	"languageList"},
	
	txtCurrQITelephone: {
		somExpression: "txtCurrQITelephone",
		parentNodeKey: "sfCurrQIName",
		delegate:		"script.HCeForm.model.delegate.QIPhoneFormatDelegate"},
	
	txtCurrQIExtension: {
		somExpression: "txtCurrQIExtension",
		parentNodeKey: "sfCurrQIName"},
	
	txtCurrQIFax: {
		somExpression: "txtCurrQIFax",
		parentNodeKey: "sfCurrQIName",
		delegate:		"script.HCeForm.model.delegate.QIFaxFormatDelegate"},
	
	txtCurrQIEmail: {
		somExpression: "txtCurrQIEmail",
		parentNodeKey: "sfCurrQIName",
		delegate:		"script.HCeForm.model.delegate.QIEmailFormatDelegate"},
	
	sfCurrQIAddrHeading: {
		somExpression: "sfCurrQIAddrHeading",
		parentNodeKey: "sfQIContactDetails"},
	
	lblCurrQIAddr: {
		somExpression: "lblCurrQIAddr",
		parentNodeKey: "sfCurrQIAddrHeading",
		}, //todo
	
	chkCurrQIAddrSameAs: {
		somExpression: "chkCurrQIAddrSameAs",
		parentNodeKey: "sfQIContactDetails"},
	
	sfCurrQIAddressDetails: {
		somExpression: "sfCurrQIAddressDetails",
		parentNodeKey: "sfQualifiedInvest"},
	
	txtCurrQIAddress: {
		somExpression: "txtCurrQIAddress",
		parentNodeKey: "sfCurrQIAddressDetails"},
	
	txtCurrQICity: {
		somExpression: "txtCurrQICity",
		parentNodeKey: "sfCurrQIAddressDetails"},
	
	ddlCurrQICountry: {
		somExpression: "ddlCountry",
		parentNodeKey: "sfCurrQIAddressDetails",
		pickListKey:	"countryListNA"
		},
	
	ddlCurrQIProvince: {
		somExpression: "ddlProvince",
		parentNodeKey: "sfCurrQIAddressDetails",
		delegate:	 	"script.core.model.delegate.ProvinceStateDelegate"
		},

	txtCurrQIProvince: {
		somExpression: "txtProvince",
		parentNodeKey: "sfCurrQIAddressDetails"},
	
	txtCurrQIPostalCode: {
		somExpression: "txtPostalCode",
		parentNodeKey: "sfCurrQIAddressDetails",
		delegate:		"script.HCeForm.model.delegate.QIPostalCodeFormatDelegate",
		},
	//old  QI address	
	sfPrevQIAddressDetails: {
		somExpression: "sfPrevQIAddressDetails",
		parentNodeKey: "sfQualifiedInvest"},

	sfPrevQIAddrHeading: {
		somExpression: "sfPrevQIAddrHeading",
		parentNodeKey: "sfPrevQIAddressDetails"},
	
	lblPrevQIAddr: {
		somExpression: "lblPrevQIAddr",
		parentNodeKey: "sfPrevQIAddrHeading"},
	
	txtPrevQIAddress: {
		somExpression: "txtPrevQIAddress",
		parentNodeKey: "sfPrevQIAddressDetails"},
	
	txtPrevQICity: {
		somExpression: "txtPrevQICity",
		parentNodeKey: "sfPrevQIAddressDetails"},
	
	ddlPrevQICountry: {
		somExpression: "ddlCountry",
		parentNodeKey: "sfPrevQIAddressDetails",
		pickListKey:	"countryListNA"
		},
	
	ddlPrevQIProvince: {
		somExpression: "ddlProvince",
		parentNodeKey: "sfPrevQIAddressDetails",
		delegate:	 	"script.core.model.delegate.ProvinceStateDelegate",
		},
	
	txtPrevQIProvince: {
		somExpression: "txtProvince",
		parentNodeKey: "sfPrevQIAddressDetails"},
	
	txtPrevQIPostalCode: {
		somExpression: "txtPostalCode",
		parentNodeKey: "sfPrevQIAddressDetails",		
		//delegate:		"script.HCeForm.model.delegate.ServicePostalCodeDelegate",
		},			
	//end old QI address
	
	sfResearchEthics: {
		somExpression: "sfResearchEthics",
		parentNodeKey: "sfPart3"},
	
	sfREBHeading: {
		somExpression: "sfREBHeading",
		parentNodeKey: "sfResearchEthics"},
	
	lblREBHeading: {
		somExpression: "lblREBHeading",
		parentNodeKey: "sfREBHeading",
		labelKey:		"lbRebApproval"},
	
	lblREBEthics: {
		somExpression: "lblREBEthics",
		parentNodeKey: "sfREBHeading"},
	
	//currentAddress
	sfCurrREBAddress: {
		somExpression: "sfREBAddress",
		parentNodeKey: "sfResearchEthics"},
	
	txtCurrREBCompany: {
		somExpression: "txtREBCompany",
		parentNodeKey: "sfCurrREBAddress"},
	
	dteCurrApprovalDate: {
		somExpression: "dteApprovalDate",
		parentNodeKey: "sfCurrREBAddress"},
	//prevDate
	sfPrevApprovalDate: {
		somExpression: "sfPrevApprovalDate",
		parentNodeKey: "sfCurrREBAddress"},
	
	dtePrevApprovalDate: {
		somExpression: "dtePrevApprovalDate",
		parentNodeKey: "sfPrevApprovalDate"},
	
	sfREBCurrAddrHeading: {
		somExpression: "sfREBCurrAddrHeading",
		parentNodeKey: "sfCurrREBAddress"},

	lbREBCurrAdrr: {
		somExpression: "lbREBCurrAdrr",
		parentNodeKey: "sfREBCurrAddrHeading",
		labelKey:		"lbCurrRebAddress"},
		
	
	txtCurrREBStreetAddress: {
		somExpression: "txtREBStreetAddress",
		parentNodeKey: "sfCurrREBAddress"},
	
	txtCurrREBCity: {
		somExpression: "txtREBCity",
		parentNodeKey: "sfCurrREBAddress"},
	
	ddlCurrREBCountry: {
		somExpression: "ddlCountry",
		parentNodeKey: "sfCurrREBAddress",
		pickListKey:	"countryListNA"
		},
	
	ddlCurrREBProvince: {
		somExpression: "ddlProvince",
		parentNodeKey: "sfCurrREBAddress",
		delegate:	 	"script.core.model.delegate.ProvinceStateDelegate"
		},
	
	txtCurrREBProvince: {
		somExpression: "txtProvince",
		parentNodeKey: "sfCurrREBAddress"},
	
	txtCurrREBPostalCode: {
		somExpression: "txtREBPostalCode",
		parentNodeKey: "sfCurrREBAddress",
		delegate:		"script.HCeForm.model.delegate.REBPostalCodeFormatDelegate",
		},
	//@@@@@@@@@@@@@previous Reba Address
		sfPrevREBAddress: {
			somExpression: "sfPrevREBAddress",
			parentNodeKey: "sfResearchEthics"},
		
		sfREBPrevAddrHeading: {
				somExpression: "sfREBPrevAddrHeading",
				parentNodeKey: "sfPrevREBAddress"},

		lblPrevREBAdrr: {
			somExpression: "lblPrevREBAdrr",
			parentNodeKey: "sfREBPrevAddrHeading",
			labelKey:		"lbPrevRebAddress",
			},
		
		txtPrevREBStreetAddress: {
			somExpression: "txtPrevREBStreetAddress",
			parentNodeKey: "sfPrevREBAddress"},
		
		txtPrevREBCity: {
			somExpression: "txtPrevREBCity",
			parentNodeKey: "sfPrevREBAddress"},
		
		ddlPrevREBCountry: {
			somExpression: "ddlCountry",
			parentNodeKey: "sfPrevREBAddress",
			pickListKey:	"countryListNA"},
		
		ddlPrevREBProvince: {
			somExpression: "ddlProvince",
			parentNodeKey: "sfPrevREBAddress"},
		
		txtPrevREBProvince: {
			somExpression: "txtProvince",
			parentNodeKey: "sfPrevREBAddress"},
		
		txtPrevREBPostalCode: {
			somExpression: "txtPrevREBPostalCode",
			parentNodeKey: "sfPrevREBAddress"},			
		//end prevRebaAddress
		
	sfREBCurrName: {
		somExpression: "sfREBCurrName",
		parentNodeKey: "sfResearchEthics"},
	
	sfREBCurrContactHeading: {
		somExpression: "sfREBCurrContactHeading",
		parentNodeKey: "sfREBCurrName"},
	
	lblCurrRebaPerson: {
		somExpression: "lblCurrRebaPerson",
		parentNodeKey: "sfREBCurrContactHeading",
		labelKey:		"lbCurrRebContact"},
	
	txtREBCurrGivenName: {
		somExpression: "txtREBCurrGivenName",
		parentNodeKey: "sfREBCurrName"},
	
	txtREBCurrInitials: {
		somExpression: "txtREBCurrInitials",
		parentNodeKey: "sfREBCurrName"},
	
	txtREBCurrSurname: {
		somExpression: "txtREBCurrSurname",
		parentNodeKey: "sfREBCurrName"},
	
	txtREBCurrTitle: {
		somExpression: "txtREBCurrTitle",
		parentNodeKey: "sfREBCurrName"},
	
	ddlREBCurrLangPref: {
		somExpression: "ddlREBCurrLangPref",
		parentNodeKey: "sfREBCurrName",
		pickListKey:	"languageList"},
	
	txtREBCurrTelephone: {
		somExpression: "txtREBCurrTelephone",
		parentNodeKey: "sfREBCurrName",
		delegate:		"script.HCeForm.model.delegate.REBPhoneFormatDelegate",
		},
	
	txtREBCurrExtension: {
		somExpression: "txtREBCurrExtension",
		parentNodeKey: "sfREBCurrName"},
	
	txtREBCurrFax: {
		somExpression: "txtREBCurrFax",
		parentNodeKey: "sfREBCurrName",
		delegate:		"script.HCeForm.model.delegate.REBFaxFormatDelegate",
		},
	
	txtREBCurrEmail: {
		somExpression: "txtREBCurrEmail",
		parentNodeKey: "sfREBCurrName",
		delegate:		"script.HCeForm.model.delegate.REBEmailFormatDelegate",
		},
	/*Previous name REBA details**/		
	sfREBPrevName: {
		somExpression: "sfREBPrevName",
		parentNodeKey: "sfResearchEthics"},
	
	sfREBPrevContactHeading: {
		somExpression: "sfREBPrevContactHeading",
		parentNodeKey: "sfREBPrevName"},
	
	lblPrevRebaPerson: {
		somExpression:	"lblPrevRebaPerson",
		parentNodeKey:	"sfREBPrevContactHeading",
		labelKey:		"lbPrevRebContact",
		},
	
	txtREBPrevGivenName: {
		somExpression: "txtREBPrevGivenName",
		parentNodeKey: "sfREBPrevName"},
	
	txtREBPrevInitials: {
		somExpression: "txtREBPrevInitials",
		parentNodeKey: "sfREBPrevName"},
	
	txtREBPrevSurname: {
		somExpression: "txtREBPrevSurname",
		parentNodeKey: "sfREBPrevName"},
	
	txtREBPrevTitle: {
		somExpression: "txtREBPrevTitle",
		parentNodeKey: "sfREBPrevName"},
	
	sfPrevHiddenProp: {
		somExpression: "sfPrevHiddenProp",
		parentNodeKey: "sfREBPrevName"},
	
	ddlREBPrevLangPref: {
		somExpression: "ddlREBPrevLangPref",
		parentNodeKey: "sfPrevHiddenProp",
		pickListKey:	"languageList"},
	
	txtREBPrevTelephone: {
		somExpression: "txtREBPrevTelephone",
		parentNodeKey: "sfPrevHiddenProp"},
	
	txtREBPrevExtension: {
		somExpression: "txtREBPrevExtension",
		parentNodeKey: "sfPrevHiddenProp"},
	
	txtREBPrevFax: {
		somExpression: "txtREBPrevFax",
		parentNodeKey: "sfPrevHiddenProp"},
	
	txtREBPrevEmail: {
		somExpression: "txtREBPrevEmail",
		parentNodeKey: "sfPrevHiddenProp"},
	
	
}
</script>
                  <?templateDesigner expand 1?></variables>
               <bind match="none"/>
               <?templateDesigner expand 1?></subform>
            <subform h="50mm" name="resources" w="100mm">
               <variables>
                  <script usehref="..\..\fragments\delegates\resources\errorDelegate_en.xdp#som($template.form1.#subform.#variables.errorDelegate_en)"/>
                  <script usehref="..\..\fragments\delegates\resources\errorDelegate_fr.xdp#som($template.form1.#subform.#variables.errorDelegate_fr)"/>
                  <script contentType="application/x-javascript" name="general_en">//nov2015
var content={
	
	lbHideInstruct:		"Hide Instructions",
	lbShowInstruct:		"Show Instructions",
	lbOfLCText:			"of",
	lbMandatory:		"Asterisk symbol (*) denotes a mandatory field.",
	lbValidError:		"Plus symbol (+) denotes a validation error or missing data.",
	lbVersion:			"Revision No.:",
	lbHealthCanada:		"Health Canada",
 	lbDate:				"Date formatted as YYYY-MM-DD",
 	lbDigitalID:		"Digital ID",
	lbDigitalImage:		"Image Signature",
	lbSignature:		"Signature",
	lbFinalize:			"Finalize",
	lbModify:			"Modify",
	validation_title:	"Validation Results",
	validation_pass:	"This form successfully validated and locked from editing. Please sign the form before submitting to Health Canada.",  //override oore
	message_saveAs: 	"This form has encountered a problem.", //override oore
	provinceState:		"Province or State",
	
}
</script>
                  <script contentType="application/x-javascript" name="general_fr">//nov2015
var content={

		
	lbHideInstruct:		"Masquer les instructions",
	lbShowInstruct:		"Afficher les instructions",
	lbOfLCText:			"sur",
	validation_title:	"Résultats de la validation",
	lbMandatory:		"Astérisque (*)  démontre un champ obligatoire.",
	lbValidError:		"Symbole plus (+) démontre un champ avec une erreur de validation ou des données manquantes.",
	lbVersion:			"Revision No.:",
	lbHealthCanada:		"Santé  Canada",
	lbSalutation:		"Appel",
	lbGivenName: 		"Prénom",
	lbSurname:			"Nom",
	lbPositionTitle:	"Titre du poste",
	lbSignature:		"Signature",
	lbFinalize:			"Finaliser",
	lbModify:			"Modifier",
	lbSignature:		"Signature",
	lbFinalize:			"Finaliser",
	lbModify:			"Modifier",
	lbLockSuccess:		"Le formulaire a été validé et verrouiller contre l'édition. Il peut maintenant être imprimé et envoyé à Santé Canada. Pour pouvoir modifier le formulaire, appuyez sur le bouton Modifier.",
	validation_pass:	"fr_This form successfully validated and locked from editing. Please sign the form before submitting to Health Canada.",
	message_saveAs: 	"Ce formulaire a eu un problème.",
	provinceState:		"Province ou Etat",
}
</script>
                  <script usehref="..\..\fragments\address\addressResource_en.xdp#som($template.form1.#subform.#variables.address_en)"/>
                  <script usehref="..\..\fragments\address\addressResource_fr.xdp#som($template.form1.#subform.#variables.address_fr)"/>
                  <script contentType="application/x-javascript" name="instruct_en">

var content={

	lbInstruct1:		"Instruct1",
	lbInstruct2:		"Instruct2",  
	lbInstruct3:		"Instruct3", 
	lbInstruct4:		"Instruct4", 
	lbInstruct5:		"Instruct5", 
 
}
</script>
                  <script contentType="application/x-javascript" name="instruct_fr">

var content={

	lbInstruct1:		"fr_Instruct1",
	lbInstruct2:		"fr_Instruct2",  
	lbInstruct3:		"fr_Instruct3", 
	lbInstruct4:		"fr_Instruct4", 
	lbInstruct5:		"fr_Instruct5", 

}
</script>
                  <script contentType="application/x-javascript" name="heading_en">

var content={

		lbInstructionsHeading: 		"INSTRUCTIONS",		
		lbApplTitle : 				"CLINICAL TRIAL SITE INFORMATION FORM",	//TODO: update form title	
		lbPart1:					"PART 1 - CLINICAL TRIAL PROTOCOL INFORMATION",
		lbSubAction:				"CLINICAL TRIAL SUBMISSION ACTION REQUIREMENTS",
		lbTrialIDInfo:				"CLINICAL TRIAL IDENTIFICATION INFORMATION",
		lbPart2:					"PART 2 - DRUG PRODUCT AND SPONSOR INFORMATION",
		lbProductInfo:				"A) DRUG PRODUCT INFORMATION",
		lbSponsorInfo:				"B) SPONSOR INFORMATION",
		lbContactPersonHeading:		"CONTACT PERSON FOR SPONSOR",
		lbContactInfo:				"C) CONTACT PERSON INFORMATION",
		lbPart3:					"PART 3 - CLINICAL TRIAL SITE INFORMATION",
		lbCurrClinSiteName:			"CURRENT CLINICAL SITE NAME",
		lbPrevClinSiteName:			"PREVIOUS CLINICAL SITE NAME",
		lbCurrClinSiteAddress:		"A) CURRENT CLINICAL TRIAL SITE ADDRESS",
		lbPrevClinSiteAddress:		"PREVIOUS CLINICAL TRIAL SITE ADDRESS",
		lbQualifiedInvestigator:	"B) QUALIFIED INVESTIGATOR",
		lbCurrQIName:				"CURRENT QUALIFIED INVESTIGATOR NAME",
		lbPrevQIName:				"PREVIOUS QUALIFIED INVESTIGATOR NAME",
		lbRebApproval:				"C) RESEARCH ETHICS BOARD APPROVAL", 
		lbCurrRebAddress:			"CURRENT RESEARCH ETHICS BOARD ADDRESS",
		lbPrevRebAddress:			"PREVIOUS RESEARCH ETHICS BOARD ADDRESS",
		lbCurrRebContact:			"CURRENT RESEARCH ETHICS BOARD CONTACT PERSON",			
		lbPrevRebContact:			"PREVIOUS RESEARCH ETHICS BOARD CONTACT PERSON",	
}
</script>
                  <script contentType="application/x-javascript" name="heading_fr">

var content={

	lbInstructionsHeading: 		"INSTRUCTIONS",	
	lbApplTitle : 				"FORMULAIRE D'INFORMATION SUR LE LIEU D'ESSAI CLINIQUE", //TODO: update form title
	lbPart1:					"PARTIE 1 – INFORMATION SUR LE PROTOCOLE D’ESSAI CLINIQUE",
	lbSubAction:				"MESURES REQUISES POUR LA PRÉSENTATION D'UN ESSAI CLINIQUE",
	lbTrialIDInfo:				"INFORMATION SUR LE PROTOCOLE ET LE CONTRÔLE DE L'ESSAI CLINIQUE",
	lbPart2:					"PARTIE 2 – INFORMATION SUR LE PRODUIT ET PROMOTEUR",
	lbProductInfo:				"A) INFORMATION SUR LE PRODUIT",
	lbSponsorInfo:				"B) INFORMATION SUR LE PROMOTEUR",
	lbContactPersonHeading:		"PERSONNE-RESSOURCE DU PROMOTEUR",
	lbContactInfo:				"fr_C) CONTACT PERSON INFORMATION",
	lbPart3:					"PARTIE 3 – RENSEIGNEMENTS SUR LE LIEU DE L'ESSAI CLINIQUE",
	lbCurrClinSiteName:			"fr_CURRENT CLINICAL SITE NAME",
	lbPrevClinSiteName:			"fr_PREVIOUS CLINICAL SITE NAME",
	lbCurrClinSiteAddress:		"fr_A) CURRENT CLINICAL TRIAL SITE ADDRESS",
	lbPrevClinSiteAddress:		"fr_PREVIOUS CLINICAL TRIAL SITE ADDRESS",
	lbQualifiedInvestigator:	"B) CHERCHEUR QUALIFIÉ",
	lbCurrQIName:				"fr_CURRENT QUALIFIED INVESTIGATOR NAME",
	lbPrevQIName:				"PREVIOUS QUALIFIED INVESTIGATOR NAME",
	lbRebApproval:				"C) APPROBATION DU COMITÉ D'ÉTHIQUE POUR LA RECHERCHE", 
	lbCurrRebAddress:			"fr_CURRENT RESEARCH ETHICS BOARD ADDRESS",
	lbPrevRebAddress:			"fr_PREVIOUS RESEARCH ETHICS BOARD ADDRESS",
	lbCurrRebContact:			"fr_CURRENT RESEARCH ETHICS BOARD CONTACT PERSON",			
	lbPrevRebContact:			"fr_PREVIOUS RESEARCH ETHICS BOARD CONTACT PERSON",
	
}
</script>
                  <script contentType="application/x-javascript" name="lists_en">

var content={
	subTypeList:[
					["CTA", "Clinical Trial Application (CTA)"],
					["CTAA", "Clinical Trial Application (CTA-A)"],
				],
	/*typeChangeList:[
						["NEW", "one or more new clinical trial site?"],
						["CHNGE", "a change to a previously submitted clinical trial site?"],
				],*/			

	countryListNA:	[
						["CA", "Canada"],
						["US", "United States"],
				],	
				
	amendTypeList:[
						["NEW", "New clinical trial site"],
						["CHNGE", "Changes to this clinical trial site"],
						["SAME", "No changes to this clinical trial site"],
				],				
				
}
</script>
                  <script contentType="application/x-javascript" name="lists_fr">

var content={
	subTypeList:[
					["CTA", "Demande d'essai clinique (DEC)"],
					["CTAA", " Modification à la demande d'essai clinique (MDEC)"],
				],
	
	/*typeChangeList:[
						["NEW", "fr_one or more new clinical trial site?"],
						["CHNGE", "fr_a change to a previously submitted clinical trial site?"],
				],	*/		
	countryListNA:	[
						["CA", "Canada"],
						["US", "United States"],
				],	
	amendTypeList:[
						["NEW", "New clinical trial site"],
						["CHNGE", "Changes to this clinical trial site"],
						["SAME", "No changes to this clinical trial site"],
				],				

}
</script>
                  <script contentType="application/x-javascript" name="msg_en">

var content={

		error_sponsorZipFormat:		"For Part 2B, sponsor information",	
		error_clinicalTrialSite:	"For clinical trial site",
		error_clinicalSiteAddress:	"current clinical trial site address,",
		error_sponsorSiteAddress:	"For the sponsor address,",
		error_contactAddress:		"For the contact address,",
		error_contactSponsor:		"For the sponsor contact person,",
		error_contact:				"For the clinical trial contact information,",
		error_currQIName:			"current qualified investigator name,",
		error_currQIAddress:		"current qualified investigator address,",
		error_currREBName:			"current research board contact person,",
		error_currREBAddress:		"current research board address,",
		//error_PostalCodeFormat:		"dasdas",
}
</script>
                  <script contentType="application/x-javascript" name="msg_fr">
var content={

		error_sponsorZipFormat:		"fr_For Part 2B, Sponsor Information",	
		error_clinicalTrialSite:	"fr_For clinical trial site",
		error_clinicalSiteAddress:	"fr_,current clinical trial site address",
		error_sponsorSiteAddress:	"fr_For the Sponsor Address,",
		error_contactAddress:		"fr_For the Contact Address,",
		error_contactSponsor:		"fr_For the sponsor contact person,",
		error_contact:				"fr_For the clinical trial contact information,",
		error_currQIName:			"fr_current qualified investigator name,",
		error_currQIAddress:		"fr_current qualified investigator address,",
		error_currREBName:			"fr_current research board contact person,",
		error_currREBAddress:		"fr_current research board address,",
}
</script>
                  <script contentType="application/x-javascript" name="part3_en">
var content={
	lbDeleteSite:			"Delete Clinical Trial Site",
	lbChangeType:			"Type of Change",
	lbReasonText:			"Reasons for the change. Please select one or more of the reasons as appropriate",
	lbDateChange:			"Dates: Change in Commencement Date and  Research Ethics Board (REB) Date of Approval",
	lbSiteNameChange:		"Part 3A: Change in Clinical Trial Site Name",
	lbSiteAddressChange:	"Part 3A: Change in Clinical Trial Site Address",
	lbQINameChange:			"Part 3B: Change in Qualified Investigator (QI) Name",
	lbQIAddressChange:		"Part 3B: Change in Qualified Investigator (QI) Address",
	lbREBNameChange:		"Part 3C: Change in Research Ethics Board (REB) Contact Person",
	lbREBAddressChange:		"Part 3C: Change in Research Ethics Board (REB) Address",
	
	lbCurrSiteName:			"Current Name of the site",
	lbAmendDate:			"Clinical Trial Commencement or Amendment Date as YYYY-MM-DD",
	lbQUIDecl:				"A Qualified Investigator Undertaking (QIU) form must be completed by the Qualified Investigator responsible for the conduct of the clinical trial at the site specified above. The completed undertaking must be retained for a period of 25 years.",
	lbREBDecl:				"A Research Ethics Board Attestation (REBA) form must be completed by the Research Ethics Board that reviewed and approved the protocol and informed consent form for the clinical trial at the site specified above. The completed attestation must be retained for a period of 25 years.",
	lbApprovalDate:			"Date of Approval as YYYY-MM-DD",
	lbREBName:				"Name of Research Ethics Board, including applicable affiliations",
}
</script>
                  <script contentType="application/x-javascript" name="part3_fr">
var content={
	lbDeleteSite:			"Supprimer lieu d'essai clinique",
	lbChangeType:			"Type de modification,",
	lbReasonText:			"Motifs de la modification:S'il vous plaît sélectionner un ou plusieurs des motifs, le cas échéant.",
	lbDateChange:			"Dates: Modification de la date de début et de la date d'approbation du Comité d'éthique de la recherche (CER)",
	lbSiteNameChange:		"Partie 3A: Modification du nom du lieu de l'essai clinique",
	lbSiteAddressChange:	"Partie 3A: Modification de l'adresse du lieu de l'essai clinique",
	lbQINameChange:			"Partie 3B: Modification du nom du chercheur qualifié (CQ)",
	lbQIAddressChange:		"Partie 3B: Modification de l'adresse du chercheur qualifié (CQ)",
	lbREBNameChange:		"Partie 3C: Modification de la personne-ressource du Comité d’éthique de la recherche (CER)",
	lbREBAddressChange:		"Partie 3C: Modification de l'adresse du Comité d’éthique de la recherche (CER)",

	lbCurrSiteName:			"Nom actuel du lieu",
	lbAmendDate:			"Date de début ou de modification de l'essai clinique au format AAAA-MM-JJ",
	lbQUIDecl:				"Le chercheur qualifié chargé de mener l'essai clinique au lieu indiqué ci-dessus doit remplir un formulaire d'engagement du chercheur qualifié (EQI). Ce formulaire doit être conservé pendant une période de 25 ans.",
	lbREBDecl:				"Le Comité d'éthique de la recherche qui a évalué et approuvé le protocole et qui a rempli le formulaire de consentement pour l'essai clinique au lieu susmentionné doit remplir un formulaire d'attestation du comité d'éthique pour la recherche. Cette attestation remplie doit être conservée pendant une période de 25 ans.",
	lbApprovalDate:			"Date d'approbation au format AAAA-MM-J",
	lbREBName:				"fr_Nom du Comité d'éthique de la recherche, y compris les affiliations applicables",

}
</script>
                  <script contentType="application/x-javascript" name="part12_en">

var content={
	lbSubType:				"Type of Submission for this Protocol or Trial",
	lbProtocolTitle:		"Clinical Trial Protocol Title",
	lbProtocolNum:			"Clinical Trial Protocol Number",
	lbControlNumber:		"Clinical Trial Control Number,(6 digits)",
	lbRegFileNum:			"Health Canada's Central Registry (CR) File Number, if assigned",
	lbDeleteControlNumber:	"Delete Control Number",
	lbBrandName:			"Brand Name",
	lbCommonName:			"Proper, Common or Non-Proprietary Name",
	lbContactSameSponsor:	"The contact for this Clinical Trial is the same as the Sponsor",
	lbCompanyOrg:			"Company or Organization Name",
	lbNewAppl:				"This is the first time these clinical trial sites are being submitted to Health Canada for this clinical trial protocol.",
	lbAmendAppl:			"The clinical trial sites are being amended for this clinical trial protocol.  A CTSI form has been previously submitted to Health Canada for this clinical trial protocol.",
	lbSponsor:				"Name of Sponsor",	
}
</script>
                  <script contentType="application/x-javascript" name="part12_fr">
var content={
		
		lbSubType:				"Type de présentation pour ce protocol ou essai",
		lbProtocolTitle:		"Titre du protocole d'essai clinique",
		lbProtocolNum:			"Numéro du protocole d'essai clinique",
		lbControlNumber:		"Numéro de contrôle de l'essai clinique (6 chiffres)",
		lbDeleteControlNumber:	"Supprimer Numéro de contrôle",
		lbRegFileNum:			"Numéro de dossier du Registre central (RC) de Santé Canada, si assigné",
		lbBrandName:			"Nom commercial",
		lbCommonName:			"Nom propre, nom usuel ou dénomination commune",
		lbContactSameSponsor:	"La personne-ressource pour cet essai clinique est la même que celle du promoteur",
		lbCompanyOrg:			"Nom de la société",
		lbNewAppl:				"fr_This is the first time these clinical trial sites are being submitted to Health Canada for this clinical trial protocol.",
		lbAmendAppl:			"fr_The clinical trial sites are being amended for this clinical trial protocol.  A CTSI form has been previously submitted to Health Canada for this clinical trial protocol.",
		lbSponsor:				"Nom du promoteur",
		
}
</script>
                  <?templateDesigner expand 1?></variables>
               <bind match="none"/>
               <?templateDesigner expand 1?></subform>
            <subform h="50mm" name="util" w="100mm">
               <variables>
                  <script usehref="..\..\fragments\util\General.xdp#som($template.form1.#subform.#variables.General)"/>
                  <script usehref="..\..\fragments\Accessibility.xdp#som($template.form1.#subform.#variables.Accessibility)"/>
                  <script usehref="..\..\fragments\util\NumberFormat.xdp#som($template.form1.#subform.#variables.NumberFormat)"/>
                  <?templateDesigner expand 1?>
                  <script usehref="..\..\fragments\util\AddressUtil.xdp#som($template.form1.#subform.#variables.AddressUtil)"/>
               </variables>
               <bind match="none"/>
               <?templateDesigner expand 1?></subform>
            <bind match="none"/>
            <?templateDesigner expand 1?></subform>
         <?templateDesigner expand 1?></subform>
      <proto/>
      <desc>
         <text name="version"> 2.00</text>
         <text name="title">FORM TITLE</text>
         <text name="creator">Health Canada</text>
         <text name="created">2015-07-21</text>
         <text name="department">Health Canada</text>
         <text name="issued">2015</text>
      </desc>
      <margin leftInset="0mm" topInset="0mm" bottomInset="0mm"/>
      <event activity="initialize" name="event__initialize">
         <script contentType="application/x-javascript">
var cFormHandler=script.HCeForm.control.FormHandler;
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
var cSystem = script.core.System;


try{
		// set up event object
		var actionName = cFormHandler.INITIALIZE_FORM_ACTION;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cFormHandler.actionPerformed(anActionEvent);
}
catch(exception)
{
	cLog.warn("Problem with  form initialize::initialize", exception);
}



</script>
      </event>
      <event activity="prePrint" ref="$host" name="event__prePrint">
         <script contentType="application/x-javascript">
var cFormHandler=	script.HCeForm.control.FormHandler;
var cActionEvent = script.core.event.ActionEvent;
var cLog = script.core.util.Log;
try
{
		// set up event object
		var actionName =  cFormHandler.HIDE_INSTRUCTIONS;
		var anActionEvent = cActionEvent.createInstance(actionName, this);
		// deploy event to controller
		cFormHandler.actionPerformed(anActionEvent);
	
}
catch(exception)
{
	cLog.warn("Problem with hide instructions ::preprint", exception);
}
</script>
      </event>
      <?templateDesigner expand 0?>
      <?templateDesigner Hyphenation excludeInitialCap:1, excludeAllCaps:1, wordCharCnt:7, remainCharCnt:3, pushCharCnt:3?>
      <?renderCache.subset "Myriad Pro" 0 0 ISO-8859-1 4 280 71 000100030009000A000B000C000D000E000F0010001100120013001400150016001700180019001A001B001C00220023002400250026002700280029002A002D002E002F0030003100320033003400350036003A003B003D00420043004400450046004700480049004A004C004D004E004F005000510053005400550056005700580059005A005B006800CE "()*+,-./0123456789:;ABCDEFGHILMNOPQRSTUYZ\abcdefghiklmnoprstuvwxyz'ç?>
      <?renderCache.subset "Myriad Pro" 1 0 ISO-8859-1 4 108 27 00010009000A000E00120013001400220023002400250026002700280029002A002D002E002F00300031003200330034003500360037 ()-123ABCDEFGHILMNOPQRSTUV?></subform>
   <?templateDesigner DefaultPreviewDynamic 1?>
   <?originalXFAVersion http://www.xfa.org/schema/xfa-template/2.8/?>
   <?templateDesigner Grid show:0, snap:0, units:0, color:ff8080, origin:(0,0), interval:(125000,125000), objsnap:0, guidesnap:0, pagecentersnap:827642484?>
   <?layout containedExclGroup 1?>
   <?templateDesigner DefaultLanguage JavaScript?>
   <?templateDesigner DefaultRunAt client?>
   <?acrobat JavaScript strictScoping?>
   <?PDFPrintOptions embedViewerPrefs 0?>
   <?PDFPrintOptions embedPrintOnFormOpen 0?>
   <?PDFPrintOptions scalingPrefs 0?>
   <?PDFPrintOptions enforceScalingPrefs 0?>
   <?PDFPrintOptions paperSource 0?>
   <?PDFPrintOptions duplexMode 0?>
   <?templateDesigner DefaultPreviewType interactive?>
   <?templateDesigner DefaultPreviewPagination simplex?>
   <?templateDesigner XDPPreviewFormat 20?>
   <?templateDesigner DefaultCaptionFontSettings face:Myriad Pro;size:10;weight:normal;style:normal?>
   <?templateDesigner DefaultValueFontSettings face:Myriad Pro;size:10;weight:normal;style:normal?>
   <?templateDesigner ValidationMessaging noMessages?>
   <?templateDesigner FormTargetVersion 30?>
   <?templateDesigner Zoom 145?>
   <?templateDesigner Rulers horizontal:1, vertical:1, guidelines:1, crosshairs:0?>
   <?templateDesigner SaveTaggedPDF 0?>
   <?templateDesigner SavePDFWithEmbeddedFonts 0?>
   <?templateDesigner SavePDFWithLog 0?></template>
<config xmlns="http://www.xfa.org/schema/xci/3.0/">
   <agent name="designer">
      <!--  [0..n]  -->
      <destination>pdf</destination>
      <pdf>
         <!--  [0..n]  -->
         <fontInfo/>
      </pdf>
   </agent>
   <present>
      <!--  [0..n]  -->
      <pdf>
         <!--  [0..n]  -->
         <tagged>0</tagged>
         <fontInfo>
            <embed>0</embed>
         </fontInfo>
         <version>1.7</version>
         <adobeExtensionLevel>5</adobeExtensionLevel>
      </pdf>
      <common>
         <data>
            <xsl>
               <uri/>
            </xsl>
            <outputXSL>
               <uri/>
            </outputXSL>
         </data>
      </common>
      <script>
         <runScripts>server</runScripts>
      </script>
      <cache>
         <macroCache/>
      </cache>
      <xdp>
         <packets>*</packets>
      </xdp>
      <output/>
   </present>
   <psMap>
      <font typeface="Calibri" psName="Calibri" weight="normal" posture="normal"/>
   </psMap>
   <acrobat>
      <common>
         <validationMessaging>noMessages</validationMessaging>
      </common>
   </acrobat>
</config>
<localeSet xmlns="http://www.xfa.org/schema/xfa-locale-set/2.7/">
   <locale name="en_CA" desc="English (Canada)">
      <calendarSymbols name="gregorian">
         <monthNames>
            <month>January</month>
            <month>February</month>
            <month>March</month>
            <month>April</month>
            <month>May</month>
            <month>June</month>
            <month>July</month>
            <month>August</month>
            <month>September</month>
            <month>October</month>
            <month>November</month>
            <month>December</month>
         </monthNames>
         <monthNames abbr="1">
            <month>Jan</month>
            <month>Feb</month>
            <month>Mar</month>
            <month>Apr</month>
            <month>May</month>
            <month>Jun</month>
            <month>Jul</month>
            <month>Aug</month>
            <month>Sep</month>
            <month>Oct</month>
            <month>Nov</month>
            <month>Dec</month>
         </monthNames>
         <dayNames>
            <day>Sunday</day>
            <day>Monday</day>
            <day>Tuesday</day>
            <day>Wednesday</day>
            <day>Thursday</day>
            <day>Friday</day>
            <day>Saturday</day>
         </dayNames>
         <dayNames abbr="1">
            <day>Sun</day>
            <day>Mon</day>
            <day>Tue</day>
            <day>Wed</day>
            <day>Thu</day>
            <day>Fri</day>
            <day>Sat</day>
         </dayNames>
         <meridiemNames>
            <meridiem>AM</meridiem>
            <meridiem>PM</meridiem>
         </meridiemNames>
         <eraNames>
            <era>BC</era>
            <era>AD</era>
         </eraNames>
      </calendarSymbols>
      <datePatterns>
         <datePattern name="full">EEEE, MMMM D, YYYY</datePattern>
         <datePattern name="long">MMMM D, YYYY</datePattern>
         <datePattern name="med">D-MMM-YY</datePattern>
         <datePattern name="short">DD/MM/YY</datePattern>
      </datePatterns>
      <timePatterns>
         <timePattern name="full">h:MM:SS A Z</timePattern>
         <timePattern name="long">h:MM:SS A Z</timePattern>
         <timePattern name="med">h:MM:SS A</timePattern>
         <timePattern name="short">h:MM A</timePattern>
      </timePatterns>
      <dateTimeSymbols>GyMdkHmsSEDFwWahKzZ</dateTimeSymbols>
      <numberPatterns>
         <numberPattern name="numeric">z,zz9.zzz</numberPattern>
         <numberPattern name="currency">$z,zz9.99</numberPattern>
         <numberPattern name="percent">z,zz9%</numberPattern>
      </numberPatterns>
      <numberSymbols>
         <numberSymbol name="decimal">.</numberSymbol>
         <numberSymbol name="grouping">,</numberSymbol>
         <numberSymbol name="percent">%</numberSymbol>
         <numberSymbol name="minus">-</numberSymbol>
         <numberSymbol name="zero">0</numberSymbol>
      </numberSymbols>
      <currencySymbols>
         <currencySymbol name="symbol">$</currencySymbol>
         <currencySymbol name="isoname">CAD</currencySymbol>
         <currencySymbol name="decimal">.</currencySymbol>
      </currencySymbols>
      <typefaces>
         <typeface name="Myriad Pro"/>
         <typeface name="Minion Pro"/>
         <typeface name="Courier Std"/>
         <typeface name="Adobe Pi Std"/>
         <typeface name="Adobe Hebrew"/>
         <typeface name="Adobe Arabic"/>
         <typeface name="Adobe Thai"/>
         <typeface name="Kozuka Gothic Pro-VI M"/>
         <typeface name="Kozuka Mincho Pro-VI R"/>
         <typeface name="Adobe Ming Std L"/>
         <typeface name="Adobe Song Std L"/>
         <typeface name="Adobe Myungjo Std M"/>
      </typefaces>
   </locale>
   <locale name="fr_CA" desc="French (Canada)">
      <calendarSymbols name="gregorian">
         <monthNames>
            <month>janvier</month>
            <month>février</month>
            <month>mars</month>
            <month>avril</month>
            <month>mai</month>
            <month>juin</month>
            <month>juillet</month>
            <month>août</month>
            <month>septembre</month>
            <month>octobre</month>
            <month>novembre</month>
            <month>décembre</month>
         </monthNames>
         <monthNames abbr="1">
            <month>janv.</month>
            <month>févr.</month>
            <month>mars</month>
            <month>avr.</month>
            <month>mai</month>
            <month>juin</month>
            <month>juil.</month>
            <month>août</month>
            <month>sept.</month>
            <month>oct.</month>
            <month>nov.</month>
            <month>déc.</month>
         </monthNames>
         <dayNames>
            <day>dimanche</day>
            <day>lundi</day>
            <day>mardi</day>
            <day>mercredi</day>
            <day>jeudi</day>
            <day>vendredi</day>
            <day>samedi</day>
         </dayNames>
         <dayNames abbr="1">
            <day>dim.</day>
            <day>lun.</day>
            <day>mar.</day>
            <day>mer.</day>
            <day>jeu.</day>
            <day>ven.</day>
            <day>sam.</day>
         </dayNames>
         <meridiemNames>
            <meridiem>AM</meridiem>
            <meridiem>PM</meridiem>
         </meridiemNames>
         <eraNames>
            <era>av. J.-C.</era>
            <era>ap. J.-C.</era>
         </eraNames>
      </calendarSymbols>
      <datePatterns>
         <datePattern name="full">EEEE D MMMM YYYY</datePattern>
         <datePattern name="long">D MMMM YYYY</datePattern>
         <datePattern name="med">YY-MM-DD</datePattern>
         <datePattern name="short">YY-MM-DD</datePattern>
      </datePatterns>
      <timePatterns>
         <timePattern name="full">HH' h 'MM' min 'SS' s 'Z</timePattern>
         <timePattern name="long">HH:MM:SS Z</timePattern>
         <timePattern name="med">HH:MM:SS</timePattern>
         <timePattern name="short">HH:MM</timePattern>
      </timePatterns>
      <dateTimeSymbols>GaMjkHmsSEDFwWxhKzZ</dateTimeSymbols>
      <numberPatterns>
         <numberPattern name="numeric">z,zz9.zzz</numberPattern>
         <numberPattern name="currency">z,zz9.99 $|(z,zz9.99$)</numberPattern>
         <numberPattern name="percent">z,zz9%</numberPattern>
      </numberPatterns>
      <numberSymbols>
         <numberSymbol name="decimal">,</numberSymbol>
         <numberSymbol name="grouping"> </numberSymbol>
         <numberSymbol name="percent">%</numberSymbol>
         <numberSymbol name="minus">-</numberSymbol>
         <numberSymbol name="zero">0</numberSymbol>
      </numberSymbols>
      <currencySymbols>
         <currencySymbol name="symbol">$</currencySymbol>
         <currencySymbol name="isoname">CAD</currencySymbol>
         <currencySymbol name="decimal">,</currencySymbol>
      </currencySymbols>
      <typefaces>
         <typeface name="Myriad Pro"/>
         <typeface name="Minion Pro"/>
         <typeface name="Courier Std"/>
         <typeface name="Adobe Pi Std"/>
         <typeface name="Adobe Hebrew"/>
         <typeface name="Adobe Arabic"/>
         <typeface name="Adobe Thai"/>
         <typeface name="Kozuka Gothic Pro-VI M"/>
         <typeface name="Kozuka Mincho Pro-VI R"/>
         <typeface name="Adobe Ming Std L"/>
         <typeface name="Adobe Song Std L"/>
         <typeface name="Adobe Myungjo Std M"/>
      </typefaces>
   </locale>
</localeSet>
<xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">
   <xfa:data xfa:dataNode="dataGroup"/>
</xfa:datasets>
<x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="Adobe XMP Core 5.2-c001 63.139439, 2011/06/07-10:39:26        ">
   <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
      <rdf:Description xmlns:xmp="http://ns.adobe.com/xap/1.0/" rdf:about="">
         <xmp:MetadataDate>2016-02-19T21:13:53Z</xmp:MetadataDate>
         <xmp:CreatorTool>Adobe LiveCycle Designer ES 10.0</xmp:CreatorTool>
      </rdf:Description>
      <rdf:Description xmlns:pdf="http://ns.adobe.com/pdf/1.3/" rdf:about="">
         <pdf:Producer>Adobe LiveCycle Designer ES 10.0</pdf:Producer>
      </rdf:Description>
      <rdf:Description xmlns:xmpMM="http://ns.adobe.com/xap/1.0/mm/" rdf:about="">
         <xmpMM:DocumentID>uuid:1d326285-7a13-4346-a4cb-02d273286c52</xmpMM:DocumentID>
         <xmpMM:InstanceID>uuid:916757e2-3cd1-4ff4-8d72-311500fa54ac</xmpMM:InstanceID>
      </rdf:Description>
      <rdf:Description xmlns:dc="http://purl.org/dc/elements/1.1/" rdf:about="">
         <dc:format>application/pdf</dc:format>
         <dc:date>
            <rdf:Seq>
               <rdf:li rdf:parseType="Resource">
                  <rdf:value>2015-07-21</rdf:value>
                  <dc:element-refinement>dc:created</dc:element-refinement>
               </rdf:li>
               <rdf:li rdf:parseType="Resource">
                  <rdf:value>2015</rdf:value>
                  <dc:element-refinement>dc:issued</dc:element-refinement>
               </rdf:li>
            </rdf:Seq>
         </dc:date>
         <dc:creator>
            <rdf:Seq>
               <rdf:li>Health Canada</rdf:li>
            </rdf:Seq>
         </dc:creator>
         <dc:title>
            <rdf:Alt>
               <rdf:li xml:lang="x-default">FORM TITLE</rdf:li>
            </rdf:Alt>
         </dc:title>
      </rdf:Description>
      <rdf:Description xmlns:desc="http://ns.adobe.com/xfa/promoted-desc/" rdf:about="">
         <desc:version rdf:parseType="Resource">
            <rdf:value> 2.00</rdf:value>
            <desc:ref>/template/subform[1]</desc:ref>
         </desc:version>
         <desc:department rdf:parseType="Resource">
            <rdf:value>Health Canada</rdf:value>
            <desc:ref>/template/subform[1]</desc:ref>
         </desc:department>
      </rdf:Description>
   </rdf:RDF>
</x:xmpmeta>
<xfdf xmlns="http://ns.adobe.com/xfdf/" xml:space="preserve">
   <annots/>
</xfdf></xdp:xdp>
